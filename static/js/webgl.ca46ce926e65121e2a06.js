webpackJsonp([2],{1:function(e,t){},2:function(e,t){},"4mrR":function(e,t,r){"use strict";var n,a,o=r("lC5x"),i=r.n(o),s=r("J0Oq"),c=r.n(s),l=r("dlDQ"),u=(n=c()(i.a.mark(function e(t){var r,n,a,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.aoMap,n=t.envMap,a=t.color1,o=t.color2,e.t0={type:"c",value:new p.Color(a||0)},e.t1={type:"c",value:new p.Color(o||8882059)},e.next=5,Object(l.e)(r);case 5:if(e.t2=e.sent,e.t2){e.next=8;break}e.t2=null;case 8:return e.t3=e.t2,e.t4={type:"t",value:e.t3},e.t5={type:"t",value:null},e.t6={type:"f",value:0,min:0,max:1},e.t7={type:"f",value:2,min:0,max:5},e.next=15,Object(l.d)(n);case 15:if(e.t8=e.sent,e.t8){e.next=18;break}e.t8=null;case 18:return e.t9=e.t8,e.t10={type:"t",value:e.t9},e.t11={type:"t",value:null},e.t12={type:"c",value:new p.Color(16724872)},e.t13={type:"f",value:10,min:-50,max:1},e.t14={type:"f",value:1,min:-1,max:1},e.t15={type:"f",value:.05,min:-1,max:1},e.t16={type:"f",value:.2,min:0,max:1},e.t17={type:"b",value:!0},e.t18={type:"f",value:0},e.abrupt("return",{paintColor1:e.t0,paintColor2:e.t1,map:e.t4,normalMap:e.t5,normalScale:e.t6,glossLevel:e.t7,envMap:e.t10,microflakeNMap:e.t11,flakeColor:e.t12,flakeScale:e.t13,normalPerturbation:e.t14,microflakePerturbationA:e.t15,microflakePerturbation:e.t16,filmic:e.t17,time:e.t18});case 29:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),p=r("uUaz"),d=(a=c()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0="\n\nuniform vec3 paintColor1;\nuniform vec3 paintColor2;\nuniform vec3 paintColor3;\nuniform float time;\n\nuniform float normalPerturbation;\nuniform float microflakePerturbationA;\nuniform float microflakePerturbation;\nuniform bool filmic;\n\nuniform float glossLevel;\nuniform samplerCube envMap;\nuniform samplerCube staticSkybox;\n\nuniform sampler2D normalMap;\nuniform sampler2D microflakeNMap;\nuniform vec3 flakeColor;\nuniform float normalScale;\nuniform sampler2D map;\n\nvarying vec2 vUv;\nvarying vec2 flakeUv;\nvarying vec2 shadowCoords;\nvarying vec2 texCoords;\n\nvarying vec3 worldNormal;\nvarying vec4 mvPosition;\nvarying vec3 cameraToVertex;\nvarying vec3 vertPos;\nvarying vec4 worldPosition;\n\nconst vec3 lightPos = vec3(0.0, 200.0, 700.0);\nconst vec3 lightPos2 = vec3(700.0, 200.0, 0.0);\nconst vec3 lightPos3 = vec3(0.0, 200.0, -700.0);\nconst vec3 lightPos4 = vec3(-800.0, 200.0, 0.0);\n\nconst vec3 specColor = vec3(1.0, 1.0, 1.0);\n\n\n// This function taken directly from the three.js phong fragment shader.\n// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n  vec3 q0 = dFdx( eye_pos.xyz );\n  vec3 q1 = dFdy( eye_pos.xyz );\n  vec2 st0 = dFdx( vUv.st );\n  vec2 st1 = dFdy( vUv.st );\n\n  vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n  vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n  vec3 N = normalize( surf_norm );\n\n  vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n  mapN.xy = normalScale * mapN.xy;\n  mat3 tsn = mat3( S, T, N );\n  return surf_norm;\n  return normalize( tsn * mapN );\n}\n\nvec3 perturbSparkleNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n  vec3 q0 = dFdx( eye_pos.xyz );\n  vec3 q1 = dFdy( eye_pos.xyz );\n  vec2 st0 = dFdx( vUv.st );\n  vec2 st1 = dFdy( vUv.st );\n\n  vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n  vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n  vec3 N = normalize( surf_norm );\n\n  vec3 mapN = texture2D( microflakeNMap, flakeUv ).xyz * 2.0 - 1.0;\n  mapN.xy = 1.0 * mapN.xy;\n  mat3 tsn = mat3( S, T, N );\n  return normalize( tsn * mapN );\n}\n\nvec3 intersectCubeMap(vec3 rayOrigin, vec3 rayDir, float cubeSize){\n\n  vec3 t = (cubeSize * sign(rayDir) - rayOrigin) / rayDir;\n  float minT = min(min(t.x, t.y), t.z);\n  return rayOrigin + minT * rayDir;\n}\n\nvec3 getSpecular(vec3 irradiance, vec3 worldDir, vec3 viewDir, vec3 fleckedNormal, float roughnessSqr, float fFresnel){\n  vec3 halfVec = normalize(worldDir + viewDir);\n  float micro = max(dot(halfVec, fleckedNormal), 0.0);\n  float denom = (micro * micro) * (roughnessSqr/2.0 - 1.0) + 1.0;\n  float distr = roughnessSqr/2.0 / (denom * denom);\n  return distr * fFresnel * irradiance;\n}\n\nvoid main() {\n\n  float roughness = .04;\n  float roughnessSqr = roughness * roughness;\n\n  // radeon normal\n\n  vec3 normal = perturbNormal2Arb( mvPosition.xyz, worldNormal );\n\n\n  //vec3 normal = normalize(worldNormal); // V2\n\n  // V2 normal\n  /*vec3 S = normalize(worldBitangent);\n  vec3 T = normalize(worldTangent);*/\n  /*\n  vec3 q0 = dFdx( mvPosition.xyz );\n  vec3 q1 = dFdy( mvPosition.xyz );\n  vec2 st0 = dFdx( vUv.st );\n  vec2 st1 = dFdy( vUv.st );\n  vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n  vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\n  vec3 N = normalize(worldNormal);\n\n  mat3 tsn = mat3( T, S, N );\n\n  vec4 normalGloss = texture2D( normalMap, texCoords );\n  normalGloss.xyz = (normalGloss.xyz - 128.0 / 255.0) * 2.0;\n  vec3 normal = normalize(tsn * normalGloss.xyz);\n*/\n\n/*vec4 fleck = texture2D(flecksSampler, fleckCoords);\nvec3 fleckedNormal = normalGloss.xyz;\nfleckedNormal.xy += (fleck.xy - .5) * fleckScale;\nfleck.z *= fleckScale;\nfleckedNormal = tsn * normalize(fleckedNormal);\nroughnessSqr -= fleck.z * .1;\nif (roughnessSqr < 0.0) roughnessSqr = 0.0;*/\nvec3 fleckedNormal = normal;  // V2\n// end V2 normal\n\nvec3 color = vec3(0.0);\n\n// radeon fresnel calc.\n//float fFresnel = dot( normalize( -cameraToVertex ), normal );\n// end radon\n\n// V2 fresnel calc.\n//angle to the power of 5\nvec3 viewDir = normalize( -cameraToVertex );\nfloat angle = 1.0 - dot( viewDir, normal);\nfloat fFresnel = angle * angle;\nfFresnel *= fFresnel;\n//fFresnel *= angle;\n\nfloat normalSpecularReflection = .02;\nfFresnel = normalSpecularReflection + (1.0 - normalSpecularReflection) * fFresnel;\n// TODO: V2 fresnel is a bit flatter. Possible cause - camera FOV.\n// end V2 fresnel calc.\n\n// radeon reflection\n/*\nvec3 reflection = 2.0 * worldNormal * fFresnel - normalize(-cameraToVertex);\nvec4 envColor = textureCube( envMap, vec3( -reflection.x, reflection.yz ), 1.0 );\nvec3 rc = envColor.rgb;\n*/\n// end radeon reflection.\n\n// V2 reflection\nfloat skyboxSize = 50000.0;\nvec3 skyboxPosition = vec3(0.0);  \nvec3 reflectedView = -reflect(viewDir, normal);\nvec3 offsetRefl = intersectCubeMap(worldPosition.xyz - skyboxPosition, reflectedView, skyboxSize);\nvec3 rc0 = textureCube(envMap, offsetRefl).xyz; \n\n//vec3 staticReflection = textureCube(staticSkybox, reflectedView).xyz;\n//        rc = mix(staticReflection, rc, fresnelFactor);\n//        vec3 specular = textureCube(specularProbe, reflectedView).xyz;\nvec3 rc = rc0 * rc0 ;\n#ifdef NORMAL_MAP\n    rc *= (3.0 - fleck.z * 10.0);\n#else\n    rc *= 3.0;\n#endif\n\nrc *= fFresnel;\n// end V2 reflection.\n\n// Lighting\n\n// move light depending on cam?\n//vec3 lightPos = -mvPosition.xyz;\n//lightPos.y = -lightPos.y;\n\n// radeon lighting\n/*\nvec3 lightDir = normalize(lightPos - vertPos);\n// directional light?\n//vec3 lightDir = normalize(vec3(0.0,1.0,-5.0));\nvec3 reflectDir = reflect(-lightDir, worldNormal);\n// lambertian currently unused. only specular hilights are used.\nfloat lambertian = max(dot(lightDir,normal), 0.0);\nfloat specular = 0.0;\nif(lambertian > 0.0) {\n  float specAngle = max(dot(reflectDir, -cameraToVertex), 0.0);\n  specular = pow(specAngle, 512.0);\n}\n*/\n\nvec3 diffuseLight = vec3(0.0);\nvec3 specular = vec3(0.0);\n\nvec3 worldDir = normalize(lightPos - worldPosition.xyz);\nfloat lambert = max(dot(worldDir, fleckedNormal), 0.0);\nvec3 irradiance = vec3(1.0,0.8,0.6) * lambert;\ndiffuseLight += irradiance;\nspecular += getSpecular(irradiance, worldDir, viewDir, fleckedNormal, roughnessSqr, fFresnel)*0.05;\n\nworldDir = normalize(lightPos2 - worldPosition.xyz);\nlambert = max(dot(worldDir, fleckedNormal), 0.0);\nirradiance = vec3(1.0,0.8,0.6) * lambert;\ndiffuseLight += irradiance;\nspecular += getSpecular(irradiance, worldDir, viewDir, fleckedNormal, roughnessSqr, fFresnel)*0.05;\n\nworldDir = normalize(lightPos3 - worldPosition.xyz);\nlambert = max(dot(worldDir, fleckedNormal), 0.0);\nirradiance = vec3(1.0,0.8,0.6) * lambert;\ndiffuseLight += irradiance;\nspecular += getSpecular(irradiance, worldDir, viewDir, fleckedNormal, roughnessSqr, fFresnel)*0.05;\n\nworldDir = normalize(lightPos4 - worldPosition.xyz);\nlambert = max(dot(worldDir, fleckedNormal), 0.0);\nirradiance = vec3(1.0,0.8,0.6) * lambert;\ndiffuseLight += irradiance;\nspecular += getSpecular(irradiance, worldDir, viewDir, fleckedNormal, roughnessSqr, fFresnel)*0.05;  \n\n// radeon paint.\n/*\nvec3 vFlakesNormal = perturbSparkleNormal2Arb(mvPosition.xyz, worldNormal);\nvec3 vNp1 = microflakePerturbationA * vFlakesNormal + normalPerturbation * worldNormal;\nvec3 vNp2 = microflakePerturbation * ( vFlakesNormal + worldNormal ) ;\n\nfloat fFresnel1 = clamp(dot( -cameraToVertex, vNp1 ), 0.0, 1.0);\nfloat fFresnel2 = clamp(dot( -cameraToVertex, vNp2 ), 0.0, 1.0);\n\nfloat fFresnel1Sq = fFresnel1 * fFresnel1;\nvec3 paintColor = 0.3 * fFresnel1 * paintColor1 +\n                   0.35 * fFresnel1Sq * paintColor2 +\n                   0.35 * fFresnel1Sq * fFresnel1Sq * paintColor3 +\n                   pow( fFresnel2, 16.0 ) * flakeColor;\n                   */\n// end radeon paint.\n\n// V2 paint\nfloat ratio = angle * angle * angle;\nvec3 paintColor = paintColor1; //mix(paintColor1, paintColor2, ratio);\npaintColor = mix(paintColor1, paintColor2, ratio);\n// end V2 paint\n\n\n// debug fresnel components.\n//vec3 paintColor = pow( fFresnel2, 16.0 ) * flakeColor;\n//vec3 paintColor = fFresnel1Sq * fFresnel1Sq * paintColor3;\n//vec3 paintColor = fFresnel1Sq * paintColor2;\n//vec3 paintColor = fFresnel1 * paintColor1;\n\n// radeon compositing.\n/*\ncolor += paintColor * (0.1 + (0.9 * fFresnel)); \n// apply reflection\ncolor += rc * (1.0 - 0.9 * fFresnel);\n*/\n\n// apply texture\nvec4 colorSample = texture2D(map, texCoords);\ndiffuseLight *= colorSample.xyz;\n\nrc *= colorSample.xyz;\n// clamp the reflections based on AO map.\nif (colorSample.x < 0.5) {\n  //rc = vec3(0.0);\n}\n\n// V2 compositing.\n\n//color = paintColor;\ncolor += paintColor * colorSample.xyz   + specular;\n//color+= paintColor * diffuseLight  ;\ncolor +=  rc*0.85;\n\n\n\n// filmic tone mapping.\nif (filmic) {\n  vec3 film = max(vec3(0.0), color - 0.005);\n  color = (film*(7.2*film+.7))/(film*(6.2*film+1.7)+0.06);\n}\n\nif(gl_FrontFacing)\n  gl_FragColor = vec4(color, 1.0);\nelse\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n }\n",e.t1="\n\n  uniform float flakeScale;\n  uniform float time;\n\n  varying vec4 mvPosition;\n  varying vec3 worldNormal;\n  varying vec3 cameraToVertex;\n  varying vec2 vUv;\n  varying vec2 flakeUv;\n  varying vec2 shadowCoords;\n  varying vec2 texCoords;\n\n  varying vec4 forFragColor;\n  varying vec3 vertPos;\n  varying vec4 worldPosition;\n\n  void main() {\n    mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    worldPosition = modelMatrix * vec4( position, 1.0 );\n    vertPos = vec3(mvPosition) / mvPosition.w;\n\n    worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * normal;\n    cameraToVertex = normalize(worldPosition.xyz - cameraPosition);\n    vUv = uv;\n    flakeUv = uv * flakeScale;\n    shadowCoords = uv;\n    texCoords = uv;\n\n    gl_Position = projectionMatrix * mvPosition;\n    //if (time > 0.0) gl_Position += vec4(0.0, 3.0*sin(time * 2.0 + worldPosition.x / 20.0) + 3.0*sin(time * 2.0 + worldPosition.z / 20.0), 0.0, 0.0);\n  }\n",e.next=4,u(t);case 4:return e.t2=e.sent,e.t3={derivatives:!0},e.abrupt("return",{fragmentShader:e.t0,vertexShader:e.t1,uniforms:e.t2,extensions:e.t3});case 7:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)});t.a=d},"9ZL/":function(e,t,r){"use strict";window.FONTRE_PATH="static/fontre";var n={lafesta:{assets:window.FONTRE_PATH+"/project/lafesta/assets",backgroundColor:16777215,exteriorViewpoint:{position:{x:-538,y:65,z:280},mobilePosition:{x:-618,y:23,z:-21},lookAt:{x:0,y:0,z:0},minDistance:300,maxDistance:800},interiorViewpoint:{position:{x:-35,y:50,z:36},lon:-93,lat:-11},interiorColors:[{colorCode:"scene_frontRow",desc:"scene_frontRow",data:"scene_frontRow"},{colorCode:"scene_BackRow",desc:"scene_BackRow",data:"scene_BackRow"}],pano:{xml_file:window.FONTRE_PATH+"/project/lafesta/pano/tour.xml",jsFile:window.FONTRE_PATH+"/project/lafesta/pano/tour.js",exteriorHotspot:{red:["hotspot_red_l","hotspot_red_r"],red_cartop:["hotspot_red_l","hotspot_red_r"],white:["hotspot_white_l","hotspot_white_r"],white_cartop:["hotspot_white_l","hotspot_white_r"],brown:["hotspot_brown_l","hotspot_brown_r"],brown_cartop:["hotspot_brown_l","hotspot_brown_r"],gray:["hotspot_gray_l","hotspot_gray_r"],gray_cartop:["hotspot_gray_l","hotspot_gray_r"],blue:["hotspot_blue_l","hotspot_blue_r"],blue_cartop:["hotspot_blue_l","hotspot_blue_r"],gold:["hotspot_gold_l","hotspot_gold_r"],gold_cartop:["hotspot_gold_l","hotspot_gold_r"]},interiorScreen:{scene_frontRow:"scene_frontRow",scene_BackRow:"scene_BackRow"}},modelSwitching:[{code:"fender",type:"options",desc:"挡泥板(选装)"},{code:"applique1",type:"options",desc:"贴花A(选装)"},{code:"applique2",type:"options",desc:"贴花B(选装)"},{code:"applique3",type:"options",desc:"贴花C(选装)"},{code:"no_fender",type:"options",desc:"无挡泥板(选装)"},{code:"no_applique1",type:"options",desc:"无贴花A(选装)"},{code:"no_applique2",type:"options",desc:"无贴花B(选装)"},{code:"no_applique3",type:"options",desc:"无贴花C(选装)"},{code:"hub1",type:"options"},{code:"hub2",type:"options"}]}};t.a=n},CHqU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("ZLEe"),a=r.n(n),o=r("hRKE"),i=r.n(o),s=r("cUn4"),c=r.n(s),l=r("uUaz"),u=r("ivfv").Zlib;l.FBXLoader=function(){function e(e){this.manager=void 0!==e?e:l.DefaultLoadingManager}function t(e){this.textureLoader=e}function r(){}function n(){}function o(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function s(){}function p(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function d(e){return e/46186158e3}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,r,n){var a=this,o=l.LoaderUtils.extractUrlBase(e),i=new l.FileLoader(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(r){try{var i=a.parse(r,o);t(i)}catch(t){console.log(t),setTimeout(function(){n&&n(t),a.manager.itemError(e)},0)}},r,n)},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,a){var o,i,s;if(s="Kaydara FBX Binary  \0",(i=e).byteLength>=s.length&&s===E(i,0,s.length))o=(new n).parse(e);else{var c=E(e);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;function n(t){var n=e[t-1];return e=e.slice(r+t),r++,n}for(var a=0;a<t.length;++a){var o=n(1);if(o===t[a])return!1}return!0}(c))throw new Error("THREE.FBXLoader: Unknown format.");if(p(c)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+p(c));o=(new r).parse(c)}return new t(new l.TextureLoader(this.manager).setPath(a).setCrossOrigin(this.crossOrigin)).parse(o)}},t.prototype={constructor:t,parse:function(e){this.FBXTree=e,this.connections=this.parseConnections();var t=this.parseImages(),r=this.parseTextures(t),n=this.parseMaterials(r),a=this.parseDeformers(),o=this.parseGeometries(a);return this.parseScene(a,o,n)},parseConnections:function(){var e=new c.a;"Connections"in this.FBXTree&&this.FBXTree.Connections.connections.forEach(function(t){var r=t[0],n=t[1],a=t[2];e.has(r)||e.set(r,{parents:[],children:[]});var o={ID:n,relationship:a};e.get(r).parents.push(o),e.has(n)||e.set(n,{parents:[],children:[]});var i={ID:r,relationship:a};e.get(n).children.push(i)});return e},parseImages:function(){var e={},t={};if("Video"in this.FBXTree.Objects){var r=this.FBXTree.Objects.Video;for(var n in r){var a=r[n];if(e[c=parseInt(n)]=a.RelativeFilename||a.Filename,"Content"in a){var o=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,i="string"==typeof a.Content&&""!==a.Content;if(o||i){var s=this.parseImage(r[n]);t[a.RelativeFilename||a.Filename]=s}}}}for(var c in e){var l=e[c];void 0!==t[l]?e[c]=t[l]:e[c]=e[c].split("\\").pop()}return e},parseImage:function(e){var t,r=e.Content,n=e.RelativeFilename||e.Filename,a=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(a){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":if("function"!=typeof l.TGALoader)return void console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");null===l.Loader.Handlers.get(".tga")&&l.Loader.Handlers.add(/\.tga$/i,new l.TGALoader),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+a+'" is not supported.')}if("string"==typeof r)return"data:"+t+";base64,"+r;var o=new Uint8Array(r);return window.URL.createObjectURL(new Blob([o],{type:t}))},parseTextures:function(e){var t=new c.a;if("Texture"in this.FBXTree.Objects){var r=this.FBXTree.Objects.Texture;for(var n in r){var a=this.parseTexture(r[n],e);t.set(parseInt(n),a)}}return t},parseTexture:function(e,t){var r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;var n=e.WrapModeU,a=e.WrapModeV,o=void 0!==n?n.value:0,i=void 0!==a?a.value:0;if(r.wrapS=0===o?l.RepeatWrapping:l.ClampToEdgeWrapping,r.wrapT=0===i?l.RepeatWrapping:l.ClampToEdgeWrapping,"Scaling"in e){var s=e.Scaling.value;r.repeat.x=s[0],r.repeat.y=s[1]}return r},loadTexture:function(e,t){var r,n,a=this.textureLoader.path,o=this.connections.get(e.id).children;return void 0!==o&&o.length>0&&void 0!==t[o[0].ID]&&(0!==(r=t[o[0].ID]).indexOf("blob:")&&0!==r.indexOf("data:")||this.textureLoader.setPath(void 0)),n="tga"===e.FileName.slice(-3).toLowerCase()?l.Loader.Handlers.get(".tga").load(r):this.textureLoader.load(r),this.textureLoader.setPath(a),n},parseMaterials:function(e){var t=new c.a;if("Material"in this.FBXTree.Objects){var r=this.FBXTree.Objects.Material;for(var n in r){var a=this.parseMaterial(r[n],e);null!==a&&t.set(parseInt(n),a)}}return t},parseMaterial:function(e,t){var r=e.id,n=e.attrName,a=e.ShadingModel;if("object"===(void 0===a?"undefined":i()(a))&&(a=a.value),!this.connections.has(r))return null;var o,s=this.parseParameters(e,t,r);switch(a.toLowerCase()){case"phong":o=new l.MeshPhongMaterial;break;case"lambert":o=new l.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),o=new l.MeshPhongMaterial({color:3342591})}return o.setValues(s),o.name=n,o},parseParameters:function(e,t,r){var n={};e.BumpFactor&&(n.bumpScale=e.BumpFactor.value),e.Diffuse?n.color=(new l.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(n.color=(new l.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(n.displacementScale=e.DisplacementFactor.value),e.Emissive?n.emissive=(new l.Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(n.emissive=(new l.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(n.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(n.opacity=parseFloat(e.Opacity.value)),n.opacity<1&&(n.transparent=!0),e.ReflectionFactor&&(n.reflectivity=e.ReflectionFactor.value),e.Shininess&&(n.shininess=e.Shininess.value),e.Specular?n.specular=(new l.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(n.specular=(new l.Color).fromArray(e.SpecularColor.value));var a=this;return this.connections.get(r).children.forEach(function(e){var r=e.relationship;switch(r){case"Bump":n.bumpMap=t.get(e.ID);break;case"DiffuseColor":n.map=a.getTexture(t,e.ID);break;case"DisplacementColor":n.displacementMap=a.getTexture(t,e.ID);break;case"EmissiveColor":n.emissiveMap=a.getTexture(t,e.ID);break;case"NormalMap":n.normalMap=a.getTexture(t,e.ID);break;case"ReflectionColor":n.envMap=a.getTexture(t,e.ID),n.envMap.mapping=l.EquirectangularReflectionMapping;break;case"SpecularColor":n.specularMap=a.getTexture(t,e.ID);break;case"TransparentColor":n.alphaMap=a.getTexture(t,e.ID),n.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}}),n},getTexture:function(e,t){return"LayeredTexture"in this.FBXTree.Objects&&t in this.FBXTree.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=this.connections.get(t).children[0].ID),e.get(t)},parseDeformers:function(){var e={},t={};if("Deformer"in this.FBXTree.Objects){var r=this.FBXTree.Objects.Deformer;for(var n in r){var a=r[n],o=this.connections.get(parseInt(n));if("Skin"===a.attrType){var i=this.parseSkeleton(o,r);i.ID=n,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),i.geometryID=o.parents[0].ID,e[n]=i}else if("BlendShape"===a.attrType){var s={id:n};s.rawTargets=this.parseMorphTargets(o,r),s.id=n,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[n]=s}}}return{skeletons:e,morphTargets:t}},parseSkeleton:function(e,t){var r=[];return e.children.forEach(function(e){var n=t[e.ID];if("Cluster"===n.attrType){var a={ID:e.ID,indices:[],weights:[],transform:(new l.Matrix4).fromArray(n.Transform.a),transformLink:(new l.Matrix4).fromArray(n.TransformLink.a),linkMode:n.Mode};"Indexes"in n&&(a.indices=n.Indexes.a,a.weights=n.Weights.a),r.push(a)}}),{rawBones:r,bones:[]}},parseMorphTargets:function(e,t){for(var r=[],n=0;n<e.children.length;n++){if(8===n){console.warn("FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.");break}var a=e.children[n],o=t[a.ID],i={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;this.connections.get(parseInt(a.ID)).children.forEach(function(e){void 0===e.relationship&&(i.geoID=e.ID)}),r.push(i)}return r},parseGeometries:function(e){var t=new c.a;if("Geometry"in this.FBXTree.Objects){var r=this.FBXTree.Objects.Geometry;for(var n in r){var a=this.connections.get(parseInt(n)),o=this.parseGeometry(a,r[n],e);t.set(parseInt(n),o)}}return t},parseGeometry:function(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(e,t,r){var n=r.skeletons,a=r.morphTargets,o=this,i=e.parents.map(function(e){return o.FBXTree.Objects.Model[e.ID]});if(0!==i.length){var s=e.children.reduce(function(e,t){return void 0!==n[t.ID]&&(e=n[t.ID]),e},null),c=e.children.reduce(function(e,t){return void 0!==a[t.ID]&&(e=a[t.ID]),e},null),l=i[0],u={};"RotationOrder"in l&&(u.eulerOrder=l.RotationOrder.value),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);var p=w(u);return this.genGeometry(t,s,c,p)}},genGeometry:function(e,t,r,n){var a=new l.BufferGeometry;e.attrName&&(a.name=e.attrName);var o=this.parseGeoNode(e,t),i=this.genBuffers(o),s=new l.Float32BufferAttribute(i.vertex,3);if(n.applyToBufferAttribute(s),a.addAttribute("position",s),i.colors.length>0&&a.addAttribute("color",new l.Float32BufferAttribute(i.colors,3)),t&&(a.addAttribute("skinIndex",new l.Uint16BufferAttribute(i.weightsIndices,4)),a.addAttribute("skinWeight",new l.Float32BufferAttribute(i.vertexWeights,4)),a.FBX_Deformer=t),i.normal.length>0){var c=new l.Float32BufferAttribute(i.normal,3);(new l.Matrix3).getNormalMatrix(n).applyToBufferAttribute(c),a.addAttribute("normal",c)}if(i.uvs.forEach(function(e,t){var r="uv"+(t+1).toString();0===t&&(r="uv"),a.addAttribute(r,new l.Float32BufferAttribute(i.uvs[t],2))}),o.material&&"AllSame"!==o.material.mappingType){var u=i.materialIndex[0],p=0;if(i.materialIndex.forEach(function(e,t){e!==u&&(a.addGroup(p,t-p,u),u=e,p=t)}),a.groups.length>0){var d=a.groups[a.groups.length-1],h=d.start+d.count;h!==i.materialIndex.length&&a.addGroup(h,i.materialIndex.length-h,u)}0===a.groups.length&&a.addGroup(0,i.materialIndex.length,i.materialIndex[0])}return this.addMorphTargets(a,e,r,n),a},parseGeoNode:function(e,t){var r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];for(var n=0;e.LayerElementUV[n];)r.uv.push(this.parseUVs(e.LayerElementUV[n])),n++}return r.weightTable={},null!==t&&(r.skeleton=t,t.rawBones.forEach(function(e,t){e.indices.forEach(function(n,a){void 0===r.weightTable[n]&&(r.weightTable[n]=[]),r.weightTable[n].push({id:t,weight:e.weights[a]})})})),r},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,n=0,a=!1,o=[],i=[],s=[],c=[],l=[],u=[],p=this;return e.vertexIndices.forEach(function(d,h){var m=!1;d<0&&(d^=-1,m=!0);var v=[],g=[];if(o.push(3*d,3*d+1,3*d+2),e.color){var b=f(h,r,d,e.color);s.push(b[0],b[1],b[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach(function(e){g.push(e.weight),v.push(e.id)}),g.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);var y=[0,0,0,0],w=[0,0,0,0];g.forEach(function(e,t){var r=e,n=v[t];w.forEach(function(e,t,a){if(r>e){a[t]=r,r=e;var o=y[t];y[t]=n,n=o}})}),v=y,g=w}for(;g.length<4;)g.push(0),v.push(0);for(var x=0;x<4;++x)l.push(g[x]),u.push(v[x])}if(e.normal){b=f(h,r,d,e.normal);i.push(b[0],b[1],b[2])}if(e.material&&"AllSame"!==e.material.mappingType)var S=f(h,r,d,e.material)[0];e.uv&&e.uv.forEach(function(e,t){var n=f(h,r,d,e);void 0===c[t]&&(c[t]=[]),c[t].push(n[0]),c[t].push(n[1])}),n++,m&&(p.genFace(t,e,o,S,i,s,c,l,u,n),r++,n=0,o=[],i=[],s=[],c=[],l=[],u=[])}),t},genFace:function(e,t,r,n,a,o,i,s,c,l){for(var u=2;u<l;u++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[3*(u-1)]]),e.vertex.push(t.vertexPositions[r[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[r[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[r[3*u]]),e.vertex.push(t.vertexPositions[r[3*u+1]]),e.vertex.push(t.vertexPositions[r[3*u+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(u-1)]),e.vertexWeights.push(s[4*(u-1)+1]),e.vertexWeights.push(s[4*(u-1)+2]),e.vertexWeights.push(s[4*(u-1)+3]),e.vertexWeights.push(s[4*u]),e.vertexWeights.push(s[4*u+1]),e.vertexWeights.push(s[4*u+2]),e.vertexWeights.push(s[4*u+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[4*(u-1)]),e.weightsIndices.push(c[4*(u-1)+1]),e.weightsIndices.push(c[4*(u-1)+2]),e.weightsIndices.push(c[4*(u-1)+3]),e.weightsIndices.push(c[4*u]),e.weightsIndices.push(c[4*u+1]),e.weightsIndices.push(c[4*u+2]),e.weightsIndices.push(c[4*u+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(u-1)]),e.colors.push(o[3*(u-1)+1]),e.colors.push(o[3*(u-1)+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(a[0]),e.normal.push(a[1]),e.normal.push(a[2]),e.normal.push(a[3*(u-1)]),e.normal.push(a[3*(u-1)+1]),e.normal.push(a[3*(u-1)+2]),e.normal.push(a[3*u]),e.normal.push(a[3*u+1]),e.normal.push(a[3*u+2])),t.uv&&t.uv.forEach(function(t,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(i[r][0]),e.uvs[r].push(i[r][1]),e.uvs[r].push(i[r][2*(u-1)]),e.uvs[r].push(i[r][2*(u-1)+1]),e.uvs[r].push(i[r][2*u]),e.uvs[r].push(i[r][2*u+1])})},addMorphTargets:function(e,t,r,n){if(null!==r){e.morphAttributes.position=[],e.morphAttributes.normal=[];var a=this;r.rawTargets.forEach(function(r){var o=a.FBXTree.Objects.Geometry[r.geoID];void 0!==o&&a.genMorphGeometry(e,t,o,n)})}},genMorphGeometry:function(e,t,r,n){var a=new l.BufferGeometry;r.attrName&&(a.name=r.attrName);for(var o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],i=void 0!==t.Vertices?t.Vertices.a.slice():[],s=void 0!==r.Vertices?r.Vertices.a:[],c=void 0!==r.Indexes?r.Indexes.a:[],u=0;u<c.length;u++){var p=3*c[u];i[p]+=s[3*u],i[p+1]+=s[3*u+1],i[p+2]+=s[3*u+2]}var d={vertexIndices:o,vertexPositions:i},h=this.genBuffers(d),f=new l.Float32BufferAttribute(h.vertex,3);f.name=r.attrName,n.applyToBufferAttribute(f),e.morphAttributes.position.push(f)},parseNormals:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Normals.a,a=[];return"IndexToDirect"===r&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:a,mappingType:t,referenceType:r}},parseUVs:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.UV.a,a=[];return"IndexToDirect"===r&&(a=e.UVIndex.a),{dataSize:2,buffer:n,indices:a,mappingType:t,referenceType:r}},parseVertexColors:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Colors.a,a=[];return"IndexToDirect"===r&&(a=e.ColorIndex.a),{dataSize:4,buffer:n,indices:a,mappingType:t,referenceType:r}},parseMaterialIndices:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};for(var n=e.Materials.a,a=[],o=0;o<n.length;++o)a.push(o);return{dataSize:1,buffer:n,indices:a,mappingType:t,referenceType:r}},parseNurbsGeometry:function(e){if(void 0===l.NURBSCurve)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new l.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new l.BufferGeometry;for(var r,n,a=t-1,o=e.KnotVector.a,i=[],s=e.Points.a,c=0,u=s.length;c<u;c+=4)i.push((new l.Vector4).fromArray(s,c));if("Closed"===e.Form)i.push(i[0]);else if("Periodic"===e.Form){r=a,n=o.length-1-r;for(c=0;c<a;++c)i.push(i[c])}var p=new l.NURBSCurve(a,o,i,r,n).getPoints(7*i.length),d=new Float32Array(3*p.length);p.forEach(function(e,t){e.toArray(d,3*t)});var h=new l.BufferGeometry;return h.addAttribute("position",new l.BufferAttribute(d,3)),h},parseScene:function(e,t,r){var n=new l.Group,a=this.parseModels(e.skeletons,t,r),o=this.FBXTree.Objects.Model,i=this;return a.forEach(function(e){var t=o[e.ID];i.setLookAtProperties(e,t,n),i.connections.get(e.ID).parents.forEach(function(t){var r=a.get(t.ID);void 0!==r&&r.add(e)}),null===e.parent&&n.add(e)}),this.bindSkeleton(e.skeletons,t,a),this.addAnimations(n),this.createAmbientLight(n),this.setupMorphMaterials(n),1===n.children.length&&n.children[0].isGroup?(n.children[0].animations=n.animations,n.children[0]):n},parseModels:function(e,t,r){var n=new c.a,a=this.FBXTree.Objects.Model;for(var o in a){var i=parseInt(o),s=a[o],u=this.connections.get(i),p=this.buildSkeleton(u,e,i,s.attrName);if(!p){switch(s.attrType){case"Camera":p=this.createCamera(u);break;case"Light":p=this.createLight(u);break;case"Mesh":p=this.createMesh(u,t,r);break;case"NurbsCurve":p=this.createCurve(u,t);break;case"LimbNode":case"Null":default:p=new l.Group}p.name=l.PropertyBinding.sanitizeNodeName(s.attrName),p.ID=i}this.setModelTransforms(p,s),n.set(i,p)}return n},buildSkeleton:function(e,t,r,n){var a=null;return e.parents.forEach(function(e){for(var o in t){var i=t[o];i.rawBones.forEach(function(t,o){if(t.ID===e.ID){var s=a;(a=new l.Bone).matrixWorld.copy(t.transformLink),a.name=l.PropertyBinding.sanitizeNodeName(n),a.ID=r,i.bones[o]=a,null!==s&&a.add(s)}})}}),a},createCamera:function(e){var t,r,n=this;if(e.children.forEach(function(e){var t=n.FBXTree.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)}),void 0===r)t=new l.Object3D;else{var a=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(a=1);var o=1;void 0!==r.NearPlane&&(o=r.NearPlane.value/1e3);var i=1e3;void 0!==r.FarPlane&&(i=r.FarPlane.value/1e3);var s=window.innerWidth,c=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(s=r.AspectWidth.value,c=r.AspectHeight.value);var u=s/c,p=45;void 0!==r.FieldOfView&&(p=r.FieldOfView.value);var d=r.FocalLength?r.FocalLength.value:null;switch(a){case 0:t=new l.PerspectiveCamera(p,u,o,i),null!==d&&t.setFocalLength(d);break;case 1:t=new l.OrthographicCamera(-s/2,s/2,c/2,-c/2,o,i);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+a+"."),t=new l.Object3D}}return t},createLight:function(e){var t,r,n=this;if(e.children.forEach(function(e){var t=n.FBXTree.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)}),void 0===r)t=new l.Object3D;else{var a;a=void 0===r.LightType?0:r.LightType.value;var o=16777215;void 0!==r.Color&&(o=(new l.Color).fromArray(r.Color.value));var i=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(i=0);var s=0;void 0!==r.FarAttenuationEnd&&(s=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value);switch(a){case 0:t=new l.PointLight(o,i,s,1);break;case 1:t=new l.DirectionalLight(o,i);break;case 2:var c=Math.PI/3;void 0!==r.InnerAngle&&(c=l.Math.degToRad(r.InnerAngle.value));var u=0;void 0!==r.OuterAngle&&(u=l.Math.degToRad(r.OuterAngle.value),u=Math.max(u,1)),t=new l.SpotLight(o,i,s,c,u,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a THREE.PointLight."),t=new l.PointLight(o,i)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(t.castShadow=!0)}return t},createMesh:function(e,t,r){var n,a=null,o=null,i=[];return e.children.forEach(function(e){t.has(e.ID)&&(a=t.get(e.ID)),r.has(e.ID)&&i.push(r.get(e.ID))}),i.length>1?o=i:i.length>0?o=i[0]:(o=new l.MeshPhongMaterial({color:13421772}),i.push(o)),"color"in a.attributes&&i.forEach(function(e){e.vertexColors=l.VertexColors}),a.FBX_Deformer?(i.forEach(function(e){e.skinning=!0}),n=new l.SkinnedMesh(a,o)):n=new l.Mesh(a,o),n},createCurve:function(e,t){var r=e.children.reduce(function(e,r){return t.has(r.ID)&&(e=t.get(r.ID)),e},null),n=new l.LineBasicMaterial({color:3342591,linewidth:1});return new l.Line(r,n)},setModelTransforms:function(e,t){var r={};"RotationOrder"in t&&(r.eulerOrder=parseInt(t.RotationOrder.value)),"Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value);var n=w(r);e.applyMatrix(n)},setLookAtProperties:function(e,t,r){if("LookAtProperty"in t){var n=this;this.connections.get(e.ID).children.forEach(function(t){if("LookAtProperty"===t.relationship){var a=n.FBXTree.Objects.Model[t.ID];if("Lcl_Translation"in a){var o=a.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(o),r.add(e.target)):e.lookAt((new l.Vector3).fromArray(o))}}})}},bindSkeleton:function(e,t,r){var n=this.parsePoseNodes();for(var a in e){var o=e[a],i=this;this.connections.get(parseInt(o.ID)).parents.forEach(function(e){if(t.has(e.ID)){var a=e.ID;i.connections.get(a).parents.forEach(function(e){r.has(e.ID)&&r.get(e.ID).bind(new l.Skeleton(o.bones),n[e.ID])})}})}},parsePoseNodes:function(){var e={};if("Pose"in this.FBXTree.Objects){var t=this.FBXTree.Objects.Pose;for(var r in t)if("BindPose"===t[r].attrType){var n=t[r].PoseNode;Array.isArray(n)?n.forEach(function(t){e[t.Node]=(new l.Matrix4).fromArray(t.Matrix.a)}):e[n.Node]=(new l.Matrix4).fromArray(n.Matrix.a)}}return e},addAnimations:function(e){e.animations=[];var t=this.parseAnimations();if(void 0!==t)for(var r in t){var n=t[r],a=this.addClip(n,e);e.animations.push(a)}},parseAnimations:function(){if(void 0!==this.FBXTree.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}},parseAnimationCurveNodes:function(){var e=this.FBXTree.Objects.AnimationCurveNode,t=new c.a;for(var r in e){var n=e[r];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){var a={id:n.id,attr:n.attrName,curves:{}};t.set(a.id,a)}}return t},parseAnimationCurves:function(e){var t=this.FBXTree.Objects.AnimationCurve;for(var r in t){var n={id:t[r].id,times:t[r].KeyTime.a.map(d),values:t[r].KeyValueFloat.a},a=this.connections.get(n.id);if(void 0!==a){var o=a.parents[0].ID,i=a.parents[0].relationship;i.match(/X/)?e.get(o).curves.x=n:i.match(/Y/)?e.get(o).curves.y=n:i.match(/Z/)?e.get(o).curves.z=n:i.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=n)}}},parseAnimationLayers:function(e){var t=this.FBXTree.Objects.AnimationLayer,r=new c.a;for(var n in t){var a=[],o=this.connections.get(parseInt(n));if(void 0!==o){var i=this;o.children.forEach(function(t,r){if(e.has(t.ID)){var n=e.get(t.ID);if(void 0!==n.curves.x||void 0!==n.curves.y||void 0!==n.curves.z){if(void 0===a[r]){i.connections.get(t.ID).parents.forEach(function(e){void 0!==e.relationship&&(d=e.ID)});var o=i.FBXTree.Objects.Model[d.toString()],s={modelName:l.PropertyBinding.sanitizeNodeName(o.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1],transform:i.getModelAnimTransform(o)};"PreRotation"in o&&(s.preRotations=o.PreRotation.value),"PostRotation"in o&&(s.postRotations=o.PostRotation.value),a[r]=s}a[r][n.attr]=n}else if(void 0!==n.curves.morph){if(void 0===a[r]){var c;i.connections.get(t.ID).parents.forEach(function(e){void 0!==e.relationship&&(c=e.ID)});var u=i.connections.get(c).parents[0].ID,p=i.connections.get(u).parents[0].ID,d=i.connections.get(p).parents[0].ID;o=i.FBXTree.Objects.Model[d],s={modelName:l.PropertyBinding.sanitizeNodeName(o.attrName),morphName:i.FBXTree.Objects.Deformer[c].attrName};a[r]=s}a[r][n.attr]=n}}}),r.set(parseInt(n),a)}}return r},getModelAnimTransform:function(e){var t={};return"RotationOrder"in e&&(t.eulerOrder=parseInt(e.RotationOrder.value)),"Lcl_Translation"in e&&(t.translation=e.Lcl_Translation.value),"RotationOffset"in e&&(t.rotationOffset=e.RotationOffset.value),"Lcl_Rotation"in e&&(t.rotation=e.Lcl_Rotation.value),"PreRotation"in e&&(t.preRotation=e.PreRotation.value),"PostRotation"in e&&(t.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(t.scale=e.Lcl_Scaling.value),w(t)},parseAnimStacks:function(e){var t=this.FBXTree.Objects.AnimationStack,r={};for(var n in t){var a=this.connections.get(parseInt(n)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var o=e.get(a[0].ID);r[n]={name:t[n].attrName,layer:o}}return r},addClip:function(e,t){var r=[],n=this;return e.layer.forEach(function(e){r=r.concat(n.generateTracks(e,t))}),new l.AnimationClip(e.name,-1,r)},generateTracks:function(e,t){var r=[],n=new l.Vector3,o=new l.Quaternion,i=new l.Vector3;if(e.transform&&e.transform.decompose(n,o,i),n=n.toArray(),o=(new l.Euler).setFromQuaternion(o).toArray(),i=i.toArray(),void 0!==e.T&&a()(e.T.curves).length>0){var s=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==s&&r.push(s)}if(void 0!==e.R&&a()(e.R.curves).length>0){var c=this.generateRotationTrack(e.modelName,e.R.curves,o,e.preRotations,e.postRotations);void 0!==c&&r.push(c)}if(void 0!==e.S&&a()(e.S.curves).length>0){var u=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==u&&r.push(u)}if(void 0!==e.DeformPercent){var p=this.generateMorphTrack(e,t);void 0!==p&&r.push(p)}return r},generateVectorTrack:function(e,t,r,n){var a=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(a,t,r);return new l.VectorKeyframeTrack(e+"."+n,a,o)},generateRotationTrack:function(e,t,r,n,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(l.Math.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(l.Math.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(l.Math.degToRad));var o=this.getTimesForAllAxes(t),i=this.getKeyframeTrackValues(o,t,r);void 0!==n&&((n=n.map(l.Math.degToRad)).push("ZYX"),n=(new l.Euler).fromArray(n),n=(new l.Quaternion).setFromEuler(n)),void 0!==a&&((a=a.map(l.Math.degToRad)).push("ZYX"),a=(new l.Euler).fromArray(a),a=(new l.Quaternion).setFromEuler(a).inverse());for(var s=new l.Quaternion,c=new l.Euler,u=[],p=0;p<i.length;p+=3)c.set(i[p],i[p+1],i[p+2],"ZYX"),s.setFromEuler(c),void 0!==n&&s.premultiply(n),void 0!==a&&s.multiply(a),s.toArray(u,p/3*4);return new l.QuaternionKeyframeTrack(e+".quaternion",o,u)},generateMorphTrack:function(e,t){var r=e.DeformPercent.curves.morph,n=r.values.map(function(e){return e/100}),a=t.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new l.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+a+"]",r.times,n)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort(function(e,t){return e-t}).filter(function(e,t,r){return r.indexOf(e)==t})},getKeyframeTrackValues:function(e,t,r){var n=r,a=[],o=-1,i=-1,s=-1;return e.forEach(function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(i=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var r=t.x.values[o];a.push(r),n[0]=r}else a.push(n[0]);if(-1!==i){var c=t.y.values[i];a.push(c),n[1]=c}else a.push(n[1]);if(-1!==s){var l=t.z.values[s];a.push(l),n[2]=l}else a.push(n[2])}),a},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var r=e.values[t-1],n=e.values[t]-r,a=Math.abs(n);if(a>=180){for(var o=a/180,i=n/o,s=r+i,c=e.times[t-1],l=(e.times[t]-c)/o,u=c+l,p=[],d=[];u<e.times[t];)p.push(u),u+=l,d.push(s),s+=i;e.times=T(e.times,t,p),e.values=T(e.values,t,d)}}},createAmbientLight:function(e){if("GlobalSettings"in this.FBXTree&&"AmbientColor"in this.FBXTree.GlobalSettings){var t=this.FBXTree.GlobalSettings.AmbientColor.value,r=t[0],n=t[1],a=t[2];if(0!==r||0!==n||0!==a){var o=new l.Color(r,n,a);e.add(new l.AmbientLight(o,1))}}},setupMorphMaterials:function(e){e.traverse(function(t){if(t.isMesh&&(t.geometry.morphAttributes.position||t.geometry.morphAttributes.normal)){var r=t.uuid,n=t.material.uuid,a=!1;e.traverse(function(e){e.isMesh&&e.material.uuid===n&&e.uuid!==r&&(a=!0)}),!0===a&&(t.material=t.material.clone()),t.material.morphTargets=!0}})}},r.prototype={constructor:r,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new s,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,r=e.split(/[\r\n]+/);return r.forEach(function(e,n){var a=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!a&&!o){var i=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(t.currentIndent-1)+"}}");i?t.parseNodeBegin(e,i):s?t.parseNodeProperty(e,s,r[++n]):c?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}}),this.allNodes},parseNodeBegin:function(e,t){var r=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:r},o=this.parseNodeAttr(n),i=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,a):r in i?("PoseNode"===r?i.PoseNode.push(a):void 0!==i[r].id&&(i[r]={},i[r][i[r].id]=i[r]),""!==o.id&&(i[r][o.id]=a)):"number"==typeof o.id?(i[r]={},i[r][o.id]=a):"Properties70"!==r&&(i[r]="PoseNode"===r?[a]:a),"number"==typeof o.id&&(a.id=o.id),""!==o.name&&(a.attrName=o.name),""!==o.type&&(a.attrType=o.type),this.pushStack(a)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var r="",n="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:r,type:n}},parseNodeProperty:function(e,t,r){var n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),a=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===a&&(a=r.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===n){var i=a.split(",").slice(1),s=parseInt(i[0]),c=parseInt(i[1]),l=a.split(",").slice(3);n="connections",function(e,t){for(var r=0,n=e.length,a=t.length;r<a;r++,n++)e[n]=t[r]}(a=[s,c],l=l.map(function(e){return e.trim().replace(/^"/,"")})),void 0===o[n]&&(o[n]=[])}"Node"===n&&(o.id=a),n in o&&Array.isArray(o[n])?o[n].push(a):"a"!==n?o[n]=a:o.a=a,this.setCurrentProp(o,n),"a"===n&&","!==a.slice(-1)&&(o.a=S(a))}else this.parseNodeSpecialProperty(e,n,a)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=S(t.a))},parseNodeSpecialProperty:function(e,t,r){var n=r.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=n[0],o=n[1],i=n[2],s=n[3],c=n[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=S(c)}this.getPrevNode()[a]={type:o,type2:i,flag:s,value:c},this.setCurrentProp(this.getPrevNode(),a)}},n.prototype={constructor:n,parse:function(e){var t=new o(e);t.skip(23);var r=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+r);for(var n=new s;!this.endOfContent(t);){var a=this.parseNode(t,r);null!==a&&n.add(a.name,a)}return n},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var r={},n=t>=7500?e.getUint64():e.getUint32(),a=t>=7500?e.getUint64():e.getUint32(),o=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),i=e.getString(o);if(0===n)return null;for(var s=[],c=0;c<a;c++)s.push(this.parseProperty(e));var l=s.length>0?s[0]:"",u=s.length>1?s[1]:"",p=s.length>2?s[2]:"";for(r.singleProperty=1===a&&e.getOffset()===n;n>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(i,r,d)}return r.propertyList=s,"number"==typeof l&&(r.id=l),""!==u&&(r.attrName=u),""!==p&&(r.attrType=p),""!==i&&(r.name=i),r},parseSubNode:function(e,t,r){if(!0===r.singleProperty){var n=r.propertyList[0];Array.isArray(n)?(t[r.name]=r,r.a=n):t[r.name]=n}else if("Connections"===e&&"C"===r.name){var o=[];r.propertyList.forEach(function(e,t){0!==t&&o.push(e)}),void 0===t.connections&&(t.connections=[]),t.connections.push(o)}else if("Properties70"===r.name){a()(r).forEach(function(e){t[e]=r[e]})}else if("Properties70"===e&&"P"===r.name){var i,s=r.propertyList[0],c=r.propertyList[1],l=r.propertyList[2],u=r.propertyList[3];0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),0===c.indexOf("Lcl ")&&(c=c.replace("Lcl ","Lcl_")),i="Color"===c||"ColorRGB"===c||"Vector"===c||"Vector3D"===c||0===c.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],t[s]={type:c,type2:l,flag:u,value:i}}else void 0===t[r.name]?"number"==typeof r.id?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:"PoseNode"===r.name?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):void 0===t[r.name][r.id]&&(t[r.name][r.id]=r)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var r=e.getUint32();return e.getArrayBuffer(r);case"S":r=e.getUint32();return e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n=e.getUint32(),a=e.getUint32(),i=e.getUint32();if(0===a)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}void 0===u&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var s=new o(new u.Inflate(new Uint8Array(e.getArrayBuffer(i))).decompress().buffer);switch(t){case"b":case"c":return s.getBooleanArray(n);case"d":return s.getFloat64Array(n);case"f":return s.getFloat32Array(n);case"i":return s.getInt32Array(n);case"l":return s.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},o.prototype={constructor:o,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],r=0;r<e;r++)t[r]=this.getUint8();var n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),l.LoaderUtils.decodeText(new Uint8Array(t))}},s.prototype={constructor:s,add:function(e,t){this[e]=t}};var h=[];function f(e,t,r,n){var a;switch(n.mappingType){case"ByPolygonVertex":a=e;break;case"ByPolygon":a=t;break;case"ByVertice":a=r;break;case"AllSame":a=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(a=n.indices[a]);var o=a*n.dataSize,i=o+n.dataSize;return function(e,t,r,n){for(var a=r,o=0;a<n;a++,o++)e[o]=t[a];return e}(h,n.buffer,o,i)}var m=new l.Matrix4,v=new l.Euler,g=new l.Vector3,b=new l.Vector3,y=new l.Matrix4;function w(e){var t=new l.Matrix4;b.set(0,0,0),y.identity();var r,n=e.eulerOrder?x(e.eulerOrder):x(0);(e.translation&&b.fromArray(e.translation),e.rotationOffset&&b.add(g.fromArray(e.rotationOffset)),e.rotation)&&((r=e.rotation.map(l.Math.degToRad)).push(n),y.makeRotationFromEuler(v.fromArray(r)));e.preRotation&&((r=e.preRotation.map(l.Math.degToRad)).push(n),m.makeRotationFromEuler(v.fromArray(r)),y.premultiply(m));e.postRotation&&((r=e.postRotation.map(l.Math.degToRad)).push(n),m.makeRotationFromEuler(v.fromArray(r)),m.getInverse(m),y.multiply(m));return e.scale&&t.scale(g.fromArray(e.scale)),t.setPosition(b),t.multiply(y),t}function x(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===e?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function S(e){return e.split(",").map(function(e){return parseFloat(e)})}function E(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.byteLength),l.LoaderUtils.decodeText(new Uint8Array(e,t,r))}function T(e,t,r){return e.slice(0,t).concat(r).concat(e.slice(t))}return e}()},Edne:function(e,t,r){"use strict";var n,a=r("lC5x"),o=r.n(a),i=r("J0Oq"),s=r.n(i),c=r("HzJ8"),l=r.n(c),u=r("pUg0"),p=r("G71/"),d=r("jL0q"),h=this,f=r("uUaz");function m(e){var t=void 0,r={r:1,g:1,b:1};switch(e){case"AmbientLight":t=new f[e](r,1);break;case"HemisphereLight":t=new f[e](r,r,1);break;case"DirectionalLight":case"PointLight":case"SpotLight":t=new f[e](r,1);break;default:throw Error("LightType is error")}return t}var v,g,b=(n=s()(o.a.mark(function e(t){var r,n,a,i,s,c,f,v,g;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("Lights data are undefined! (Function: addLights)");case 2:r=!0,n=!1,a=void 0,e.prev=5,i=l()(t);case 7:if(r=(s=i.next()).done){e.next=17;break}return c=s.value,f=c.type,v=c.param,g=m(f),e.next=13,Object(u.a)(g,v,d.a);case 13:p.l.add(g);case 14:r=!0,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),n=!0,a=e.t0;case 23:e.prev=23,e.prev=24,!r&&i.return&&i.return();case 26:if(e.prev=26,!n){e.next=29;break}throw a;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}},e,h,[[5,19,23,31],[24,,26,30]])})),function(e){return n.apply(this,arguments)}),y=r("Xxek"),w=r("dlDQ"),x=r("u3qd"),S=(r("JpL0"),this),E=r("uUaz"),T=function(){var e=s()(o.a.mark(function e(t){var r,n,a,i,s,c,u,d;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,n=!1,a=void 0,e.prev=3,i=l()(t);case 5:if(r=(s=i.next()).done){e.next=18;break}return c=s.value,e.next=9,Object(y.a)(c.material);case 9:u=e.sent,(d=new E.Sprite(u)).name=c.name,d.position.set(c.position.x+0,c.position.y+-81,c.position.z+0),p.l.add(d),x.a.spriteState[c.name]=d;case 15:r=!0,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),n=!0,a=e.t0;case 24:e.prev=24,e.prev=25,!r&&i.return&&i.return();case 27:if(e.prev=27,!n){e.next=30;break}throw a;case 30:return e.finish(27);case 31:return e.finish(24);case 32:case"end":return e.stop()}},e,S,[[3,20,24,32],[25,,27,31]])}));return function(t){return e.apply(this,arguments)}}(),A=r("KH7x"),C=r.n(A),O=r("kJPP"),L=r("iPbq"),M=r("Ufiy"),_=r("OLR1"),R=this,k=(v=s()(o.a.mark(function e(t){var r,n,a,i,s,c,u,d,h,f,m,v,g,b,y,x,S,E;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)();case 2:if(r=e.sent,!((n=r.Hotspot)&&n.length>0)){e.next=48;break}a=!0,i=!1,s=void 0,e.prev=8,c=l()(n);case 10:if(a=(u=c.next()).done){e.next=34;break}for(d=u.value,h=!0,f=!1,m=void 0,e.prev=15,v=l()(d.models);!(h=(g=v.next()).done);h=!0)(b=g.value).name===t.name&&(y=C()(b.pivotPoint,3),x=y[0],S=y[1],E=y[2],t.geometry.applyMatrix(p.g.makeTranslation(x,S,E)),t.position.x-=x,t.position.y-=S,t.position.z-=E);e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),f=!0,m=e.t0;case 23:e.prev=23,e.prev=24,!h&&v.return&&v.return();case 26:if(e.prev=26,!f){e.next=29;break}throw m;case 29:return e.finish(26);case 30:return e.finish(23);case 31:a=!0,e.next=10;break;case 34:e.next=40;break;case 36:e.prev=36,e.t1=e.catch(8),i=!0,s=e.t1;case 40:e.prev=40,e.prev=41,!a&&c.return&&c.return();case 43:if(e.prev=43,!i){e.next=46;break}throw s;case 46:return e.finish(43);case 47:return e.finish(40);case 48:case"end":return e.stop()}},e,this,[[8,36,40,48],[15,19,23,31],[24,,26,30],[41,,43,47]])})),function(e){return v.apply(this,arguments)}),P=(g=s()(o.a.mark(function e(t,r,n){var a,i,s,c,l,u,d,h,f,m,v;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(M.a)(new Int8Array(t.slice(68,72))),i=72,s=0;case 3:if(!(s<a)){e.next=29;break}return i+=1,c=Object(M.a)(new Int8Array(t.slice(i,i+4))),i+=4,l=Object(M.a)(new Int8Array(t.slice(i,i+4))),i+=4,u=new Int8Array(t.slice(i,i+64)),d=Object(M.b)(u),h=t.slice(c,c+l),i+=64,e.next=15,O.a.decoder(h);case 15:return f=e.sent,(m=new N.Mesh(f)).name=d,void 0!==m.material.materials?m.material.materials[0]=r[d]:m.material=r[d],m.position.set(0,-80,0),p.l.add(m),e.next=23,k(m);case 23:I++,(v=Math.floor(I/n.length*100))>=0&&v<=100&&L.a.processNum(v);case 26:s++,e.next=3;break;case 29:case"end":return e.stop()}},e,this)})),function(e,t,r){return g.apply(this,arguments)}),N=r("uUaz"),I=0,D=function(){var e=s()(o.a.mark(function e(t){var r,n,a,i,s,c,u,p,d,h,f,m,v,g,b,x,S,E,T=t.Models,A=t.Materials;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T&&A){e.next=2;break}throw Error("usrData Models || Materials is error(Function: addModels)");case 2:r={},n=!0,a=!1,i=void 0,e.prev=6,s=l()(A);case 8:if(n=(c=s.next()).done){e.next=16;break}return u=c.value,e.next=12,Object(y.a)(u);case 12:r[u.name]=e.sent;case 13:n=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),a=!0,i=e.t0;case 22:e.prev=22,e.prev=23,!n&&s.return&&s.return();case 25:if(e.prev=25,!a){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:p=Object(w.c)()+"models/",d=!0,h=!1,f=void 0,e.prev=34,m=l()(T);case 36:if(d=(v=m.next()).done){e.next=55;break}if(g=v.value,b=g.type,x=g.path,S=""+p+x,E=null,"FBX"!==b){e.next=46;break}return e.next=43,O.a[b](S);case 43:E=e.sent,e.next=49;break;case 46:return e.next=48,O.a[b](S);case 48:E=e.sent;case 49:if("arraybuffer"!==(t=E,Object.prototype.toString.call(t).slice(8,-1).toLowerCase())){e.next=52;break}return e.next=52,P(E,r,A);case 52:d=!0,e.next=36;break;case 55:e.next=61;break;case 57:e.prev=57,e.t1=e.catch(34),h=!0,f=e.t1;case 61:e.prev=61,e.prev=62,!d&&m.return&&m.return();case 64:if(e.prev=64,!h){e.next=67;break}throw f;case 67:return e.finish(64);case 68:return e.finish(61);case 69:return e.next=71,Object(_.b)();case 71:return e.next=73,Object(_.a)();case 73:case"end":return e.stop()}var t},e,R,[[6,18,22,30],[23,,25,29],[34,57,61,69],[62,,64,68]])}));return function(t){return e.apply(this,arguments)}}(),F=(r("hDu7"),this),B=function(){var e=s()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t.Lights);case 2:return console.time("load model"),e.next=5,D(t);case 5:return console.timeEnd("load model"),e.next=8,T(t.Sprites);case 8:case"end":return e.stop()}},e,F)}));return function(t){return e.apply(this,arguments)}}();t.a=B},"G71/":function(e,t,r){"use strict";var n,a=r("lC5x"),o=r.n(a),i=r("rVsN"),s=r.n(i),c=r("J0Oq"),l=r.n(c),u=r("uUaz");u.FONTRELoader=function(e){this.manager=void 0!==e?e:u.DefaultLoadingManager,this.materials=null,this.verbosity=0,this.attributeOptions={},this.dracoDecoderType={},this.drawMode=u.TrianglesDrawMode},u.FONTRELoader.prototype={constructor:u.FONTRELoader,loadFile:function(e,t,r,n){var a=new u.FileLoader(this.manager);return a.setPath(this.path),a.setResponseType("arraybuffer"),a.load(e,function(e){t(e)},r,n)},loadFtrn:function(){var e=l()(o.a.mark(function e(t,r,n,a){var i,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,(c=new u.FileLoader(i.manager)).setPath(this.path),c.setResponseType("arraybuffer"),e.abrupt("return",new s.a(function(e,r){c.load(t,function(t){for(var r=new Uint8Array(t.slice(20,40)),n=r.length,a=new Uint8Array(t.slice(69)),o=a.length,i=0;i<o;i++)a[i]=255&a[i]^255&r[i%n];t=a.buffer.slice(0),e(t)},n,function(e){r()})}));case 5:case"end":return e.stop()}},e,this)}));return function(t,r,n,a){return e.apply(this,arguments)}}(),decodeFtrBlob:function(e,t,r,n){this.decodeDracoFile(e,t)},load:function(e,t,r,n){var a=this,o=new u.FileLoader(a.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.load(e,function(e){a.decodeDracoFile(e,t)},r,n)},setPath:function(e){this.path=e},setCrossOrigin:function(e){this.crossOrigin=e},setVerbosity:function(e){this.verbosity=e},setDracoDecoderType:function(e){this.dracoDecoderType=e},setDrawMode:function(e){this.drawMode=e},setSkipDequantization:function(e,t){var r=!0;void 0!==t&&(r=t),this.getAttributeOptions(e).skipDequantization=r},decodeDracoFile:function(e,t){var r=this;u.FONTRELoader.getDecoder(this.dracoDecoderType,function(n){r.decodeDracoFileInternal(e,n,t)})},decodeDracoFileInternal:function(e,t,r){var n=new t.DecoderBuffer;n.Init(new Int8Array(e),e.byteLength);var a=new t.Decoder,o=a.GetEncodedGeometryType(n);if(o==t.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else{if(o!=t.POINT_CLOUD){var i="THREE.FONTRELoader: Unknown geometry type.";throw console.error(i),new Error(i)}this.verbosity>0&&console.log("Loaded a point cloud.")}r(this.convertDracoGeometryTo3JS(t,a,o,n))},convertDracoGeometryTo3JS:function(e,t,r,n){var a,o;!0===this.getAttributeOptions("position").skipDequantization&&t.SkipAttributeTransform(e.POSITION);var i=performance.now();if(r===e.TRIANGULAR_MESH?(a=new e.Mesh,o=t.DecodeBufferToMesh(n,a)):(a=new e.PointCloud,o=t.DecodeBufferToPointCloud(n,a)),!o.ok()||0==a.ptr){var s="THREE.FONTRELoader: Decoding failed: ";throw s+=o.error_msg(),console.error(s),e.destroy(t),e.destroy(a),new Error(s)}var c,l,p,d,h,f,m=performance.now();e.destroy(n);var v=3;r==e.TRIANGULAR_MESH?(c=a.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+c.toString())):c=0,p=3*(l=a.num_points()),d=2*l,h=3*l,f=a.num_attributes(),this.verbosity>0&&(console.log("Number of points loaded: "+l.toString()),console.log("Number of attributes loaded: "+f.toString()));var g=t.GetAttributeId(a,e.POSITION);if(-1==g){s="THREE.FONTRELoader: No position attribute found.";throw console.error(s),e.destroy(t),e.destroy(a),new Error(s)}var b=t.GetAttribute(a,g),y=new e.DracoFloat32Array;t.GetAttributeFloatForAllPoints(a,b,y);var w,x=t.GetAttributeId(a,e.COLOR);if(-1!=x){this.verbosity>0&&console.log("Loaded color attribute.");var S=t.GetAttribute(a,x);4===S.num_components()&&(h=4*l,v=4),w=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(a,S,w)}var E,T=t.GetAttributeId(a,e.NORMAL);if(-1!=T){this.verbosity>0&&console.log("Loaded normal attribute.");var A=t.GetAttribute(a,T);E=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(a,A,E)}var C,O=t.GetAttributeId(a,e.TEX_COORD);if(-1!=O){this.verbosity>0&&console.log("Loaded texture coordinate attribute.");var L=t.GetAttribute(a,O);C=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(a,L,C)}for(var M={vertices:new Float32Array(p),normals:new Float32Array(p),uvs:new Float32Array(d),colors:new Float32Array(h)},_=0;_<p;_+=3)M.vertices[_]=y.GetValue(_),M.vertices[_+1]=y.GetValue(_+1),M.vertices[_+2]=y.GetValue(_+2),-1!=T&&(M.normals[_]=E.GetValue(_),M.normals[_+1]=E.GetValue(_+1),M.normals[_+2]=E.GetValue(_+2));for(_=0;_<h;_+=1)M.colors[_]=-1!=x?w.GetValue(_):1;if(-1!=O)for(_=0;_<d;_+=2)M.uvs[_]=C.GetValue(_),M.uvs[_+1]=C.GetValue(_+1);if(e.destroy(y),-1!=x&&e.destroy(w),-1!=T&&e.destroy(E),-1!=O&&e.destroy(C),r==e.TRIANGULAR_MESH)if(this.drawMode===u.TriangleStripDrawMode){var R=new e.DracoInt32Array;t.GetTriangleStripsFromMesh(a,R);M.indices=new Uint32Array(R.size());for(_=0;_<R.size();++_)M.indices[_]=R.GetValue(_);e.destroy(R)}else{var k=3*c;M.indices=new Uint32Array(k);var P=new e.DracoInt32Array;for(_=0;_<c;++_){t.GetFaceFromMesh(a,_,P);var N=3*_;M.indices[N]=P.GetValue(0),M.indices[N+1]=P.GetValue(1),M.indices[N+2]=P.GetValue(2)}e.destroy(P)}var I=new u.BufferGeometry;I.drawMode=this.drawMode,r==e.TRIANGULAR_MESH&&I.setIndex(new(M.indices.length>65535?u.Uint32BufferAttribute:u.Uint16BufferAttribute)(M.indices,1)),I.addAttribute("position",new u.Float32BufferAttribute(M.vertices,3));var D=new e.AttributeQuantizationTransform;if(D.InitFromAttribute(b)){I.attributes.position.isQuantized=!0,I.attributes.position.maxRange=D.range(),I.attributes.position.numQuantizationBits=D.quantization_bits(),I.attributes.position.minValues=new Float32Array(3);for(_=0;_<3;++_)I.attributes.position.minValues[_]=D.min_value(_)}return e.destroy(D),I.addAttribute("color",new u.Float32BufferAttribute(M.colors,v)),-1!=T&&I.addAttribute("normal",new u.Float32BufferAttribute(M.normals,3)),-1!=O&&I.addAttribute("uv",new u.Float32BufferAttribute(M.uvs,2)),e.destroy(t),e.destroy(a),this.decode_time=m-i,this.import_time=performance.now()-m,this.verbosity>0&&(console.log("Decode time: "+this.decode_time),console.log("Import time: "+this.import_time)),I},isVersionSupported:function(e,t){u.FONTRELoader.getDecoder(this.dracoDecoderType,function(r){t(r.isVersionSupported(e))})},getAttributeOptions:function(e){return void 0===this.attributeOptions[e]&&(this.attributeOptions[e]={}),this.attributeOptions[e]}},u.FONTRELoader.getDecoder=function(e,t){if("undefined"==typeof DracoDecoderModule)throw new Error("THREE.FONTRELoader: DracoDecoderModule not found.");void 0!==n?void 0!==t&&t(n):(e.onModuleLoaded=function(e){"function"==typeof t&&(n=e,t(e))},DracoDecoderModule(e))};var p=r("hRKE"),d=r.n(p),h=r("uUaz");h.DRACOLoader=function(e){this.timeLoaded=0,this.manager=e||h.DefaultLoadingManager,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=h.TrianglesDrawMode,this.nativeAttributeMap={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"}},h.DRACOLoader.prototype={constructor:h.DRACOLoader,loadFtrm:function(e,t,r,n){var a=new h.FileLoader(this.manager);return a.setPath(this.path),a.setResponseType("arraybuffer"),a.load(e,function(e){t(e)},r,n)},load:function(e,t,r,n){var a=this,o=new h.FileLoader(a.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.load(e,function(e){a.decodeDracoFile(e,t)},r,n)},setPath:function(e){this.path=e},setCrossOrigin:function(e){this.crossOrigin=e},setVerbosity:function(e){this.verbosity=e},setDrawMode:function(e){this.drawMode=e},setSkipDequantization:function(e,t){var r=!0;void 0!==t&&(r=t),this.getAttributeOptions(e).skipDequantization=r},decodeDracoFile:function(e,t,r,n){var a=this;h.DRACOLoader.getDecoderModule().then(function(o){a.decodeDracoFileInternal(e,o.decoder,t,r||{},n||{})})},decodeDracoFileInternal:function(e,t,r,n,a){var o=new t.DecoderBuffer;o.Init(new Int8Array(e),e.byteLength);var i=new t.Decoder,s=i.GetEncodedGeometryType(o);if(s==t.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else{if(s!=t.POINT_CLOUD){var c="THREE.DRACOLoader: Unknown geometry type.";throw console.error(c),new Error(c)}this.verbosity>0&&console.log("Loaded a point cloud.")}r(this.convertDracoGeometryTo3JS(t,i,s,o,n,a))},addAttributeToGeometry:function(e,t,r,n,a,o,i,s){if(0===o.ptr){var c="THREE.DRACOLoader: No attribute "+n;throw console.error(c),new Error(c)}var l,u,p=o.num_components(),d=r.num_points()*p;switch(a){case Float32Array:l=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(r,o,l),s[n]=new Float32Array(d),u=h.Float32BufferAttribute;break;case Int8Array:l=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(r,o,l),s[n]=new Int8Array(d),u=h.Int8BufferAttribute;break;case Int16Array:l=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(r,o,l),s[n]=new Int16Array(d),u=h.Int16BufferAttribute;break;case Int32Array:l=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(r,o,l),s[n]=new Int32Array(d),u=h.Int32BufferAttribute;break;case Uint8Array:l=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(r,o,l),s[n]=new Uint8Array(d),u=h.Uint8BufferAttribute;break;case Uint16Array:l=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(r,o,l),s[n]=new Uint16Array(d),u=h.Uint16BufferAttribute;break;case Uint32Array:l=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(r,o,l),s[n]=new Uint32Array(d),u=h.Uint32BufferAttribute;break;default:c="THREE.DRACOLoader: Unexpected attribute type.";throw console.error(c),new Error(c)}for(var f=0;f<d;f++)s[n][f]=l.GetValue(f);i.addAttribute(n,new u(s[n],p)),e.destroy(l)},convertDracoGeometryTo3JS:function(e,t,r,n,a,o){var i,s;!0===this.getAttributeOptions("position").skipDequantization&&t.SkipAttributeTransform(e.POSITION);var c=performance.now();if(r===e.TRIANGULAR_MESH?(i=new e.Mesh,s=t.DecodeBufferToMesh(n,i)):(i=new e.PointCloud,s=t.DecodeBufferToPointCloud(n,i)),!s.ok()||0==i.ptr){var l="THREE.DRACOLoader: Decoding failed: ";throw l+=s.error_msg(),console.error(l),e.destroy(t),e.destroy(i),new Error(l)}var u,p=performance.now();e.destroy(n),r==e.TRIANGULAR_MESH?(u=i.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+u.toString())):u=0;var d=i.num_points(),f=i.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+d.toString()),console.log("Number of attributes loaded: "+f.toString()));var m=t.GetAttributeId(i,e.POSITION);if(-1==m){l="THREE.DRACOLoader: No position attribute found.";throw console.error(l),e.destroy(t),e.destroy(i),new Error(l)}var v=t.GetAttribute(i,m),g={},b=new h.BufferGeometry;for(var y in this.nativeAttributeMap)if(void 0===a[y]){var w=t.GetAttributeId(i,e[this.nativeAttributeMap[y]]);if(-1!==w){this.verbosity>0&&console.log("Loaded "+y+" attribute.");var x=t.GetAttribute(i,w);this.addAttributeToGeometry(e,t,i,y,Float32Array,x,b,g)}}for(var y in a){var S=o[y]||Float32Array,E=a[y];x=t.GetAttributeByUniqueId(i,E);this.addAttributeToGeometry(e,t,i,y,S,x,b,g)}if(r==e.TRIANGULAR_MESH)if(this.drawMode===h.TriangleStripDrawMode){var T=new e.DracoInt32Array;t.GetTriangleStripsFromMesh(i,T);g.indices=new Uint32Array(T.size());for(var A=0;A<T.size();++A)g.indices[A]=T.GetValue(A);e.destroy(T)}else{var C=3*u;g.indices=new Uint32Array(C);var O=new e.DracoInt32Array;for(A=0;A<u;++A){t.GetFaceFromMesh(i,A,O);var L=3*A;g.indices[L]=O.GetValue(0),g.indices[L+1]=O.GetValue(1),g.indices[L+2]=O.GetValue(2)}e.destroy(O)}b.drawMode=this.drawMode,r==e.TRIANGULAR_MESH&&b.setIndex(new(g.indices.length>65535?h.Uint32BufferAttribute:h.Uint16BufferAttribute)(g.indices,1));var M=new e.AttributeQuantizationTransform;if(M.InitFromAttribute(v)){b.attributes.position.isQuantized=!0,b.attributes.position.maxRange=M.range(),b.attributes.position.numQuantizationBits=M.quantization_bits(),b.attributes.position.minValues=new Float32Array(3);for(A=0;A<3;++A)b.attributes.position.minValues[A]=M.min_value(A)}return e.destroy(M),e.destroy(t),e.destroy(i),this.decode_time=p-c,this.import_time=performance.now()-p,this.verbosity>0&&(console.log("Decode time: "+this.decode_time),console.log("Import time: "+this.import_time)),b},isVersionSupported:function(e,t){h.DRACOLoader.getDecoderModule().then(function(r){t(r.decoder.isVersionSupported(e))})},getAttributeOptions:function(e){return void 0===this.attributeOptions[e]&&(this.attributeOptions[e]={}),this.attributeOptions[e]}},h.DRACOLoader.decoderPath="./",h.DRACOLoader.decoderConfig={},h.DRACOLoader.decoderModulePromise=null,h.DRACOLoader.setDecoderPath=function(e){h.DRACOLoader.decoderPath=e},h.DRACOLoader.setDecoderConfig=function(e){var t=h.DRACOLoader.decoderConfig.wasmBinary;h.DRACOLoader.decoderConfig=e||{},h.DRACOLoader.releaseDecoderModule(),t&&(h.DRACOLoader.decoderConfig.wasmBinary=t)},h.DRACOLoader.releaseDecoderModule=function(){h.DRACOLoader.decoderModulePromise=null},h.DRACOLoader.getDecoderModule=function(){var e=this,t=h.DRACOLoader.decoderPath,r=h.DRACOLoader.decoderConfig,n=h.DRACOLoader.decoderModulePromise;return n||("undefined"!=typeof DracoDecoderModule?n=s.a.resolve():"object"!==("undefined"==typeof WebAssembly?"undefined":d()(WebAssembly))||"js"===r.type?n=h.DRACOLoader._loadScript(t+"decoder.v1.0.js"):(r.wasmBinaryFile=t+"draco_decoder.wasm",n=h.DRACOLoader._loadScript(t+"draco_wasm_wrapper.js").then(function(){return h.DRACOLoader._loadArrayBuffer(r.wasmBinaryFile)}).then(function(e){r.wasmBinary=e})),n=n.then(function(){return new s.a(function(t){r.onModuleLoaded=function(r){e.timeLoaded=performance.now(),t({decoder:r})},DracoDecoderModule(r)})}),h.DRACOLoader.decoderModulePromise=n,n)},h.DRACOLoader._loadScript=function(e){var t=document.getElementById("decoder_script");null!==t&&t.parentNode.removeChild(t);var r=document.getElementsByTagName("head")[0],n=document.createElement("script");return n.id="decoder_script",n.type="text/javascript",n.src=e,new s.a(function(e){n.onload=e,r.appendChild(n)})},h.DRACOLoader._loadArrayBuffer=function(e){var t=new h.FileLoader;return t.setResponseType("arraybuffer"),new s.a(function(r,n){t.load(e,r,void 0,n)})};var f=r("8zml"),m=r.n(f),v=r("IYkF"),g=r.n(v),b=r("uUaz");b.OrbitControls=function(e,t,r){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new b.Vector3,this.minDistance=r.minDistance||0,this.maxDistance=r.maxDistance||1/0,this.customDistance=r.customDistance||610,this.minZoom=r.minZoom||0,this.maxZoom=r.maxZoom||1/0,this.minPolarAngle=r.minPolarAngle||0,this.maxPolarAngle=r.maxPolarAngle||Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!0,this.dampingFactor=.3,this.enableZoom=!0,this.zoomSpeed=.2,this.enableRotate=!0,this.rotateSpeed=.1,this.enablePan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=-.06,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:b.MOUSE.LEFT,ZOOM:b.MOUSE.MIDDLE,PAN:null},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.onClickCallback=void 0,this.onMouseMoveCallBack=void 0,this.isIntoInterior=void 0,this.fpsTarget=new b.Vector3,this.lookSpeed=.005,this.lat=0,this.lon=0,this.phi=0,this.theta=0,this.focalLengthBackup=this.object.getFocalLength(),this.focalLength=this.object.getFocalLength(),this.interactingTimeOut=r.interactingTimeOut||5e3,this.interactingTime=0,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),u=l.NONE},this.update=function(t,r){var o=new b.Vector3,i=(new b.Quaternion).setFromUnitVectors(e.up,new b.Vector3(0,1,0)),s=i.clone().inverse(),c=new b.Vector3,g=new b.Quaternion;if(void 0!==r&&!r){1!==f&&(n.focalLength=Math.max(35,Math.min(80,n.focalLength/f)),n.object.setFocalLength(n.focalLength));var y=t*this.lookSpeed;(Math.abs(h.theta)>p||Math.abs(h.phi)>p)&&(n.lon+=b.Math.radToDeg(h.theta*y),n.lat-=b.Math.radToDeg(h.phi*y)),n.autoRotate&&(n.lon+=.05),n.phi=b.Math.degToRad(90-n.lat),n.theta=b.Math.degToRad(n.lon);var w=n.fpsTarget,x=n.object.position;return w.x=x.x+100*Math.sin(n.phi)*Math.cos(n.theta),w.y=x.y+100*Math.cos(n.phi),w.z=x.z+100*Math.sin(n.phi)*Math.sin(n.theta),n.object.lookAt(w),h.set(0,0,0),f=1,m.set(0,0,0),!0}n.focalLength!==n.focalLengthBackup&&(n.focalLength=n.focalLengthBackup,n.object.setFocalLength(n.focalLength));x=n.object.position;return o.copy(x).sub(n.target),o.applyQuaternion(i),d.setFromVector3(o),n.autoRotate&&u===l.NONE&&L(2*Math.PI/60/60*n.autoRotateSpeed),d.theta+=h.theta,d.phi+=h.phi,d.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=f,d.radius=Math.max(n.minDistance,Math.min(n.maxDistance,d.radius)),n.target.add(m),o.setFromSpherical(d),o.applyQuaternion(s),n.isIntoInterior?n.object.lookAt(-30,30,33):(x.copy(n.target).add(o),n.object.lookAt(n.object.position.x/3,0,n.object.position.z/10)),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor):h.set(0,0,0),f=1,m.set(0,0,0),!!(v||c.distanceToSquared(n.object.position)>p||8*(1-g.dot(n.object.quaternion))>p)&&(n.dispatchEvent(a),c.copy(n.object.position),g.copy(n.object.quaternion),v=!1,!0)},this.dispose=function(){n.domElement.removeEventListener("contextmenu",X,!1),n.domElement.removeEventListener("mousedown",F,!1),n.domElement.removeEventListener("wheel",U,!1),n.domElement.removeEventListener("touchstart",H,!1),n.domElement.removeEventListener("touchend",z,!1),n.domElement.removeEventListener("touchmove",V,!1),n.domElement.removeEventListener("click",q,!1),document.removeEventListener("mousemove",B,!1),document.removeEventListener("mouseup",G,!1),window.removeEventListener("keydown",j,!1)},this.moveLeft=function(e){L(e)},this.moveUp=function(e){M(e)},this.moveIn=function(){D(O())},this.moveOut=function(){I(O())};var n=this,a={type:"change"},o={type:"start"},i={type:"end"},s={type:"cus_mouse_down_move"},c={type:"cus_mouse_up"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},u=l.NONE,p=1e-6,d=new b.Spherical,h=new b.Spherical,f=1,m=new b.Vector3,v=!1,g=new b.Vector2,y=new b.Vector2,w=new b.Vector2,x=new b.Vector2,S=new b.Vector2,E=new b.Vector2,T=new b.Vector2,A=new b.Vector2,C=new b.Vector2;function O(){return Math.pow(.95,n.zoomSpeed)}function L(e){h.theta-=e}function M(e){h.phi-=e}var _,R,k=(_=new b.Vector3,function(e,t){_.setFromMatrixColumn(t,0),_.multiplyScalar(-e),m.add(_)}),P=function(){var e=new b.Vector3;return function(t,r){e.setFromMatrixColumn(r,1),e.multiplyScalar(t),m.add(e)}}(),N=(R=new b.Vector3,function(e,t){var r=n.domElement===document?n.domElement.body:n.domElement;if(n.object instanceof b.PerspectiveCamera){var a=n.object.position;R.copy(a).sub(n.target);var o=R.length();o*=Math.tan(n.object.fov/2*Math.PI/180),k(2*e*o/r.clientHeight,n.object.matrix),P(2*t*o/r.clientHeight,n.object.matrix)}else n.object instanceof b.OrthographicCamera?(k(e*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),P(t*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)});function I(e){n.object instanceof b.PerspectiveCamera?f/=e:n.object instanceof b.OrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){n.object instanceof b.PerspectiveCamera?f*=e:n.object instanceof b.OrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function F(e){if(!1!==n.enabled){if(e.preventDefault(),e.button===n.mouseButtons.ORBIT){if(!1===n.enableRotate)return;!function(e){g.set(e.clientX,e.clientY)}(e),u=l.ROTATE}else if(e.button===n.mouseButtons.ZOOM){if(!1===n.enableZoom)return;!function(e){T.set(e.clientX,e.clientY)}(e),u=l.DOLLY}else if(e.button===n.mouseButtons.PAN){if(!1===n.enablePan)return;!function(e){x.set(e.clientX,e.clientY)}(e),u=l.PAN}u!==l.NONE&&(document.addEventListener("mousemove",B,!1),document.addEventListener("mouseup",G,!1),n.dispatchEvent(o))}}function B(e){if(!1!==n.enabled)if(e.preventDefault(),n.onMouseMoveCallBack&&n.onMouseMoveCallBack(),u===l.ROTATE){if(!1===n.enableRotate)return;!function(e){n.dispatchEvent(s),y.set(e.clientX,e.clientY),w.subVectors(y,g);var t=n.domElement===document?n.domElement.body:n.domElement;L(2*Math.PI*w.x/t.clientWidth*n.rotateSpeed),M(2*Math.PI*w.y/t.clientHeight*.02),g.copy(y)}(e)}else if(u===l.DOLLY){if(!1===n.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),C.subVectors(A,T),C.y>0?I(O()):C.y<0&&D(O()),T.copy(A)}(e)}else if(u===l.PAN){if(!1===n.enablePan)return;!function(e){S.set(e.clientX,e.clientY),E.subVectors(S,x),N(E.x,E.y),x.copy(S)}(e)}}function G(e){!1!==n.enabled&&(n.dispatchEvent(c),document.removeEventListener("mousemove",B,!1),document.removeEventListener("mouseup",G,!1),n.dispatchEvent(i),u=l.NONE)}function U(e){!1===n.enabled||!1===n.enableZoom||u!==l.NONE&&u!==l.ROTATE||(e.preventDefault(),e.stopPropagation(),function(e){e.deltaY<0?D(O()):e.deltaY>0&&I(O())}(e),n.dispatchEvent(o),n.dispatchEvent(i))}function j(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){switch(e.keyCode){case n.keys.UP:N(0,n.keyPanSpeed);break;case n.keys.BOTTOM:N(0,-n.keyPanSpeed);break;case n.keys.LEFT:N(n.keyPanSpeed,0);break;case n.keys.RIGHT:N(-n.keyPanSpeed,0)}}(e)}function H(e){if(!1!==n.enabled){switch(e.touches.length){case 1:if(!1===n.enableRotate)return;!function(e){g.set(e.touches[0].pageX,e.touches[0].pageY)}(e),u=l.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);T.set(0,n)}(e),u=l.TOUCH_DOLLY;break;case 3:if(!1===n.enablePan)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY)}(e),u=l.TOUCH_PAN;break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(o)}}function V(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),n.onMouseMoveCallBack&&n.onMouseMoveCallBack(),e.touches.length){case 1:if(!1===n.enableRotate)return;if(u!==l.TOUCH_ROTATE)return;!function(e){y.set(e.touches[0].pageX,e.touches[0].pageY),w.subVectors(y,g);var t=n.domElement===document?n.domElement.body:n.domElement;L(2*Math.PI*w.x/t.clientWidth*n.rotateSpeed),M(2*Math.PI*w.y/t.clientHeight*n.rotateSpeed),g.copy(y)}(e);break;case 2:if(!1===n.enableZoom)return;if(u!==l.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);A.set(0,n),C.subVectors(A,T),C.y>0?D(O()):C.y<0&&I(O()),T.copy(A)}(e);break;case 3:if(!1===n.enablePan)return;if(u!==l.TOUCH_PAN)return;!function(e){S.set(e.touches[0].pageX,e.touches[0].pageY),E.subVectors(S,x),N(E.x,E.y),x.copy(S)}(e);break;default:u=l.NONE}}function z(e){!1!==n.enabled&&(n.dispatchEvent(i),u=l.NONE)}function X(e){e.preventDefault()}function q(e){n.onClickCallback&&n.onClickCallback(e)}n.domElement.addEventListener("contextmenu",X,!1),n.domElement.addEventListener("mousedown",F,!1),n.domElement.addEventListener("wheel",U,!1),n.domElement.addEventListener("touchstart",H,!1),n.domElement.addEventListener("touchend",z,!1),n.domElement.addEventListener("touchmove",V,!1),n.domElement.addEventListener("click",q,!1),n.domElement.addEventListener("touch:tap",q),window.addEventListener("keydown",j,!1)},b.OrbitControls.prototype=g()(b.EventDispatcher.prototype),b.OrbitControls.prototype.constructor=b.OrbitControls,m()(b.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});b.OrbitControls;var y,w,x,S=r("uUaz");S.Lensflare=function(){S.Mesh.call(this,S.Lensflare.Geometry,new S.MeshBasicMaterial({opacity:0,transparent:!0})),this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;var e=new S.Vector3,t=new S.DataTexture(new Uint8Array(768),16,16,S.RGBFormat);t.minFilter=S.NearestFilter,t.magFilter=S.NearestFilter,t.wrapS=S.ClampToEdgeWrapping,t.wrapT=S.ClampToEdgeWrapping,t.needsUpdate=!0;var r=new S.DataTexture(new Uint8Array(768),16,16,S.RGBFormat);r.minFilter=S.NearestFilter,r.magFilter=S.NearestFilter,r.wrapS=S.ClampToEdgeWrapping,r.wrapT=S.ClampToEdgeWrapping,r.needsUpdate=!0;var n=S.Lensflare.Geometry,a=new S.RawShaderMaterial({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:["precision highp float;","uniform vec3 screenPosition;","uniform vec2 scale;","attribute vec3 position;","void main() {","\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","void main() {","\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );","}"].join("\n"),depthTest:!0,depthWrite:!1,transparent:!1}),o=new S.RawShaderMaterial({uniforms:{map:{value:t},scale:{value:null},screenPosition:{value:null}},vertexShader:["precision highp float;","uniform vec3 screenPosition;","uniform vec2 scale;","attribute vec3 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","\tvUV = uv;","\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","uniform sampler2D map;","varying vec2 vUV;","void main() {","\tgl_FragColor = texture2D( map, vUV );","}"].join("\n"),depthTest:!1,depthWrite:!1,transparent:!1}),i=new S.Mesh(n,a),s=[],c=S.LensflareElement.Shader,l=new S.RawShaderMaterial({uniforms:{map:{value:null},occlusionMap:{value:r},color:{value:new S.Color(16777215)},scale:{value:new S.Vector2},screenPosition:{value:new S.Vector3}},vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:S.AdditiveBlending,transparent:!0,depthWrite:!1}),u=new S.Mesh(n,l);this.addElement=function(e){s.push(e)};var p=new S.Vector2,d=new S.Vector2,h=new S.Box2,f=new S.Vector4;this.onBeforeRender=function(c,m,v){f.copy(c.getCurrentViewport());var g=f.w/f.z,b=f.z/2,y=f.w/2,w=16/f.w;if(p.set(w*g,w),h.min.set(f.x,f.y),h.max.set(f.x+(f.z-16),f.y+(f.w-16)),e.setFromMatrixPosition(this.matrixWorld),e.applyMatrix4(v.matrixWorldInverse),e.applyMatrix4(v.projectionMatrix),d.x=f.x+e.x*b+b-8,d.y=f.y+e.y*y+y-8,h.containsPoint(d)){c.copyFramebufferToTexture(d,t),(A=a.uniforms).scale.value=p,A.screenPosition.value=e,c.renderBufferDirect(v,null,n,a,i,null),c.copyFramebufferToTexture(d,r),(A=o.uniforms).scale.value=p,A.screenPosition.value=e,c.renderBufferDirect(v,null,n,o,i,null);for(var x=2*-e.x,S=2*-e.y,E=0,T=s.length;E<T;E++){var A,C=s[E];(A=l.uniforms).color.value.copy(C.color),A.map.value=C.texture,A.screenPosition.value.x=e.x+x*C.distance,A.screenPosition.value.y=e.y+S*C.distance;w=C.size/f.w,g=f.w/f.z;A.scale.value.set(w*g,w),l.uniformsNeedUpdate=!0,c.renderBufferDirect(v,null,n,l,u,null)}}},this.dispose=function(){a.dispose(),o.dispose(),l.dispose(),t.dispose(),r.dispose();for(var e=0,n=s.length;e<n;e++)s[e].texture.dispose()}},S.Lensflare.prototype=g()(S.Mesh.prototype),S.Lensflare.prototype.constructor=S.Lensflare,S.Lensflare.prototype.isLensflare=!0,S.LensflareElement=function(e,t,r,n){this.texture=e,this.size=t||1,this.distance=r||0,this.color=n||new S.Color(16777215)},S.LensflareElement.Shader={uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:["precision highp float;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform sampler2D occlusionMap;","attribute vec3 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tvUV = uv;","\tvec2 pos = position.xy;","\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","\tvVisibility =        visibility.r / 9.0;","\tvVisibility *= 1.0 - visibility.g / 9.0;","\tvVisibility *=       visibility.b / 9.0;","\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tvec4 texture = texture2D( map, vUV );","\ttexture.a *= vVisibility;","\tgl_FragColor = texture;","\tgl_FragColor.rgb *= color;","}"].join("\n")},S.Lensflare.Geometry=(y=new S.BufferGeometry,w=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),x=new S.InterleavedBuffer(w,5),y.setIndex([0,1,2,0,2,3]),y.addAttribute("position",new S.InterleavedBufferAttribute(x,3,0,!1)),y.addAttribute("uv",new S.InterleavedBufferAttribute(x,2,3,!1)),y);r("UExh");var E=r("aA9S"),T=r.n(E),A=r("uUaz");A.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var r={minFilter:A.LinearFilter,magFilter:A.LinearFilter,format:A.RGBAFormat,stencilBuffer:!1},n=e.getDrawingBufferSize();(t=new A.WebGLRenderTarget(n.width,n.height,r)).texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===A.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===A.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new A.ShaderPass(A.CopyShader)},T()(A.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,r,n=!1,a=this.passes.length;for(r=0;r<a;r++)if(!1!==(t=this.passes[r]).enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==A.MaskPass&&(t instanceof A.MaskPass?n=!0:t instanceof A.ClearMaskPass&&(n=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(e,t)}}),A.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},T()(A.Pass.prototype,{setSize:function(e,t){},render:function(e,t,r,n,a){console.error("THREE.Pass: .render() must be implemented in derived pass.")}});var C=r("uUaz");C.SSAARenderPass=function(e,t,r,n){C.Pass.call(this),this.scene=e,this.camera=t,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==r?r:0,this.clearAlpha=void 0!==n?n:0,void 0===C.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader");var a=C.CopyShader;this.copyUniforms=C.UniformsUtils.clone(a.uniforms),this.copyMaterial=new C.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:C.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.camera2=new C.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new C.Scene,this.quad2=new C.Mesh(new C.PlaneBufferGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},C.SSAARenderPass.prototype=T()(g()(C.Pass.prototype),{constructor:C.SSAARenderPass,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)},render:function(e,t,r){this.sampleRenderTarget||(this.sampleRenderTarget=new C.WebGLRenderTarget(r.width,r.height,{minFilter:C.LinearFilter,magFilter:C.LinearFilter,format:C.RGBAFormat}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");var n=C.SSAARenderPass.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],a=e.autoClear;e.autoClear=!1;var o=e.getClearColor().getHex(),i=e.getClearAlpha(),s=1/n.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;for(var c=r.width,l=r.height,u=0;u<n.length;u++){var p=n[u];this.camera.setViewOffset&&this.camera.setViewOffset(c,l,.0625*p[0],.0625*p[1],c,l);var d=s;if(this.unbiased)d+=1/32*((u+.5)/n.length-.5);this.copyUniforms.opacity.value=d,e.setClearColor(this.clearColor,this.clearAlpha),e.render(this.scene,this.camera,this.sampleRenderTarget,!0),0===u&&e.setClearColor(0,0),e.render(this.scene2,this.camera2,this.renderToScreen?null:t,0===u)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=a,e.setClearColor(o,i)}}),C.SSAARenderPass.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];var O=r("uUaz");O.TAARenderPass=function(e,t,r){void 0===O.SSAARenderPass&&console.error("THREE.TAARenderPass relies on THREE.SSAARenderPass"),O.SSAARenderPass.call(this,e,t,r),this.sampleLevel=0,this.accumulate=!1},O.TAARenderPass.JitterVectors=O.SSAARenderPass.JitterVectors,O.TAARenderPass.prototype=T()(g()(O.SSAARenderPass.prototype),{constructor:O.TAARenderPass,render:function(e,t,r,n){if(!this.accumulate)return O.SSAARenderPass.prototype.render.call(this,e,t,r,n),void(this.accumulateIndex=-1);var a=O.TAARenderPass.JitterVectors[5];this.sampleRenderTarget||(this.sampleRenderTarget=new O.WebGLRenderTarget(r.width,r.height,this.params),this.sampleRenderTarget.texture.name="TAARenderPass.sample"),this.holdRenderTarget||(this.holdRenderTarget=new O.WebGLRenderTarget(r.width,r.height,this.params),this.holdRenderTarget.texture.name="TAARenderPass.hold"),this.accumulate&&-1===this.accumulateIndex&&(O.SSAARenderPass.prototype.render.call(this,e,this.holdRenderTarget,r,n),this.accumulateIndex=0);var o=e.autoClear;e.autoClear=!1;var i=1/a.length;if(this.accumulateIndex>=0&&this.accumulateIndex<a.length){this.copyUniforms.opacity.value=i,this.copyUniforms.tDiffuse.value=t.texture;for(var s=Math.pow(2,this.sampleLevel),c=0;c<s;c++){var l=a[this.accumulateIndex];if(this.camera.setViewOffset&&this.camera.setViewOffset(r.width,r.height,.0625*l[0],.0625*l[1],r.width,r.height),e.render(this.scene,this.camera,t,!0),e.render(this.scene2,this.camera2,this.sampleRenderTarget,0===this.accumulateIndex),this.accumulateIndex++,this.accumulateIndex>=a.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}var u=this.accumulateIndex*i;u>0&&(this.copyUniforms.opacity.value=1,this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,e.render(this.scene2,this.camera2,t,!0)),u<1&&(this.copyUniforms.opacity.value=1-u,this.copyUniforms.tDiffuse.value=this.holdRenderTarget.texture,e.render(this.scene2,this.camera2,t,0===u)),e.autoClear=o}});var L=r("uUaz");L.RenderPass=function(e,t,r,n,a){L.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=n,this.clearAlpha=void 0!==a?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},L.RenderPass.prototype=T()(g()(L.Pass.prototype),{constructor:L.RenderPass,render:function(e,t,r,n,a){var o,i,s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(o=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:r,this.clear),this.clearColor&&e.setClearColor(o,i),this.scene.overrideMaterial=null,e.autoClear=s}});var M=r("uUaz");M.MaskPass=function(e,t){M.Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1},M.MaskPass.prototype=T()(g()(M.Pass.prototype),{constructor:M.MaskPass,render:function(e,t,r,n,a){var o,i,s=e.context,c=e.state;c.buffers.color.setMask(!1),c.buffers.depth.setMask(!1),c.buffers.color.setLocked(!0),c.buffers.depth.setLocked(!0),this.inverse?(o=0,i=1):(o=1,i=0),c.buffers.stencil.setTest(!0),c.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),c.buffers.stencil.setFunc(s.ALWAYS,o,4294967295),c.buffers.stencil.setClear(i),e.render(this.scene,this.camera,r,this.clear),e.render(this.scene,this.camera,t,this.clear),c.buffers.color.setLocked(!1),c.buffers.depth.setLocked(!1),c.buffers.stencil.setFunc(s.EQUAL,1,4294967295),c.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP)}}),M.ClearMaskPass=function(){M.Pass.call(this),this.needsSwap=!1},M.ClearMaskPass.prototype=g()(M.Pass.prototype),T()(M.ClearMaskPass.prototype,{render:function(e,t,r,n,a){e.state.buffers.stencil.setTest(!1)}});var _=r("uUaz");_.ShaderPass=function(e,t){_.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof _.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=_.UniformsUtils.clone(e.uniforms),this.material=new _.ShaderMaterial({defines:T()({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new _.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new _.Scene,this.quad=new _.Mesh(new _.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},_.ShaderPass.prototype=T()(g()(_.Pass.prototype),{constructor:_.ShaderPass,render:function(e,t,r,n,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}});var R=r("u3qd"),k=r("OzE+");r.d(t,"l",function(){return D}),r.d(t,"a",function(){return F}),r.d(t,"i",function(){return U}),r.d(t,"h",function(){return H}),r.d(t,"g",function(){return V}),r.d(t,"j",function(){return z}),r.d(t,"k",function(){return G}),r.d(t,"e",function(){return X}),r.d(t,"f",function(){return q}),r.d(t,"m",function(){return K}),r.d(t,"c",function(){return Y}),r.d(t,"b",function(){return j}),r.d(t,"d",function(){return N}),r.d(t,"n",function(){return W});var P=r("uUaz");P.DRACOLoader.setDecoderPath(window.FONTRE_PATH+"/js/libs/"),P.DRACOLoader.setDecoderConfig({type:"js"});var N=void 0;if(R.a.debug){var I=r("SYbq");(N=new I).showPanel(0),document.body.appendChild(N.dom)}var D=new P.Scene;D.background=new P.Color("#000"),D.fog=new P.Fog("#B2B2B2",400,1500);var F=new P.PerspectiveCamera,B=new P.CanvasRenderer;k.a.webgl&&(B=new P.WebGLRenderer({antialias:!0,precision:"highp",alpha:!0,powerPreference:"low-power",preserveDrawingBuffer:!1}));var G=B,U=new P.OrbitControls(F,G.domElement,{minDistance:500,maxDistance:900,customDistance:550,minPolarAngle:Math.PI/4,maxPolarAngle:Math.PI/2}),j=new P.Color,H=new P.Vector2,V=new P.Matrix4,z=new P.Raycaster,X=(new P.Sprite,new P.FileLoader),q=new P.FONTRELoader,W=new P.DRACOLoader,K=new P.TextureLoader,Y=new P.CubeTextureLoader;new P.Clock;K.setCrossOrigin("anonymous"),Y.setCrossOrigin("anonymous")},HhYg:function(e,t,r){"use strict";r("G71/"),r("uUaz")},JQBp:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("ZLEe"),a=r.n(n),o=r("hRKE"),i=r.n(o),s=r("IYkF"),c=r.n(s),l=r("rVsN"),u=r.n(l),p=r("uUaz");p.GLTFLoader=function(){function e(e){this.manager=void 0!==e?e:p.DefaultLoadingManager,this.dracoLoader=null}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,r,n){var a=this,o=void 0!==this.path?this.path:p.LoaderUtils.extractUrlBase(e);a.manager.itemStart(e);var i=function(t){n?n(t):console.error(t),a.manager.itemEnd(e),a.manager.itemError(e)},s=new p.FileLoader(a.manager);s.setResponseType("arraybuffer"),s.load(e,function(r){try{a.parse(r,o,function(r){t(r),a.manager.itemEnd(e)},i)}catch(e){i(e)}},r,i)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,a,i,c){var u,m={};if("string"==typeof e)u=e;else if(p.LoaderUtils.decodeText(new Uint8Array(e,0,4))===s){try{m[t.KHR_BINARY_GLTF]=new function(e){this.name=t.KHR_BINARY_GLTF,this.content=null,this.body=null;var r=new DataView(e,0,l);if(this.header={magic:p.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");var n=new DataView(e,l),a=0;for(;a<n.byteLength;){var o=n.getUint32(a,!0);a+=4;var i=n.getUint32(a,!0);if(a+=4,i===d.JSON){var c=new Uint8Array(e,l+a,o);this.content=p.LoaderUtils.decodeText(c)}else if(i===d.BIN){var u=l+a;this.body=e.slice(u,u+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}(e)}catch(e){return void(c&&c(e))}u=m[t.KHR_BINARY_GLTF].content}else u=p.LoaderUtils.decodeText(new Uint8Array(e));var v=JSON.parse(u);if(void 0===v.asset||v.asset.version[0]<2)c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(v.extensionsUsed)for(var g=0;g<v.extensionsUsed.length;++g){var b=v.extensionsUsed[g],y=v.extensionsRequired||[];switch(b){case t.KHR_LIGHTS_PUNCTUAL:m[b]=new n(v);break;case t.KHR_MATERIALS_UNLIT:m[b]=new o(v);break;case t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[b]=new f;break;case t.KHR_DRACO_MESH_COMPRESSION:m[b]=new h(v,this.dracoLoader);break;case t.MSFT_TEXTURE_DDS:m[t.MSFT_TEXTURE_DDS]=new r;break;default:y.indexOf(b)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}var w=new H(v,m,{path:a||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager});w.parse(function(e,t,r,n,a){var o={scene:e,scenes:t,cameras:r,animations:n,asset:a.asset,parser:w,userData:{}};I(m,o,a),i(o)},c)}}};var t={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(){if(!p.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=t.MSFT_TEXTURE_DDS,this.ddsLoader=new p.DDSLoader}function n(e){this.name=t.KHR_LIGHTS_PUNCTUAL,this.lights=[];for(var r=(e.extensions&&e.extensions[t.KHR_LIGHTS_PUNCTUAL]||{}).lights||[],n=0;n<r.length;n++){var a,o=r[n],i=new p.Color(16777215);void 0!==o.color&&i.fromArray(o.color);var s=void 0!==o.range?o.range:0;switch(o.type){case"directional":(a=new p.DirectionalLight(i)).target.position.set(0,0,1),a.add(a.target);break;case"point":(a=new p.PointLight(i)).distance=s;break;case"spot":(a=new p.SpotLight(i)).distance=s,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,1),a.add(a.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+o.type+'".')}a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=o.name||"light_"+n,this.lights.push(a)}}function o(e){this.name=t.KHR_MATERIALS_UNLIT}o.prototype.getMaterialType=function(e){return p.MeshBasicMaterial},o.prototype.extendParams=function(e,t,r){var n=[];e.color=new p.Color(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var o=a.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==a.baseColorTexture&&n.push(r.assignTexture(e,"map",a.baseColorTexture.index))}return u.a.all(n)};var s="glTF",l=12,d={JSON:1313821514,BIN:5130562};function h(e,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=t.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=r}function f(){return{name:t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return p.ShaderMaterial},extendParams:function(e,t,r){var n=t.extensions[this.name],a=p.ShaderLib.standard,o=p.UniformsUtils.clone(a.uniforms),i=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),d=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),h=a.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",i).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",d);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new p.Color).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},e.vertexShader=a.vertexShader,e.fragmentShader=h,e.uniforms=o,e.defines={STANDARD:""},e.color=new p.Color(1,1,1),e.opacity=1;var f=[];if(Array.isArray(n.diffuseFactor)){var m=n.diffuseFactor;e.color.fromArray(m),e.opacity=m[3]}if(void 0!==n.diffuseTexture&&f.push(r.assignTexture(e,"map",n.diffuseTexture.index)),e.emissive=new p.Color(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new p.Color(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var v=n.specularGlossinessTexture.index;f.push(r.assignTexture(e,"glossinessMap",v)),f.push(r.assignTexture(e,"specularMap",v))}return u.a.all(f)},createMaterial:function(e){var t=new p.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var r=this.specularGlossinessParams,n=0,a=r.length;n<a;n++)t[r[n]]=e[r[n]];return t},refreshUniforms:function(e,t,r,n,a,o){if(!0===a.isGLTFSpecularGlossinessMaterial){var i,s=a.uniforms,c=a.defines;s.opacity.value=a.opacity,s.diffuse.value.copy(a.color),s.emissive.value.copy(a.emissive).multiplyScalar(a.emissiveIntensity),s.map.value=a.map,s.specularMap.value=a.specularMap,s.alphaMap.value=a.alphaMap,s.lightMap.value=a.lightMap,s.lightMapIntensity.value=a.lightMapIntensity,s.aoMap.value=a.aoMap,s.aoMapIntensity.value=a.aoMapIntensity,a.map?i=a.map:a.specularMap?i=a.specularMap:a.displacementMap?i=a.displacementMap:a.normalMap?i=a.normalMap:a.bumpMap?i=a.bumpMap:a.glossinessMap?i=a.glossinessMap:a.alphaMap?i=a.alphaMap:a.emissiveMap&&(i=a.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),s.uvTransform.value.copy(i.matrix)),s.envMap.value=a.envMap,s.envMapIntensity.value=a.envMapIntensity,s.flipEnvMap.value=a.envMap&&a.envMap.isCubeTexture?-1:1,s.refractionRatio.value=a.refractionRatio,s.specular.value.copy(a.specular),s.glossiness.value=a.glossiness,s.glossinessMap.value=a.glossinessMap,s.emissiveMap.value=a.emissiveMap,s.bumpMap.value=a.bumpMap,s.normalMap.value=a.normalMap,s.displacementMap.value=a.displacementMap,s.displacementScale.value=a.displacementScale,s.displacementBias.value=a.displacementBias,null!==s.glossinessMap.value&&void 0===c.USE_GLOSSINESSMAP&&(c.USE_GLOSSINESSMAP="",c.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==c.USE_GLOSSINESSMAP&&(delete c.USE_GLOSSINESSMAP,delete c.USE_ROUGHNESSMAP)}}}}function m(e,t,r,n){p.Interpolant.call(this,e,t,r,n)}h.prototype.decodePrimitive=function(e,t){var r=this.json,n=this.dracoLoader,a=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,i={},s={},c={};for(var l in o)l in O&&(i[O[l]]=o[l]);for(l in e.attributes)if(void 0!==O[l]&&void 0!==o[l]){var p=r.accessors[e.attributes[l]],d=E[p.componentType];c[O[l]]=d,s[O[l]]=!0===p.normalized}return t.getDependency("bufferView",a).then(function(e){return new u.a(function(t){n.decodeDracoFile(e,function(e){for(var r in e.attributes){var n=e.attributes[r],a=s[r];void 0!==a&&(n.normalized=a)}t(e)},i,c)})})},m.prototype=c()(p.Interpolant.prototype),m.prototype.constructor=m,m.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,a=e*n*3+n,o=0;o!==n;o++)t[o]=r[a+o];return t},m.prototype.beforeStart_=m.prototype.copySampleValue_,m.prototype.afterEnd_=m.prototype.copySampleValue_,m.prototype.interpolate_=function(e,t,r,n){for(var a=this.resultBuffer,o=this.sampleValues,i=this.valueSize,s=2*i,c=3*i,l=n-t,u=(r-t)/l,p=u*u,d=p*u,h=e*c,f=h-c,m=2*d-3*p+1,v=d-2*p+u,g=-2*d+3*p,b=d-p,y=0;y!==i;y++){var w=o[f+y+i],x=o[f+y+s]*l,S=o[h+y+i],E=o[h+y]*l;a[y]=m*w+v*x+g*S+b*E}return a};var v=0,g=1,b=2,y=3,w=4,x=5,S=6,E=(Number,p.Matrix3,p.Matrix4,p.Vector2,p.Vector3,p.Vector4,p.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),T={9728:p.NearestFilter,9729:p.LinearFilter,9984:p.NearestMipMapNearestFilter,9985:p.LinearMipMapNearestFilter,9986:p.NearestMipMapLinearFilter,9987:p.LinearMipMapLinearFilter},A={33071:p.ClampToEdgeWrapping,33648:p.MirroredRepeatWrapping,10497:p.RepeatWrapping},C=(p.BackSide,p.FrontSide,p.NeverDepth,p.LessDepth,p.EqualDepth,p.LessEqualDepth,p.GreaterEqualDepth,p.NotEqualDepth,p.GreaterEqualDepth,p.AlwaysDepth,p.AddEquation,p.SubtractEquation,p.ReverseSubtractEquation,p.ZeroFactor,p.OneFactor,p.SrcColorFactor,p.OneMinusSrcColorFactor,p.SrcAlphaFactor,p.OneMinusSrcAlphaFactor,p.DstAlphaFactor,p.OneMinusDstAlphaFactor,p.DstColorFactor,p.OneMinusDstColorFactor,p.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),O={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},L={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},M={CUBICSPLINE:p.InterpolateSmooth,LINEAR:p.InterpolateLinear,STEP:p.InterpolateDiscrete},_="OPAQUE",R="MASK",k="BLEND",P={"image/png":p.RGBAFormat,"image/jpeg":p.RGBFormat};function N(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function I(e,t,r){for(var n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function D(e,t){void 0!==t.extras&&("object"===i()(t.extras)?e.userData=t.extras:console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function F(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(r=0,n=a.length;r<n;r++)e.morphTargetDictionary[a[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function B(e,t){if(a()(e).length!==a()(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}function G(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function U(e,t){for(var r=0,n=e.length;r<n;r++){var a=e[r];if(o=a.primitive,i=t,o.indices===i.indices&&B(o.attributes,i.attributes))return a.promise}var o,i;return null}function j(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,r=e.itemSize,n=e.array.slice(0,t*r),a=0;a<t;++a)n[a]=e.getX(a),r>=2&&(n[a+1]=e.getY(a)),r>=3&&(n[a+2]=e.getZ(a)),r>=4&&(n[a+3]=e.getW(a));return new p.BufferAttribute(n,r,e.normalized)}return e.clone()}function H(e,t,r){this.json=e||{},this.extensions=t||{},this.options=r||{},this.cache=new function(){var e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}},this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new p.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new p.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function V(e,t,r){var n=t.attributes;for(var a in n){var o=O[a],i=r[n[a]];o&&(o in e.attributes||e.addAttribute(o,i))}void 0===t.indices||e.index||e.setIndex(r[t.indices]),void 0!==t.targets&&function(e,t,r){for(var n=!1,a=!1,o=0,i=t.length;o<i&&(void 0!==(l=t[o]).POSITION&&(n=!0),void 0!==l.NORMAL&&(a=!0),!n||!a);o++);if(n||a){var s=[],c=[];for(o=0,i=t.length;o<i;o++){var l=t[o],u="morphTarget"+o;if(n){if(void 0!==l.POSITION){var p=j(r[l.POSITION]);p.name=u;for(var d=e.attributes.position,h=0,f=p.count;h<f;h++)p.setXYZ(h,p.getX(h)+d.getX(h),p.getY(h)+d.getY(h),p.getZ(h)+d.getZ(h))}else p=e.attributes.position;s.push(p)}if(a){if(void 0!==l.NORMAL){var m;(m=j(r[l.NORMAL])).name=u;var v=e.attributes.normal;for(h=0,f=m.count;h<f;h++)m.setXYZ(h,m.getX(h)+v.getX(h),m.getY(h)+v.getY(h),m.getZ(h)+v.getZ(h))}else m=e.attributes.normal;c.push(m)}}n&&(e.morphAttributes.position=s),a&&(e.morphAttributes.normal=c)}}(e,t.targets,r),D(e,t)}return H.prototype.parse=function(e,t){var r=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(t){var n=t.scenes||[],a=n[r.scene||0],o=t.animations||[],i=t.cameras||[];e(a,n,i,o,r)}).catch(t)},H.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n={},a={},o=0,i=t.length;o<i;o++)for(var s=t[o].joints,c=0,l=s.length;c<l;c++)e[s[c]].isBone=!0;for(var u=0,p=e.length;u<p;u++){var d=e[u];void 0!==d.mesh&&(void 0===n[d.mesh]&&(n[d.mesh]=a[d.mesh]=0),n[d.mesh]++,void 0!==d.skin&&(r[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=n,this.json.meshUses=a},H.prototype.getDependency=function(e,t){var r=e+":"+t,n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this.loadMesh(t);break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this.loadBufferView(t);break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this.loadMaterial(t);break;case"texture":n=this.loadTexture(t);break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n},H.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=u.a.all(n.map(function(t,n){return r.getDependency(e,n)})),this.cache.add(e,t)}return t},H.prototype.getMultiDependencies=function(e){for(var t={},r=[],n=0,a=e.length;n<a;n++){var o=e[n],i=this.getDependencies(o);i=i.then(function(e,r){t[e]=r}.bind(this,o+("mesh"===o?"es":"s"))),r.push(i)}return u.a.all(r).then(function(){return t})},H.prototype.loadBuffer=function(e){var r=this.json.buffers[e],n=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===e)return u.a.resolve(this.extensions[t.KHR_BINARY_GLTF].body);var a=this.options;return new u.a(function(e,t){n.load(N(r.uri,a.path),e,void 0,function(){t(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})},H.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)})},H.prototype.loadAccessor=function(e){var t=this,r=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return null;var a=[];return void 0!==n.bufferView?a.push(this.getDependency("bufferView",n.bufferView)):a.push(null),void 0!==n.sparse&&(a.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",n.sparse.values.bufferView))),u.a.all(a).then(function(e){var a,o,i=e[0],s=C[n.type],c=E[n.componentType],l=c.BYTES_PER_ELEMENT,u=l*s,d=n.byteOffset||0,h=void 0!==n.bufferView?r.bufferViews[n.bufferView].byteStride:void 0,f=!0===n.normalized;if(h&&h!==u){var m="InterleavedBuffer:"+n.bufferView+":"+n.componentType,v=t.cache.get(m);v||(a=new c(i),v=new p.InterleavedBuffer(a,h/l),t.cache.add(m,v)),o=new p.InterleavedBufferAttribute(v,s,d/l,f)}else a=null===i?new c(n.count*s):new c(i,d,n.count*s),o=new p.BufferAttribute(a,s,f);if(void 0!==n.sparse){var g=C.SCALAR,b=E[n.sparse.indices.componentType],y=n.sparse.indices.byteOffset||0,w=n.sparse.values.byteOffset||0,x=new b(e[1],y,n.sparse.count*g),S=new c(e[2],w,n.sparse.count*s);null!==i&&o.setArray(o.array.slice());for(var T=0,A=x.length;T<A;T++){var O=x[T];if(o.setX(O,S[T*s]),s>=2&&o.setY(O,S[T*s+1]),s>=3&&o.setZ(O,S[T*s+2]),s>=4&&o.setW(O,S[T*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o})},H.prototype.loadTexture=function(e){var r,n=this,a=this.json,o=this.options,i=this.textureLoader,s=window.URL||window.webkitURL,c=a.textures[e],l=c.extensions||{},d=(r=l[t.MSFT_TEXTURE_DDS]?a.images[l[t.MSFT_TEXTURE_DDS].source]:a.images[c.source]).uri,h=!1;return void 0!==r.bufferView&&(d=n.getDependency("bufferView",r.bufferView).then(function(e){h=!0;var t=new Blob([e],{type:r.mimeType});return d=s.createObjectURL(t)})),u.a.resolve(d).then(function(e){var r=p.Loader.Handlers.get(e);return r||(r=l[t.MSFT_TEXTURE_DDS]?n.extensions[t.MSFT_TEXTURE_DDS].ddsLoader:i),new u.a(function(t,n){r.load(N(e,o.path),t,void 0,n)})}).then(function(e){!0===h&&s.revokeObjectURL(d),e.flipY=!1,void 0!==c.name&&(e.name=c.name),r.mimeType in P&&(e.format=P[r.mimeType]);var t=(a.samplers||{})[c.sampler]||{};return e.magFilter=T[t.magFilter]||p.LinearFilter,e.minFilter=T[t.minFilter]||p.LinearMipMapLinearFilter,e.wrapS=A[t.wrapS]||p.RepeatWrapping,e.wrapT=A[t.wrapT]||p.RepeatWrapping,e})},H.prototype.assignTexture=function(e,t,r){return this.getDependency("texture",r).then(function(r){e[t]=r})},H.prototype.loadMaterial=function(e){var r,n=this.json,a=this.extensions,o=n.materials[e],i={},s=o.extensions||{},c=[];if(s[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=a[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];r=l.getMaterialType(o),c.push(l.extendParams(i,o,this))}else if(s[t.KHR_MATERIALS_UNLIT]){var d=a[t.KHR_MATERIALS_UNLIT];r=d.getMaterialType(o),c.push(d.extendParams(i,o,this))}else{r=p.MeshStandardMaterial;var h=o.pbrMetallicRoughness||{};if(i.color=new p.Color(1,1,1),i.opacity=1,Array.isArray(h.baseColorFactor)){var f=h.baseColorFactor;i.color.fromArray(f),i.opacity=f[3]}if(void 0!==h.baseColorTexture&&c.push(this.assignTexture(i,"map",h.baseColorTexture.index)),i.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,i.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture){var m=h.metallicRoughnessTexture.index;c.push(this.assignTexture(i,"metalnessMap",m)),c.push(this.assignTexture(i,"roughnessMap",m))}}!0===o.doubleSided&&(i.side=p.DoubleSide);var v=o.alphaMode||_;return v===k?i.transparent=!0:(i.transparent=!1,v===R&&(i.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&r!==p.MeshBasicMaterial&&(c.push(this.assignTexture(i,"normalMap",o.normalTexture.index)),i.normalScale=new p.Vector2(1,1),void 0!==o.normalTexture.scale&&i.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&r!==p.MeshBasicMaterial&&(c.push(this.assignTexture(i,"aoMap",o.occlusionTexture.index)),void 0!==o.occlusionTexture.strength&&(i.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&r!==p.MeshBasicMaterial&&(i.emissive=(new p.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&r!==p.MeshBasicMaterial&&c.push(this.assignTexture(i,"emissiveMap",o.emissiveTexture.index)),u.a.all(c).then(function(){var e;return e=r===p.ShaderMaterial?a[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(i):new r(i),void 0!==o.name&&(e.name=o.name),e.normalScale&&(e.normalScale.y=-e.normalScale.y),e.map&&(e.map.encoding=p.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=p.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=p.sRGBEncoding),D(e,o),o.extensions&&I(a,e,o),e})},H.prototype.loadGeometries=function(e){var r,n=this,a=this.extensions,o=this.primitiveCache,i=function(e){if(e.length<2)return!1;var t=e[0],r=t.targets||[];if(void 0===t.indices)return!1;for(var n=1,a=e.length;n<a;n++){var o=e[n];if(t.mode!==o.mode)return!1;if(void 0===o.indices)return!1;if(!B(t.attributes,o.attributes))return!1;var i=o.targets||[];if(r.length!==i.length)return!1;for(var s=0,c=r.length;s<c;s++)if(!B(r[s],i[s]))return!1}return!0}(e);return i&&(r=e,e=[e[0]]),this.getDependencies("accessor").then(function(s){for(var c=[],l=0,d=e.length;l<d;l++){var h=e[l],f=U(o,h);if(f)c.push(f);else if(h.extensions&&h.extensions[t.KHR_DRACO_MESH_COMPRESSION]){var m=a[t.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,n).then(function(e){return V(e,h,s),e});o.push({primitive:h,promise:m}),c.push(m)}else{var v=new p.BufferGeometry;V(v,h,s);m=u.a.resolve(v);o.push({primitive:h,promise:m}),c.push(m)}}return u.a.all(c).then(function(t){if(i){var a=t[0];if(null!==(b=function(e,t,r){for(var n=0,a=e.length;n<a;n++){var o=e[n];if(t===o.baseGeometry&&G(r,o.primitives))return o.geometry}return null}(g=n.multiPassGeometryCache,a,r)))return[b.geometry];var o=new p.BufferGeometry;for(var c in o.name=a.name,o.userData=a.userData,a.attributes)o.addAttribute(c,a.attributes[c]);for(var c in a.morphAttributes)o.morphAttributes[c]=a.morphAttributes[c];for(var l=[],u=0,d=0,h=r.length;d<h;d++){for(var f=s[r[d].indices],m=0,v=f.count;m<v;m++)l.push(f.array[m]);o.addGroup(u,f.count,d),u+=f.count}return o.setIndex(l),g.push({geometry:o,baseGeometry:a,primitives:r}),[o]}if(t.length>1&&void 0!==p.BufferGeometryUtils){for(d=1,h=e.length;d<h;d++)if(e[0].mode!==e[d].mode)return t;var g,b;if(b=function(e,t){for(var r=0,n=e.length;r<n;r++){var a=e[r];if(G(t,a.baseGeometries))return a.geometry}return null}(g=n.multiplePrimitivesCache,t)){if(null!==b.geometry)return[b.geometry]}else{o=p.BufferGeometryUtils.mergeBufferGeometries(t,!0);if(g.push({geometry:o,baseGeometries:t}),null!==o)return[o]}}return t})})},H.prototype.loadMesh=function(e){var r=this,n=this.json,o=this.extensions,i=n.meshes[e];return this.getMultiDependencies(["accessor","material"]).then(function(n){for(var s=i.primitives,c=[],l=0,u=s.length;l<u;l++)c[l]=void 0===s[l].material?new p.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:p.FrontSide}):n.materials[s[l].material];return r.loadGeometries(s).then(function(n){for(var l=1===n.length&&n[0].groups.length>0,u=[],d=0,h=n.length;d<h;d++){var f,m=n[d],E=s[d],T=l?c:c[d];if(E.mode===w||E.mode===x||E.mode===S||void 0===E.mode)f=!0===i.isSkinnedMesh?new p.SkinnedMesh(m,T):new p.Mesh(m,T),E.mode===x?f.drawMode=p.TriangleStripDrawMode:E.mode===S&&(f.drawMode=p.TriangleFanDrawMode);else if(E.mode===g)f=new p.LineSegments(m,T);else if(E.mode===y)f=new p.Line(m,T);else if(E.mode===b)f=new p.LineLoop(m,T);else{if(E.mode!==v)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);f=new p.Points(m,T)}a()(f.geometry.morphAttributes).length>0&&F(f,i),f.name=i.name||"mesh_"+e,n.length>1&&(f.name+="_"+d),D(f,i),u.push(f);for(var A=l?f.material:[f.material],C=void 0!==m.attributes.color,O=void 0===m.attributes.normal,L=!0===f.isSkinnedMesh,M=a()(m.morphAttributes).length>0,_=M&&void 0!==m.morphAttributes.normal,R=0,k=A.length;R<k;R++){T=A[R];if(f.isPoints){var P="PointsMaterial:"+T.uuid,N=r.cache.get(P);N||(N=new p.PointsMaterial,p.Material.prototype.copy.call(N,T),N.color.copy(T.color),N.map=T.map,N.lights=!1,r.cache.add(P,N)),T=N}else if(f.isLine){P="LineBasicMaterial:"+T.uuid;var I=r.cache.get(P);I||(I=new p.LineBasicMaterial,p.Material.prototype.copy.call(I,T),I.color.copy(T.color),I.lights=!1,r.cache.add(P,I)),T=I}if(C||O||L||M){P="ClonedMaterial:"+T.uuid+":";T.isGLTFSpecularGlossinessMaterial&&(P+="specular-glossiness:"),L&&(P+="skinning:"),C&&(P+="vertex-colors:"),O&&(P+="flat-shading:"),M&&(P+="morph-targets:"),_&&(P+="morph-normals:");var B=r.cache.get(P);B||(B=T.isGLTFSpecularGlossinessMaterial?o[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(T):T.clone(),L&&(B.skinning=!0),C&&(B.vertexColors=p.VertexColors),O&&(B.flatShading=!0),M&&(B.morphTargets=!0),_&&(B.morphNormals=!0),r.cache.add(P,B)),T=B}A[R]=T,T.aoMap&&void 0===m.attributes.uv2&&void 0!==m.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),m.addAttribute("uv2",new p.BufferAttribute(m.attributes.uv.array,2))),T.isGLTFSpecularGlossinessMaterial&&(f.onBeforeRender=o[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}f.material=l?A:A[0]}if(1===u.length)return u[0];var G=new p.Group;for(d=0,h=u.length;d<h;d++)G.add(u[d]);return G})})},H.prototype.loadCamera=function(e){var t,r=this.json.cameras[e],n=r[r.type];if(n)return"perspective"===r.type?t=new p.PerspectiveCamera(p.Math.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(t=new p.OrthographicCamera(n.xmag/-2,n.xmag/2,n.ymag/2,n.ymag/-2,n.znear,n.zfar)),void 0!==r.name&&(t.name=r.name),D(t,r),u.a.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},H.prototype.loadSkin=function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?u.a.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return r.inverseBindMatrices=e,r})},H.prototype.loadAnimation=function(e){var t=this.json.animations[e];return this.getMultiDependencies(["accessor","node"]).then(function(r){for(var n=[],a=0,o=t.channels.length;a<o;a++){var i=t.channels[a],s=t.samplers[i.sampler];if(s){var c=i.target,l=void 0!==c.node?c.node:c.id,u=void 0!==t.parameters?t.parameters[s.input]:s.input,d=void 0!==t.parameters?t.parameters[s.output]:s.output,h=r.accessors[u],f=r.accessors[d],v=r.nodes[l];if(v){var g;switch(v.updateMatrix(),v.matrixAutoUpdate=!0,L[c.path]){case L.weights:g=p.NumberKeyframeTrack;break;case L.rotation:g=p.QuaternionKeyframeTrack;break;case L.position:case L.scale:default:g=p.VectorKeyframeTrack}var b=v.name?v.name:v.uuid,y=void 0!==s.interpolation?M[s.interpolation]:p.InterpolateLinear,w=[];L[c.path]===L.weights?v.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&w.push(e.name?e.name:e.uuid)}):w.push(b);for(var x=0,S=w.length;x<S;x++){var E=new g(w[x]+"."+L[c.path],p.AnimationUtils.arraySlice(h.array,0),p.AnimationUtils.arraySlice(f.array,0),y);"CUBICSPLINE"===s.interpolation&&(E.createInterpolant=function(e){return new m(this.times,this.values,this.getValueSize()/3,e)},E.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),n.push(E)}}}}l=void 0!==t.name?t.name:"animation_"+e;return new p.AnimationClip(l,void 0,n)})},H.prototype.loadNode=function(e){var r=this.json,n=this.extensions,a=r.meshReferences,o=r.meshUses,i=r.nodes[e];return this.getMultiDependencies(["mesh","skin","camera","light"]).then(function(e){var r;if(!0===i.isBone)r=new p.Bone;else if(void 0!==i.mesh){var s=e.meshes[i.mesh];if(a[i.mesh]>1){var c=o[i.mesh]++;(r=s.clone()).name+="_instance_"+c,r.onBeforeRender=s.onBeforeRender;for(var l=0,u=r.children.length;l<u;l++)r.children[l].name+="_instance_"+c,r.children[l].onBeforeRender=s.children[l].onBeforeRender}else r=s}else if(void 0!==i.camera)r=e.cameras[i.camera];else if(i.extensions&&i.extensions[t.KHR_LIGHTS_PUNCTUAL]&&void 0!==i.extensions[t.KHR_LIGHTS_PUNCTUAL].light){r=n[t.KHR_LIGHTS_PUNCTUAL].lights[i.extensions[t.KHR_LIGHTS_PUNCTUAL].light]}else r=new p.Object3D;if(void 0!==i.name&&(r.name=p.PropertyBinding.sanitizeNodeName(i.name)),D(r,i),i.extensions&&I(n,r,i),void 0!==i.matrix){var d=new p.Matrix4;d.fromArray(i.matrix),r.applyMatrix(d)}else void 0!==i.translation&&r.position.fromArray(i.translation),void 0!==i.rotation&&r.quaternion.fromArray(i.rotation),void 0!==i.scale&&r.scale.fromArray(i.scale);return r})},H.prototype.loadScene=function(){function e(t,r,n,a,o){var i=a[t],s=n.nodes[t];if(void 0!==s.skin)for(var c=!0===i.isGroup?i.children:[i],l=0,u=c.length;l<u;l++){for(var d=c[l],h=o[s.skin],f=[],m=[],v=0,g=h.joints.length;v<g;v++){var b=h.joints[v],y=a[b];if(y){f.push(y);var w=new p.Matrix4;void 0!==h.inverseBindMatrices&&w.fromArray(h.inverseBindMatrices.array,16*v),m.push(w)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',b)}d.bind(new p.Skeleton(f,m),d.matrixWorld)}if(r.add(i),s.children){var x=s.children;for(l=0,u=x.length;l<u;l++){e(x[l],i,n,a,o)}}}return function(t){var r=this.json,n=this.extensions,a=this.json.scenes[t];return this.getMultiDependencies(["node","skin"]).then(function(t){var o=new p.Scene;void 0!==a.name&&(o.name=a.name),D(o,a),a.extensions&&I(n,o,a);for(var i=a.nodes||[],s=0,c=i.length;s<c;s++)e(i[s],o,r,t.nodes,t.skins);return o})}}(),e}()},JpL0:function(e,t){e.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},LCLg:function(e,t,r){"use strict";(function(e){var n,a,o,i,s=r("ZLEe"),c=r.n(s),l=r("HzJ8"),u=r.n(l),p=r("lC5x"),d=r.n(p),h=r("J0Oq"),f=r.n(h),m=r("u3qd"),v=r("YgqK"),g=r("kWYd"),b=r("hDu7"),y=r("9ZL/"),w=r("dlDQ"),x=r("G71/"),S=r("kJPP"),E=r("Xxek"),T=r("Edne"),A=(r("HhYg"),r("OLR1"),r("nc2e")),C=(r("Z62A"),r("d/bP")),O=this,L={initGL:v.a,animation:g.a,hideShade:A.b,showSize:C.b,showModel:(i=f()(d.a.mark(function e(t,r){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(v.a)(t),Object(g.a)(),!(m.a.loadedCar===r&&m.a.sceneCache.length>0)){e.next=6;break}x.l.children=m.a.sceneCache,e.next=12;break;case 6:return e.t0=T.a,e.next=9,Object(w.f)(r);case 9:return e.t1=e.sent,e.next=12,(0,e.t0)(e.t1);case 12:case"end":return e.stop()}},e,O)})),function(e,t){return i.apply(this,arguments)}),changeCarShaderColor:(o=f()(d.a.mark(function t(r){var n,a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=""+Object(w.c)()+r,a=void 0,e&&Object({NODE_ENV:"production"}),t.next=7;break;case 4:a=t.sent,t.next=10;break;case 7:return t.next=9,S.a.ftrn(n);case 9:a=t.sent;case 10:a.forEach(function(){var e=f()(d.a.mark(function e(t){var r,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=x.l.getObjectByName(t.name))){e.next=5;break}return n=r.material.uniforms.paintColor1.value,e.next=5,Object(w.a)(n,Object(w.b)(t.color1),200);case 5:case"end":return e.stop()}},e,O)}));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return t.stop()}},t,O)})),function(e){return o.apply(this,arguments)}),changeMaterials:(a=f()(d.a.mark(function t(r){var n,a,o,i,s,c,l,p,h,f,v,g,b,T,A,C,L;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(m.a.carCode){t.next=2;break}throw Error("carCode not found! (Function: changeMaterials)");case 2:for(n=void 0,a=!0,o=!1,i=void 0,t.prev=6,s=u()(y.a[m.a.carCode].interiorColors);!(a=(c=s.next()).done);a=!0)(l=c.value).colorCode===r&&(n=l.data);t.next=14;break;case 10:t.prev=10,t.t0=t.catch(6),o=!0,i=t.t0;case 14:t.prev=14,t.prev=15,!a&&s.return&&s.return();case 17:if(t.prev=17,!o){t.next=20;break}throw i;case 20:return t.finish(17);case 21:return t.finish(14);case 22:if(n){t.next=24;break}return t.abrupt("return",console.warn("InteriorColor is not found"));case 24:p=""+Object(w.c)()+n,h=void 0,e&&Object({NODE_ENV:"production"}),t.next=31;break;case 28:h=t.sent,t.next=34;break;case 31:return t.next=33,S.a.ftrn(p);case 33:h=t.sent;case 34:f=!0,v=!1,g=void 0,t.prev=37,b=u()(h);case 39:if(f=(T=b.next()).done){t.next=49;break}return A=T.value,t.next=43,Object(E.a)(A);case 43:C=t.sent,(L=x.l.getObjectByName(A.name))&&(L.material=C);case 46:f=!0,t.next=39;break;case 49:t.next=55;break;case 51:t.prev=51,t.t1=t.catch(37),v=!0,g=t.t1;case 55:t.prev=55,t.prev=56,!f&&b.return&&b.return();case 58:if(t.prev=58,!v){t.next=61;break}throw g;case 61:return t.finish(58);case 62:return t.finish(55);case 63:case"end":return t.stop()}},t,O,[[6,10,14,22],[15,,17,21],[37,51,55,63],[56,,58,62]])})),function(e){return a.apply(this,arguments)}),openLFDoor:function(){var e=this;return f()(d.a.mark(function t(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.b)();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t,e)}))()},modelSwitching:(n=f()(d.a.mark(function e(t){var r,n,a,o,i,s,c,l,p,h;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)();case 2:if(!(r=e.sent).hasOwnProperty("ModelSwitching")){e.next=41;break}if(n=r.ModelSwitching[t]){e.next=7;break}throw Error(t+" is not found!(Function: fontregl.modelSwitching)");case 7:a=!0,o=!1,i=void 0,e.prev=10,s=u()(n);case 12:if(a=(c=s.next()).done){e.next=27;break}if(l=c.value,!(p=x.l.getObjectByName(l.name))){e.next=24;break}if(!l.type){e.next=23;break}return e.next=19,Object(E.a)(l);case 19:h=e.sent,p.material=h,e.next=24;break;case 23:p.material.visible=l.visible;case 24:a=!0,e.next=12;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(10),o=!0,i=e.t0;case 33:e.prev=33,e.prev=34,!a&&s.return&&s.return();case 36:if(e.prev=36,!o){e.next=39;break}throw i;case 39:return e.finish(36);case 40:return e.finish(33);case 41:case"end":return e.stop()}},e,O,[[10,29,33,41],[34,,36,40]])})),function(e){return n.apply(this,arguments)}),switchWheelAnimation:function(e,t){m.a.isRotateWheel=e,m.a.rotateWheelSpeed=t;var r=!0,n=!1,a=void 0;try{for(var o,i=u()(c()(m.a.spriteState));!(r=(o=i.next()).done);r=!0){var s=o.value;x.l.getObjectByName(s).visible=!m.a.isRotateWheel}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}m.a.isRotateWheel&&C.a.closeAllDoor()},cancelAnimation:function(){"number"==typeof m.a.animateId&&(cancelAnimationFrame(m.a.animateId),m.a.animateId=null)},resize:function(e,t){x.a.aspect=e/t,x.a.updateProjectionMatrix(),x.k.setSize(e,t)},dispose:function(){this.cancelAnimation();for(var e=0;e<x.l.children.length;e++)console.log("remove"),x.l.children[e].material&&x.l.children[e].material.dispose(),x.l.children[e].geometry&&x.l.children[e].geometry.dispose(),x.l.remove(x.l.children[e]),e--;for(var t in console.log(x.l),m.a.textureCache)m.a.textureCache[t].dispose(),delete m.a.textureCache[t];for(var r in m.a.hotSpotState)delete m.a.hotSpotState[r]},changeView:function(e){this.modelSwitching(e)},openLights:function(e){var t=this;return f()(d.a.mark(function r(){var n,a,o,i,s,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.f)();case 2:for(n=t.sent,a=n.SpriteLights,m.a.isOpenLight=e,o=0,i=a.length;o<i;o++)s=x.l.getObjectByName("light_l_"+o),c=x.l.getObjectByName("light_r_"+o),s.visible=m.a.isOpenLight,c.visible=m.a.isOpenLight;x.l.getObjectByName("12_headlighting_glass.drc").visible=!m.a.isOpenLight;case 8:case"end":return t.stop()}},r,t)}))()},resetCamera:function(){var e=this;return f()(d.a.mark(function t(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)(!0);case 2:return e.next=4,Object(b.c)();case 4:case"end":return e.stop()}},t,e)}))()},showSellPoint:function(e){var t=this;return f()(d.a.mark(function r(){var n,a,o,i,s;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.f)();case 2:n=t.sent,a=n.Sprites,m.a.isShowSellPoints=e,o=0,i=0,s=a.length;case 7:if(!(i<s)){t.next=18;break}if(!(++o<=2)){t.next=14;break}x.l.getObjectByName("spark_tip_0"+o).visible=m.a.isShowSellPoints,t.next=15;break;case 14:return t.abrupt("break",18);case 15:i++,t.next=7;break;case 18:case"end":return t.stop()}},r,t)}))()}};t.a=L}).call(t,r("V0EG"))},OLR1:function(e,t,r){"use strict";r.d(t,"a",function(){return v}),r.d(t,"b",function(){return g});var n,a,o,i=r("HzJ8"),s=r.n(i),c=r("lC5x"),l=r.n(c),u=r("J0Oq"),p=r.n(u),d=r("G71/"),h=r("dlDQ"),f=r("u3qd"),m=(r("4mrR"),r("Z62A"),r("uUaz")),v=(n=p()(l.a.mark(function e(){var t,r,n,a,o,i,s,c,u,p,f,v,g,b;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.f)();case 2:for(t=e.sent,r=t.SpriteLights,a=0,o=(n=r).length;a<o;a++)i=n[a],s=new m.SpriteMaterial({transparent:!0,blending:m.AdditiveBlending,needsUpdate:!0}),c=new m.Sprite(s),u=new m.Sprite(s),"front"===i.type&&(p=i.size,f=d.m.load(Object(h.c)()+"textures/"+i.imgPath),c.material.map=f,c.scale.set(p,p,p),c.position.set(i.pos[0],i.pos[2]-81,-i.pos[1]),u.material.map=f,u.scale.set(p,p,p),u.position.set(i.pos[0],i.pos[2]-81,- -i.pos[1])),"back"===i.type&&(v=i.size,g=d.m.load(Object(h.c)()+"textures/"+i.imgPath),c.material.map=g,c.scale.set(v,v,v),c.position.set(i.pos[0],i.pos[2]-80,-i.pos[1]),u.material.map=g,u.scale.set(v,v,v),u.position.set(i.pos[0],i.pos[2]-80,- -i.pos[1])),c.name="light_l_"+a,u.name="light_r_"+a,c.visible=!1,u.visible=!1,i.follow?"38_trunk_light_map_c.drc"===i.follow&&((b=d.l.getObjectByName("38_trunk_light_map_c.drc")).add(c),b.add(u)):(d.l.add(c),d.l.add(u));case 6:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),g=(a=p()(l.a.mark(function e(t){var r,n,a,o,i,c,u,p,f,m,v,g,b,y,w,x,S,E,T;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="headlight_map_c.png",n="headlight_map_c.jpg",a=d.m.load(Object(h.c)()+"textures/"+r),o=d.m.load(Object(h.c)()+"textures/"+n),i=["61_lighting_map_c.drc","38_trunk_light_map_c.drc"],!t){e.next=27;break}for(c=!0,u=!1,p=void 0,e.prev=9,f=s()(i);!(c=(m=f.next()).done);c=!0)v=m.value,(g=d.l.getObjectByName(v)).material.map=a,g.material.needsUpdate=!0;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),u=!0,p=e.t0;case 17:e.prev=17,e.prev=18,!c&&f.return&&f.return();case 20:if(e.prev=20,!u){e.next=23;break}throw p;case 23:return e.finish(20);case 24:return e.finish(17);case 25:e.next=46;break;case 27:for(b=!0,y=!1,w=void 0,e.prev=30,x=s()(i);!(b=(S=x.next()).done);b=!0)E=S.value,(T=d.l.getObjectByName(E)).material.map=o,T.material.needsUpdate=!0;e.next=38;break;case 34:e.prev=34,e.t1=e.catch(30),y=!0,w=e.t1;case 38:e.prev=38,e.prev=39,!b&&x.return&&x.return();case 41:if(e.prev=41,!y){e.next=44;break}throw w;case 44:return e.finish(41);case 45:return e.finish(38);case 46:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24],[30,34,38,46],[39,,41,45]])})),o=p()(l.a.mark(function e(){var t,r,n,a,o,i,s,c,u,p,v,g,b;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.f)();case 2:return t=e.sent,r=t.Floor,e.next=6,Object(h.f)();case 6:n=e.sent,n.FogSky,r&&(a=r.repeat,o=a.x,i=a.y,s=r.size,c=s.width,u=s.height,(p=(new m.TextureLoader).load(window.FONTRE_PATH+"/project/"+f.a.carCode+"/assets/textures/"+r.name)).wrapS=p.wrapT=m.RepeatWrapping,p.repeat.set(o,i),v=new m.PlaneGeometry(c,u),g=new m.MeshStandardMaterial({color:r.color,map:p,roughness:1,side:m.DoubleSide}),(b=new m.Mesh(v,g)).name=r.name,b.rotateX(Math.PI/2),b.position.set(0,-81,0),d.l.add(b));case 9:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},"OzE+":function(e,t,r){"use strict";var n={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),webgl2:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,r,a;t=void 0!==(e=e||{}).parent?e.parent:document.body,r=void 0!==e.id?e.id:"oldie",(a=n.getWebGLErrorMessage()).id=r,t.appendChild(a)}};t.a=n},SYbq:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t,n,a=r("hRKE"),o=r.n(a);t=this,n=function(){var e=function e(){var t=0,r=document.createElement("div");function n(e){return r.appendChild(e.dom),e}function a(e){for(var n=0;n<r.children.length;n++)r.children[n].style.display=n===e?"block":"none";t=e}r.style.cssText="position:fixed;bottom:0;left:0;cursor:pointer;opacity:0.9;z-index:10000;",r.addEventListener("click",function(e){e.preventDefault(),a(++t%r.children.length)},!1);var o=(performance||Date).now(),i=o,s=0,c=n(new e.Panel("FPS","#0ff","#002")),l=n(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=n(new e.Panel("MB","#f08","#201"));return a(0),{REVISION:16,dom:r,addPanel:n,showPanel:a,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(l.update(e-o,200),e>i+1e3&&(c.update(1e3*s/(e-i),100),i=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:r,setMode:a}};return e.Panel=function(e,t,r){var n=1/0,a=0,o=Math.round,i=o(window.devicePixelRatio||1),s=80*i,c=48*i,l=3*i,u=2*i,p=3*i,d=15*i,h=74*i,f=30*i,m=document.createElement("canvas");m.width=s,m.height=c,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*i+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=r,v.fillRect(0,0,s,c),v.fillStyle=t,v.fillText(e,l,u),v.fillRect(p,d,h,f),v.fillStyle=r,v.globalAlpha=.9,v.fillRect(p,d,h,f),{dom:m,update:function(c,g){n=Math.min(n,c),a=Math.max(a,c),v.fillStyle=r,v.globalAlpha=1,v.fillRect(0,0,s,d),v.fillStyle=t,v.fillText(o(c)+" "+e+" ("+o(n)+"-"+o(a)+")",l,u),v.drawImage(m,p+i,d,h-i,f,p,d,h-i,f),v.fillRect(p+h-i,d,i,f),v.fillStyle=r,v.globalAlpha=.9,v.fillRect(p+h-i,d,i,o((1-c/g)*f))}}},e},"object"===("undefined"==typeof exports?"undefined":o()(exports))&&void 0!==e?e.exports=n():"function"==typeof define&&r("Ycmu")?define(n):t.Stats=n()}.call(t,r("VC+f")(e))},"SZ/R":function(e,t,r){"use strict";r.d(t,"a",function(){return A}),r.d(t,"b",function(){return C});var n,a,o=r("rVsN"),i=r.n(o),s=r("KH7x"),c=r.n(s),l=r("lC5x"),u=r.n(l),p=r("HzJ8"),d=r.n(p),h=r("J0Oq"),f=r.n(h),m=r("G71/"),v=r("dlDQ"),g=r("u3qd"),b=(r("hDu7"),n=f()(u.a.mark(function e(t){var r,n,a,o,s,l,p,h,f,b,w;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=2;break}return e.abrupt("return");case 2:if(r=t.models,n=t.name,a=t.electricDoor,o=void 0,g.a.hotSpotState[n]=!g.a.hotSpotState[n],console.log(n),"open_sunroof"!==n){e.next=9;break}return e.next=8,T[t.function](t);case 8:return e.abrupt("return",e.sent);case 9:if(!t.blackLine){e.next=29;break}for(s=!0,l=!1,p=void 0,e.prev=13,h=d()(t.blackLine);!(s=(f=h.next()).done);s=!0)b=f.value,m.l.getObjectByName(b).visible=!g.a.hotSpotState[n];e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),l=!0,p=e.t0;case 21:e.prev=21,e.prev=22,!s&&h.return&&h.return();case 24:if(e.prev=24,!l){e.next=27;break}throw p;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return w=[],E=!0,r.forEach(function(e){var t=m.l.getObjectByName(e.name);if(t){g.a.spriteState[e.name]instanceof y.Sprite&&(g.a.spriteState[e.name].visible=!g.a.hotSpotState[n]);var r=g.a.hotSpotState[n]?e.targetAngle.map(function(e){return-Math.PI*e/180}):[0,0,0],i=c()(r,3),s=i[0],l=i[1],u=i[2];if(!g.a.hotSpotState[n]&&a){var p=e.targetAngle.map(function(e){return-Math.PI*(e/10)/180}),d=c()(p,3);s=d[0],l=d[1],u=d[2],o=function(){return Object(v.a)(t.rotation,{x:0,y:0,z:0},300,S)}}w.push(Object(v.a)(t.rotation,{x:s,y:l,z:u},800,x,o))}}),e.next=34,i.a.all(w);case 34:E=!1;case 35:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28]])})),function(e){return n.apply(this,arguments)}),y=r("uUaz"),w=r("V2Z7"),x=w.Easing.Circular.Out,S=w.Easing.Circular.In,E=null,T={openSunroof:function(e){var t=this;return f()(u.a.mark(function r(){var n,a,o,i,s,c,l,p,h;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!E){t.next=2;break}return t.abrupt("return");case 2:n=m.l.getObjectByName("00_sunroof_tip"),a=Math.PI/180*6,E=!0,o=!0,i=!1,s=void 0,t.prev=8,c=d()(e.models);case 10:if(o=(l=c.next()).done){t.next=31;break}if(p=l.value,h=m.l.getObjectByName(p.name),!g.a.hotSpotState[e.name]){t.next=22;break}return t.next=16,Object(v.a)(h.position,{y:h.position.y+1},300);case 16:return Object(v.a)(h.rotation,{z:-a},1500),Object(v.a)(n.position,{x:h.position.x+40},1500),t.next=20,Object(v.a)(h.position,{x:h.position.x+40},1500);case 20:t.next=28;break;case 22:return Object(v.a)(h.rotation,{z:0},1500),Object(v.a)(n.position,{x:h.position.x-40},1500),t.next=26,Object(v.a)(h.position,{x:h.position.x-40},1500);case 26:return t.next=28,Object(v.a)(h.position,{y:h.position.y-1},300);case 28:o=!0,t.next=10;break;case 31:t.next=37;break;case 33:t.prev=33,t.t0=t.catch(8),i=!0,s=t.t0;case 37:t.prev=37,t.prev=38,!o&&c.return&&c.return();case 40:if(t.prev=40,!i){t.next=43;break}throw s;case 43:return t.finish(40);case 44:return t.finish(37);case 45:E=!1;case 46:case"end":return t.stop()}},r,t,[[8,33,37,45],[38,,40,44]])}))()}},A=function(e,t){t.preventDefault();var r=t.offsetX/e.clientWidth*2-1,n=-t.offsetY/e.clientHeight*2+1;m.h.set(r,n),m.j.setFromCamera(m.h,m.a);var a=m.j.intersectObjects(m.l.children,!0);if(a.length>0)for(var o=0;o<a.length;o++)return void C(a[o].object)},C=(a=f()(u.a.mark(function e(t){var r,n,a,o,i,s,c,l,p,h,f,m,y;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.name),!g.a.isRotateWheel){e.next=3;break}return e.abrupt("return");case 3:return O(t.name),L(t.name),e.next=7,Object(v.f)();case 7:if(r=e.sent,!((n=r.Hotspot)&&n.length>0)){e.next=57;break}a=!0,o=!1,i=void 0,e.prev=13,s=d()(n);case 15:if(a=(c=s.next()).done){e.next=43;break}if(l=c.value,!Array.isArray(l.hotspot)){e.next=39;break}for(p=!0,h=!1,f=void 0,e.prev=21,m=d()(l.hotspot);!(p=(y=m.next()).done);p=!0)y.value===t.name&&b(l);e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),h=!0,f=e.t0;case 29:e.prev=29,e.prev=30,!p&&m.return&&m.return();case 32:if(e.prev=32,!h){e.next=35;break}throw f;case 35:return e.finish(32);case 36:return e.finish(29);case 37:e.next=40;break;case 39:throw Error("HotSpot hotspots are not Array");case 40:a=!0,e.next=15;break;case 43:e.next=49;break;case 45:e.prev=45,e.t1=e.catch(13),o=!0,i=e.t1;case 49:e.prev=49,e.prev=50,!a&&s.return&&s.return();case 52:if(e.prev=52,!o){e.next=55;break}throw i;case 55:return e.finish(52);case 56:return e.finish(49);case 57:case"end":return e.stop()}},e,this,[[13,45,49,57],[21,25,29,37],[30,,32,36],[50,,52,56]])})),function(e){return a.apply(this,arguments)}),O=function(e){e.indexOf("spark_tip_")>=0&&window.FontreGL.activeSellPoint(e)},L=function(e){"to_interior_tip"===e&&window.FontreGL.activeToInteriorPoint()}},UExh:function(e,t,r){r("uUaz").CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},Ufiy:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"b",function(){return a}),r.d(t,"a",function(){return o});var n=function(e){for(var t=e.length,r="",n=0,a=void 0,o=void 0,i=void 0;n<t;)switch((i=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(i);break;case 12:case 13:a=e[n++],r+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=e[n++],o=e[n++],r+=String.fromCharCode((15&i)<<12|(63&a)<<6|(63&o)<<0)}return r},a=function(e){for(var t="",r=0,n=e.length,a=void 0;r<n&&0!==(a=e[r++]);)t+=String.fromCharCode(a);return t},o=function(e){return 255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24}},X5ol:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("lC5x"),a=r.n(n),o=r("3cXf"),i=r.n(o),s=r("J0Oq"),c=r.n(s),l=r("Yarq"),u=r.n(l),p=r("AA3o"),d=r.n(p),h=r("UzKs"),f=r.n(h),m=r("Y7Ml"),v=r.n(m),g=r("xSur"),b=r.n(g),y=r("u3qd"),w=r("iPbq"),x=(r("dlDQ"),r("G71/")),S=r("HzJ8"),E=r.n(S),T=r("rVsN"),A=r.n(T),C=r("9ZL/"),O=function(e){var t=document.getElementsByTagName("head")[0],r=document.createElement("script");return r.type="text/javascript",r.src=e,t.appendChild(r),new A.a(function(e){r.onload=function(){return e()}})},L=new(function(){function e(){d()(this,e),this.krpano=null,this.carCode=null}return b()(e,[{key:"init",value:function(){var e=c()(a.a.mark(function e(t,r,n,o){var i,s,c,l,u=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(M(u),this.carCode=r,i=C.a[r].pano,window.embedpano){e.next=6;break}return e.next=6,O(C.a[r].pano.jsFile);case 6:return s=i.xml_file,c=i.exteriorHotspot[n],l=i.interiorScreen[o],e.next=9,this.showPano(s,t,c,l);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"showPano",value:function(e,t,r,n){var a=this;return new A.a(function(o){window.embedpano({id:"fontrePano",xml:e,target:t,html5:"only",mobilescale:1,passQueryParameters:!0,vars:{onstart:"set(startscene, "+n+")"},onready:function(e){if(console.log("krpanoReady"),r.length>0){var t=!0,n=!1,a=void 0;try{for(var i,s=E()(r);!(t=(i=s.next()).done);t=!0){var c=i.value;e.call("set_hotspot_display("+c+")")}}catch(e){n=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw a}}}o()}}),a.krpano=document.querySelector("#fontrePano")})}},{key:"changeExterColor",value:function(e){if(!y.a.carCode)return console.warn("pano carCode is null");var t=C.a[y.a.carCode].pano.exteriorHotspot[e];if(this.krpano&&(this.krpano.call("set_hotspot_transparent"),t.length>0)){var r=!0,n=!1,a=void 0;try{for(var o,i=E()(t);!(r=(o=i.next()).done);r=!0){var s=o.value;this.krpano.call("set_hotspot_display("+s+")")}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}}}},{key:"changeInterColor",value:function(e){if(!y.a.carCode)return console.warn("pano carCode is null");var t=C.a[y.a.carCode].pano.interiorScreen[e];if(!t)throw Error("get pano interiorScreen ["+e+"] fail! (Function: pano.changeInterColor)");this.krpano&&this.krpano.call("fontre_load_scene("+t+")")}},{key:"hideHotSpot",value:function(e){this.krpano&&(e?this.krpano.call("hotspot_display_block"):this.krpano.call("hotspot_display_none"))}},{key:"toggleVR",value:function(){this.krpano&&this.krpano.call("toggleVR")}},{key:"dispose",value:function(){if(window.removepano)return this.krpano=null,void window.removepano("fontrePano")}}]),e}());function M(e){if(!C.a[e[1]].pano)throw Error(e[1]+" config [pano] is not exist！(Function:initPano)");if(!C.a[e[1]].pano.interiorScreen||!C.a[e[1]].pano.exteriorHotspot)throw Error(e[1]+" [pano] config is not exist！(Function:initPano)");if(!C.a[e[1]].pano.exteriorHotspot[e[2]])throw Error(e[1]+" [pano] exteriorHotspot  ["+e[2]+"]  is not found! (Function:initPano)");if(!C.a[e[1]].pano.interiorScreen[e[3]])throw Error(e[1]+" [pano] interiorScreen ["+e[3]+"] is not found! (Function:initPano)")}var _=r("LCLg"),R=r("hDu7"),k=(r("OLR1"),r("kJPP"),r("OzE+"));window.fontre=new(function(){function e(){d()(this,e),this.debug=y.a.debug,console.log("svw verison: "+y.a.version)}return b()(e,[{key:"supportWebgl",value:function(){return k.a.webgl}},{key:"showExterior",value:function(){var e=c()(a.a.mark(function e(t,r,n,o){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.a.carCode=r,y.a.isLoading=!0,w.a.processShow(),e.next=5,_.a.showModel(t,r);case 5:if(!y.a.isCancel){e.next=10;break}return y.a.isCancel=!1,w.a.processNum(0),_.a.dispose(),e.abrupt("return");case 10:return y.a.isLoading=!1,y.a.loadedCar=r,w.a.processHide(),e.next=15,this.changeExteriorColor(n);case 15:return e.next=17,this.changeInteriorColor(o);case 17:case"end":return e.stop()}},e,this)}));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"showInterior",value:function(){var e=c()(a.a.mark(function e(t,r,n,o){var i=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y.a.carCode=r,y.a.loadedCar===r&&y.a.sceneCache.length>0&&(x.l.children=y.a.sceneCache),_.a.cancelAnimation(),e.next=5,L.init.apply(L,i);case 5:case"end":return e.stop()}},e,this)}));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"changeExteriorColor",value:function(){var e=c()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.changeCarShaderColor(t);case 2:return e.next=4,L.changeExterColor(t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"changeInteriorColor",value:function(){var e=c()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.changeMaterials(t);case 2:return e.next=4,L.changeInterColor(t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"modelSwitching",value:function(){var e=c()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error(t+" is not found!(Function: modelSwitching)");case 2:return e.next=4,_.a.modelSwitching(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setLoadingProgressCallback",value:function(e,t,r){w.a.processShowCallback=e,w.a.processHideCallback=t,w.a.processNumCallback=r}},{key:"switchWheelAnimation",value:function(e,t,r,n){var a=1;return t&&(a=5),r&&(a=3),n&&(a=2),_.a.switchWheelAnimation(e,a)}},{key:"animation",value:function(){return _.a.animation()}},{key:"cancelAnimation",value:function(){return _.a.cancelAnimation()}},{key:"resize",value:function(e,t){return console.log(e,t),_.a.resize(e,t)}},{key:"openLights",value:function(e){return _.a.openLights(e)}},{key:"outToInside",value:function(){var e=c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.e)(!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"insideToOut",value:function(){var e=c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.animation(),e.next=3,Object(R.c)();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"openLFDoor",value:function(){var e=c()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.openLFDoor();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){y.a.isLoading?y.a.isCancel=!0:y.a.sceneCache=x.l.clone().children,_.a.dispose(),L.dispose()}},{key:"resetCamera",value:function(){_.a.resetCamera()}},{key:"showSize",value:function(){return _.a.showSize}},{key:"changeView",value:function(e){_.a.changeView(e)}},{key:"hideShade",value:function(){return _.a.hideShade()}},{key:"switchSellPoint",value:function(e){return L.hideHotSpot(e),_.a.showSellPoint(e)}},{key:"toggleVR",value:function(){L.toggleVR()}}]),e}());var P=window.fontre,N=r("hRKE"),I=r.n(N),D=function(e,t){var r={};if(e&&t&&"object"===(void 0===e?"undefined":I()(e))&&"object"===(void 0===t?"undefined":I()(t))){for(var n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&e[n]!==t[n]&&(r[n]=t[n]);return r}throw new TypeError("params type must be object","diffParamsChangeData")},F=function(e,t){if(null!==e&&(void 0===e||(void 0===e?"undefined":I()(e))!==t))throw new TypeError("property value must be "+t,"validateApiFormat");return!0},B=(r("sEZp"),r("HBrH")),G={fontreGL:P,eventsDispatcher:null,exteriorDom:null,interiorPanoDom:null,isShowExterior:!1,isShowInterior:!1,isShowSpritespin:!1,debug:P.debug,changeViewLock:!1,exteriorConfig:{carName:"",exteriorColorName:"",interiorColorName:"",configLineName:"",hubName:""},interiorConfig:{carName:"",exteriorColorName:"",interiorColorName:""},isLoadedFrame:!1,_LOAD_STATUS:{LOADING:1,FINISHED:2},_tempCurrIsShowEx:!0,fontreBind:function(){this.eventsDispatcher=new(function(e){function t(){return d()(this,t),f()(this,(t.__proto__||u()(t)).apply(this,arguments))}return v()(t,e),t}(B)),this.isLoadedFrame=!0,this.exteriorDom=document.getElementById("exterior"),this.interiorPanoDom=document.getElementById("interior"),this.clearConfig(),window.addEventListener("resize",G.resize,!1)},clearConfig:function(){for(var e in this.isShowExterior=!1,this.exteriorConfig)this.exteriorConfig[e]="";for(var t in this.interiorConfig)this.interiorConfig[t]=""},addLoadingShade:function(e){var t=document.createElement("div");t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",t.style.backgroundColor=e},isSupportWebgl:function(){return this.fontreGL.supportWebgl()},getSpritespinSource:function(e){for(var t=[0,10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300,310,320,330,340,350],r=[],n=0;n<t.length;n++){var a="static/fontre/project/lafesta/exterior/"+e+"/car"+t[n]+".png";r.push(a)}return r},showExterior:function(e){var t=this,r=e.carName,n=e.exteriorColorName,o=e.interiorColorName,s=e.configLineName,l=e.hubName;return c()(a.a.mark(function e(){var c,u,p,d,h,f,m;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoadedFrame){e.next=3;break}return console.error("please wait loaded iframe"),e.abrupt("return");case 3:return e.next=5,t.changeView(!0);case 5:if(t.isSupportWebgl()){e.next=9;break}return c=t.getSpritespinSource(n),t.isShowSpritespin?(u=$("#exterior").spritespin("api"),p=0,c.forEach(function(e){u.replaceSourceFrame(e,p),p++}),SpriteSpin.Utils.preload({source:u.data.source,preloadCount:u.data.preloadCount,progress:function(e){u.data.progress=e},complete:function(e){u.data.images=e,u.data.loading=!1,u.skipFrames(0)}})):(d=t,(h=new Image).src=c[0],h.onload=function(){var e=window.innerWidth;h.height,h.width,$("#exterior").spritespin({animate:!1,source:c,frameTime:300,loop:!0,width:e,height:0,sizeMode:"fit",detectSubsampling:!1,sense:-1}).data("spritespin");SpriteSpin.extendApi({replaceSourceFrame:function(e,t){this.data.source[t]=e,this.data.images[t].src=e}}),d.isShowSpritespin=!0,d.eventsDispatcher.emit("loading_exterior",d._LOAD_STATUS.FINISHED,100,"完成加载")}),e.abrupt("return");case 9:if(F(r,"string")||F(n,"string")||F(o,"string")||F(s,"string")||F(l,"string")){e.next=11;break}throw new TypeError("params type is not support!","showExterior");case 11:if(f=D(t.exteriorConfig,{carName:r,exteriorColorName:n,interiorColorName:o,configLineName:s,hubName:l}),"{}"!==i()(f)){e.next=15;break}return t.isShowExterior&&t.fontreGL.animation(),e.abrupt("return");case 15:for(m in console.log(f),f)t.exteriorConfig.hasOwnProperty(m)&&(t.exteriorConfig[m]=f[m]);if(console.log("isShowExterior:",t.isShowExterior),t.isShowExterior){e.next=31;break}return t.fontreGL.setLoadingProgressCallback(function(){},function(){},function(e){e<100?t.eventsDispatcher.emit("loading_exterior",t._LOAD_STATUS.LOADING,e,"正在加载"):t.eventsDispatcher.emit("loading_exterior",t._LOAD_STATUS.FINISHED,e,"完成加载")}),t.isShowExterior=!0,e.next=23,t.fontreGL.showExterior(t.exteriorDom,r,n,o);case 23:if(!f.configLineName){e.next=26;break}return e.next=26,t.fontreGL.modelSwitching(s);case 26:if(!f.hubName){e.next=29;break}return e.next=29,t.fontreGL.modelSwitching(l);case 29:e.next=45;break;case 31:if(console.log("ex:单项选择"),!(f.exteriorColorName||f.interiorColorName||f.configLineName||f.hubName)){e.next=45;break}if(!f.exteriorColorName){e.next=36;break}return e.next=36,t.fontreGL.changeExteriorColor(n);case 36:if(!f.interiorColorName){e.next=39;break}return e.next=39,t.fontreGL.changeInteriorColor(o);case 39:if(!f.configLineName){e.next=42;break}return e.next=42,t.fontreGL.modelSwitching(s);case 42:if(!f.hubName){e.next=45;break}return e.next=45,t.fontreGL.modelSwitching(l);case 45:case"end":return e.stop()}},e,t)}))()},showInterior:function(e){var t=this,r=e.carName,n=e.exteriorColorName,o=e.interiorColorName;return c()(a.a.mark(function e(){var s,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isLoadedFrame){e.next=3;break}return console.error("please wait loaded iframe"),e.abrupt("return");case 3:return e.next=5,t.changeView(!1);case 5:if(F(r,"string")||F(n,"string")||F(o,"string")){e.next=7;break}throw new TypeError("params type is not support!","showInterior");case 7:if(s=D(t.interiorConfig,{exteriorColorName:n,interiorColorName:o}),"{}"!==i()(s)){e.next=11;break}return t.isShowExterior&&t.fontreGL.cancelAnimation(),e.abrupt("return");case 11:for(c in s)t.interiorConfig.hasOwnProperty(c)&&(t.interiorConfig[c]=s[c]);if(t.isShowInterior){e.next=19;break}return console.log("in:初始化车"),t.isShowInterior=!0,e.next=17,t.fontreGL.showInterior("interior",r,n,o);case 17:e.next=27;break;case 19:if(console.log("in:单项选择"),!s.exteriorColorName&&!s.interiorColorName){e.next=27;break}if(!s.exteriorColorName){e.next=24;break}return e.next=24,t.fontreGL.changeExteriorColor(n);case 24:if(!s.interiorColorName){e.next=27;break}return e.next=27,t.fontreGL.changeInteriorColor(o);case 27:case"end":return e.stop()}},e,t)}))()},wheelAnimation:function(e){var t=e.bool,r=e.isFast,n=e.isFuel,a=e.isComfort;this.fontreGL.switchWheelAnimation(t,r,n,a)},chargeAnimation:function(){this.fontreGL.chargeAnimation()},changeScene:function(e){this.fontreGL.changeView(e)},resize:function(){window.FontreGL.fontreGL.resize(window.innerWidth,window.innerHeight)},on:function(e,t){this.eventsDispatcher.on(e,t)},leaveAndSaveSnap:function(){this.fontreGL.leaveAndSaveSnap(),this.isShowExterior=!1},switchShowDom:function(e){e?(this.exteriorDom.style.display="block",this.interiorPanoDom.style.display="none"):(this.hideShade(),this.exteriorDom.style.display="none",this.interiorPanoDom.style.display="block")},changeView:function(e){var t=this;return c()(a.a.mark(function r(){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e===G._tempCurrIsShowEx){r.next=16;break}if(G._tempCurrIsShowEx=e,t.chengViewLock=!0,!e){r.next=10;break}if(t.switchShowDom(!0),t.isShowSpritespin){r.next=8;break}return r.next=8,t.fontreGL.insideToOut();case 8:r.next=16;break;case 10:if(t.isShowSpritespin){r.next=15;break}return r.next=13,t.fontreGL.openLFDoor();case 13:return r.next=15,t.fontreGL.outToInside();case 15:t.switchShowDom(!1);case 16:case"end":return r.stop()}},r,t)}))()},openLights:function(e){var t=e.bool;this.fontreGL.openLights(t)},hideShade:function(){return this.fontreGL.hideShade()},showSize:function(){return this.fontreGL.showSize()},activeSellPoint:function(e){this.eventsDispatcher.emit("active_sell_point",e)},activeToInteriorPoint:function(){this.eventsDispatcher.emit("active_to_interior_point")},switchSellPoint:function(e){var t=e.bool;this.fontreGL.switchSellPoint(t)},toggleVR:function(){this.fontreGL.toggleVR()}};window.FontreGL=G,window.parent.addEventListener("resize",G.resize,!1);t.default=G},Xxek:function(e,t,r){"use strict";var n,a,o=r("lC5x"),i=r.n(o),s=r("J0Oq"),c=r.n(s),l=r("pUg0"),u=r("4mrR"),p=r("jL0q"),d=this,h=(n=c()(i.a.mark(function e(t){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("CarPaintShader"!==t.type){e.next=10;break}return e.t0=f.ShaderMaterial,e.next=4,Object(u.a)(t);case 4:return e.t1=e.sent,(r=new e.t0(e.t1)).visible=t.visible,e.abrupt("return",r);case 10:return e.abrupt("return",new f[t.type]);case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),f=r("uUaz"),m=(a=c()(i.a.mark(function e(t){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t);case 2:if("ShaderMaterial"===(r=e.sent).type){e.next=6;break}return e.next=6,Object(l.a)(r,t,p.b);case 6:return r.fog=!1,r.name=t.name,r.needsUpdate=!0,e.abrupt("return",r);case 10:case"end":return e.stop()}},e,d)})),function(e){return a.apply(this,arguments)});t.a=m},YgqK:function(e,t,r){"use strict";var n,a,o=r("SZ/R"),i=r("G71/"),s=r("dlDQ"),c=r("V2Z7"),l=280,u=i.i.customDistance;n=void 0,a=!1;var p=r("u3qd"),d=r("9ZL/"),h=r("nc2e");r("HhYg"),t.a=function(e){if(!p.a.carCode)throw Error("carCode not found! (Function: Three.init)");e.style.setProperty("width","100%"),e.style.setProperty("height","100%");try{if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)){console.log("移动端");var t=d.a[p.a.carCode].exteriorViewpoint.mobilePosition,r=t.x,n=t.y,a=t.z;i.a.position.set(r,n,a)}else{console.log("PC端");var s=d.a[p.a.carCode].exteriorViewpoint.position,c=s.x,l=s.y,u=s.z;i.a.position.set(c,l,u)}}catch(e){console.warn(e),i.a.position.set(745,140,653)}i.a.lookAt(i.l.position),i.a.fov=45,i.a.far=1e5,i.a.aspect=e.clientWidth/e.clientHeight,i.a.updateProjectionMatrix(),i.k.setSize(e.clientWidth,e.clientHeight),i.k.setPixelRatio(window.devicePixelRatio),i.i.autoRotate=!0,i.i.autoRotateSpeed=-.06,i.i.onClickCallback=o.a.bind(null,e),window.addEventListener("resize",function(){i.a.aspect=e.clientWidth/e.clientHeight,i.a.updateProjectionMatrix(),i.k.setSize(e.clientWidth,e.clientHeight)}),e.appendChild(i.k.domElement),Object(h.a)(e)}},Z62A:function(e,t,r){"use strict";window.FONTRE_PATH="static/fontre";window.FONTRE_PATH,window.FONTRE_PATH,window.FONTRE_PATH,window.FONTRE_PATH,window.FONTRE_PATH,window.FONTRE_PATH,window.FONTRE_PATH,window.FONTRE_PATH,window.FONTRE_PATH,window.FONTRE_PATH,window.FONTRE_PATH},"d/bP":function(e,t,r){"use strict";var n={};r.d(n,"length",function(){return p}),r.d(n,"width",function(){return d}),r.d(n,"height",function(){return h}),r.d(n,"removeSize",function(){return m});var a={};r.d(a,"closeAllDoor",function(){return S});var o,i=r("HzJ8"),s=r.n(i),c=r("G71/"),l=r("uUaz"),u=new l.FontLoader,p=function(e){var t=new l.PlaneBufferGeometry(500,2),r=new l.MeshBasicMaterial({color:16777215,side:l.DoubleSide}),n=new l.Mesh(t,r);n.position.set(0,-80,100),n.rotateX(-Math.PI/2),n.name="carLength",c.l.add(n),u.load(window.FONTRE_PATH+"/font/font.json",function(t){var n=t.generateShapes(e,18),a=new l.ShapeBufferGeometry(n);a.computeBoundingBox();var o=new l.Mesh(a,r);o.position.set(0,-79,120),o.rotateX(-Math.PI/2),o.name="carLengthText",c.l.add(o)})},d=function(e){var t=new l.PlaneBufferGeometry(200,2),r=new l.MeshBasicMaterial({color:16777215,side:l.DoubleSide}),n=new l.Mesh(t,r);n.position.set(-250,-80,0),n.rotateX(-Math.PI/2),n.rotateZ(-Math.PI/2),n.name="carWidth",c.l.add(n),u.load(window.FONTRE_PATH+"/font/font.json",function(t){var n=t.generateShapes(e,18),a=new l.ShapeBufferGeometry(n);a.computeBoundingBox();var o=new l.Mesh(a,r);o.position.set(-270,-79,-40),o.rotateX(-Math.PI/2),o.rotateZ(-Math.PI/2),o.name="carWidthText",c.l.add(o)})},h=function(e){var t=new l.PlaneBufferGeometry(300,2),r=new l.MeshBasicMaterial({color:16777215,side:l.DoubleSide}),n=new l.Mesh(t,r);n.position.set(250,-80,100),n.rotateZ(-Math.PI/2),n.rotateX(-Math.PI/2),n.name="carHeight",c.l.add(n),u.load(window.FONTRE_PATH+"/font/font.json",function(t){var n=t.generateShapes(e,18),a=new l.ShapeBufferGeometry(n);a.computeBoundingBox();var o=new l.Mesh(a,r);o.position.set(250,0,100),o.rotateY(-Math.PI/2),o.name="carHeightText",c.l.add(o)})},f=["carLength","carLengthText","carHeight","carHeightText","carWidth","carWidthText"],m=function(){var e=!0,t=!1,r=void 0;try{for(var n,a=s()(f);!(e=(n=a.next()).done);e=!0){var o=n.value,i=c.l.getObjectByName(o);c.l.remove(i)}}catch(e){t=!0,r=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw r}}},v=r("lC5x"),g=r.n(v),b=r("J0Oq"),y=r.n(b),w=r("dlDQ"),x=this,S=(o=y()(g.a.mark(function e(){var t,r,n,a,o,i,l,u,p,d,h,f,m,v,b,y,S;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.f)();case 2:if(t=e.sent,r=t.Hotspot){e.next=6;break}throw Error("Hotspot is 不! 存! 在! ");case 6:n=!0,a=!1,o=void 0,e.prev=9,i=s()(r);case 11:if(n=(l=i.next()).done){e.next=38;break}if(u=l.value,p=u.name,d=u.models,"open_sunroof"!==p){e.next=16;break}return e.abrupt("break",38);case 16:for(h=!0,f=!1,m=void 0,e.prev=19,v=s()(d);!(h=(b=v.next()).done);h=!0)y=b.value,S=c.l.getObjectByName(y.name),Object(w.a)(S.rotation,{x:0,y:0,z:0},400);e.next=27;break;case 23:e.prev=23,e.t0=e.catch(19),f=!0,m=e.t0;case 27:e.prev=27,e.prev=28,!h&&v.return&&v.return();case 30:if(e.prev=30,!f){e.next=33;break}throw m;case 33:return e.finish(30);case 34:return e.finish(27);case 35:n=!0,e.next=11;break;case 38:e.next=44;break;case 40:e.prev=40,e.t1=e.catch(9),a=!0,o=e.t1;case 44:e.prev=44,e.prev=45,!n&&i.return&&i.return();case 47:if(e.prev=47,!a){e.next=50;break}throw o;case 50:return e.finish(47);case 51:return e.finish(44);case 52:case"end":return e.stop()}},e,x,[[9,40,44,52],[19,23,27,35],[28,,30,34],[45,,47,51]])})),function(){return o.apply(this,arguments)});r.d(t,"b",function(){return n}),r.d(t,"a",function(){return a})},dlDQ:function(e,t,r){"use strict";(function(e){r.d(t,"f",function(){return S}),r.d(t,"c",function(){return E}),r.d(t,"d",function(){return T}),r.d(t,"e",function(){return A}),r.d(t,"a",function(){return O}),r.d(t,"b",function(){return L});var n,a,o,i=r("rVsN"),s=r.n(i),c=r("HzJ8"),l=r.n(c),u=r("lC5x"),p=r.n(u),d=r("J0Oq"),h=r.n(d),f=r("9ZL/"),m=r("kJPP"),v=r("u3qd"),g=r("G71/"),b=r("G71/"),y=this,w=r("uUaz"),x=r("V2Z7"),S=(n={},h()(p.a.mark(function t(){var r,a,o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.a.carCode){t.next=3;break}throw Error("carCode not found! (Function: getUsrData)");case 3:if(!n[r]){t.next=5;break}return t.abrupt("return",n[r]);case 5:a=f.a[r].assets+"/"+r,o=void 0,e&&Object({NODE_ENV:"production"}),t.next=13;break;case 10:o=t.sent,t.next=16;break;case 13:return t.next=15,m.a.ftrn(a);case 15:o=t.sent;case 16:return n[r]=o,t.abrupt("return",o);case 18:case"end":return t.stop()}},t,y)}))),E=function(){if(!v.a.carCode)throw Error("carCode not found! (Function: getAssetPath)");return f.a[v.a.carCode].assets+"/"},T=(a=h()(p.a.mark(function e(t){var r,n,a,o,i,s,c,l,u,d,h;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==t){e.next=2;break}return e.abrupt("return");case 2:if(v.a.carCode){e.next=4;break}throw Error("carCode not found! (Function: getEnvMap)");case 4:return e.next=6,S();case 6:if(r=e.sent,n=E(),r&&r.Cubes&&n){e.next=10;break}throw Error("usrData.Cubes || assetPath not found! (Function: getEnvMap)");case 10:if(a=n+"cubes/"+t,!v.a.textureCache[a]){e.next=13;break}return e.abrupt("return",v.a.textureCache[a]);case 13:if(o=C(t,r.Cubes),i=o.PX,s=o.PY,c=o.PZ,l=o.NX,u=o.NY,d=o.NZ,!(i&&s&&c&&l&&u&&d)){e.next=18;break}return h=g.c.setPath(a+"/").load([i,l,s,u,c,d]),v.a.textureCache[a]=h,e.abrupt("return",h);case 18:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)}),A=(o=h()(p.a.mark(function e(t){var r,n,a,o,i,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==t){e.next=2;break}return e.abrupt("return");case 2:if(v.a.carCode){e.next=4;break}throw Error("carCode not found! (Function: getEnvMap)");case 4:return e.next=6,S(v.a.carCode);case 6:if(r=e.sent,n=E(),r&&r.Textures&&n){e.next=10;break}throw Error("usrData.Textures || assetPath not found! (Function: getTexture)");case 10:if(a=n+"textures/"+t,!v.a.textureCache[a]){e.next=13;break}return e.abrupt("return",v.a.textureCache[a]);case 13:if(o=C(t,r.Textures),!((i=o.repeat)&&i.x&&i.y)){e.next=22;break}return(s=g.m.load(a)).matrixAutoUpdate=!1,s.wrapS=s.wrapT=w.RepeatWrapping,s.repeat.x=i.x,s.repeat.y=i.y,v.a.textureCache[a]=s,e.abrupt("return",s);case 22:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)});function C(e,t){if(Array.isArray(t)&&t.length>0){var r=!0,n=!1,a=void 0;try{for(var o,i=l()(t);!(r=(o=i.next()).done);r=!0){var s=o.value;if(s.name===e)return s}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}}else console.log("param arr is warn(Function: _findData)")}var O=function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Function;return new s.a(function(o){var i=new x.Tween(e).to(t,r).start().onComplete(h()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:o();case 3:case"end":return e.stop()}},e,y)})));n&&i.easing(n)})},L=function(e){return b.b.setHex(e),{r:b.b.r,g:b.b.g,b:b.b.b}}}).call(t,r("V0EG"))},hDu7:function(e,t,r){"use strict";r.d(t,"d",function(){return _}),r.d(t,"b",function(){return N}),r.d(t,"f",function(){return R}),r.d(t,"e",function(){return P}),r.d(t,"c",function(){return I}),r.d(t,"a",function(){return k});var n,a,o,i,s,c,l=r("rVsN"),u=r.n(l),p=r("lC5x"),d=r.n(p),h=r("J0Oq"),f=r.n(h),m=r("MgeX"),v=r.n(m),g=r("HzJ8"),b=r.n(g),y=r("u3qd"),w=r("G71/"),x=(r("LCLg"),r("dlDQ")),S=r("8OiZ"),E=(r.n(S),r("SZ/R")),T=this,A=r("uUaz"),C=r("V2Z7"),O=C.Easing.Circular.Out,L=C.Easing.Circular.In,M=[new A.Vector3(30,50,320),new A.Vector3(75,40,220),new A.Vector3(50,20,120),new A.Vector3(30,10,100)],_=function(e){var t=Math.abs(16*Math.sin(e/25))+2,r=!0,n=!1,a=void 0;try{for(var o,i=b()(v()(y.a.spriteState));!(r=(o=i.next()).done);r=!0){var s=o.value;s instanceof A.Sprite&&s.scale.set(t,t,t)}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}},R=(n=f()(d.a.mark(function e(t){var r,n,a,o,i,s,c,l,u,p,h,f,m,v,g,y,S,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.f)();case 2:r=e.sent,n=r.Hotspot,a=r.Floor,o=!0,i=!1,s=void 0,e.prev=8,c=b()(n);case 10:if(o=(l=c.next()).done){e.next=35;break}if("rotate_wheel"!==(u=l.value).name){e.next=32;break}for(p=!0,h=!1,f=void 0,e.prev=16,m=b()(u.models);!(p=(v=m.next()).done);p=!0)g=v.value,(y=w.l.getObjectByName(g.name))&&y.rotateZ(Math.PI/60*E);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),h=!0,f=e.t0;case 24:e.prev=24,e.prev=25,!p&&m.return&&m.return();case 27:if(e.prev=27,!h){e.next=30;break}throw f;case 30:return e.finish(27);case 31:return e.finish(24);case 32:o=!0,e.next=10;break;case 35:e.next=41;break;case 37:e.prev=37,e.t1=e.catch(8),i=!0,s=e.t1;case 41:e.prev=41,e.prev=42,!o&&c.return&&c.return();case 44:if(e.prev=44,!i){e.next=47;break}throw s;case 47:return e.finish(44);case 48:return e.finish(41);case 49:a&&(S=w.l.getObjectByName(a.name))&&S.material.map.offset.set(-t/150*E,0);case 50:case"end":return e.stop()}},e,T,[[8,37,41,49],[16,20,24,32],[25,,27,31],[42,,44,48]])})),function(e){return n.apply(this,arguments)}),k=(a=f()(d.a.mark(function e(){var t,r,n,a,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.f)();case 2:return t=e.sent,r=t.Hotspot[0],n=void 0,a=r.models,r.hotspot,o=[],a.forEach(function(e){var t=w.l.getObjectByName(e.name);t&&(y.a.spriteState[e.name]instanceof A.Sprite&&(y.a.spriteState[e.name].visible=!y.a.hotSpotState[name]),o.push(Object(x.a)(t.rotation,{x:0,y:.08*-Math.PI,z:0},300,O,n)))}),e.next=10,u.a.all(o);case 10:case"end":return e.stop()}},e,T)})),o=f()(d.a.mark(function e(t){var r,n,a,o,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.f)();case 2:return r=e.sent,n=r.Hotspot[0],a=void 0,o=n.models,n.hotspot,t&&(y.a.hotSpotState.lf_door=!1),i=[],o.forEach(function(e){var t=w.l.getObjectByName(e.name);t&&(y.a.spriteState[e.name]instanceof A.Sprite&&(y.a.spriteState[e.name].visible=!y.a.hotSpotState[name]),i.push(Object(x.a)(t.rotation,{x:0,y:0,z:0},300,L,a)))}),e.next=11,u.a.all(i);case 11:case"end":return e.stop()}},e,T)})),function(e){return o.apply(this,arguments)}),P=(i=f()(d.a.mark(function e(t){var r,n,a,o,i,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.i.autoRotate=!1,w.i.isIntoInterior=!0,console.log("进入内饰"),r=!0,n=!1,a=void 0,e.prev=6,o=b()(M);case 8:if(r=(i=o.next()).done){e.next=16;break}return s=i.value,console.log(M),e.next=13,Object(x.a)(w.a.position,s,200);case 13:r=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),n=!0,a=e.t0;case 22:e.prev=22,e.prev=23,!r&&o.return&&o.return();case 25:if(e.prev=25,!n){e.next=28;break}throw a;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}},e,T,[[6,18,22,30],[23,,25,29]])})),function(e){return i.apply(this,arguments)}),N=(s=f()(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.l.getObjectByName("02_car_body_lf_door.drc"),y.a.hotSpotState.lf_door){e.next=4;break}return e.next=4,Object(E.b)(t);case 4:case"end":return e.stop()}},e,T)})),function(){return s.apply(this,arguments)}),I=(c=f()(d.a.mark(function e(){var t,r,n,a,o,i,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=M.slice(),r=!0,n=!1,a=void 0,e.prev=4,o=b()(t.reverse());case 6:if(r=(i=o.next()).done){e.next=13;break}return s=i.value,e.next=10,Object(x.a)(w.a.position,s,200);case 10:r=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),n=!0,a=e.t0;case 19:e.prev=19,e.prev=20,!r&&o.return&&o.return();case 22:if(e.prev=22,!n){e.next=25;break}throw a;case 25:return e.finish(22);case 26:return e.finish(19);case 27:w.i.autoRotate=!0,w.i.isIntoInterior=!1,k(!0);case 30:case"end":return e.stop()}},e,T,[[4,15,19,27],[20,,22,26]])})),function(){return c.apply(this,arguments)})},iPbq:function(e,t,r){"use strict";var n={processShowCallback:null,processHideCallback:null,processNumCallback:null,processShow:function(){console.log("show"),this.processShowCallback&&this.processShowCallback()},processHide:function(){console.log("hide"),this.processHideCallback&&this.processHideCallback()},processNum:function(e){this.processNumCallback&&this.processNumCallback(e)}};t.a=n},ivfv:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("ZLEe"),a=r.n(n);
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function(){var e=void 0,t=this;function r(r,n){var a,o=r.split("."),i=t;!(o[0]in i)&&i.execScript&&i.execScript("var "+o[0]);for(;o.length&&(a=o.shift());)o.length||n===e?i=i[a]?i[a]:i[a]={}:i[a]=n}var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function o(e){var t,r,a,o,i,s,c,l,u,p,d=e.length,h=0,f=Number.POSITIVE_INFINITY;for(l=0;l<d;++l)e[l]>h&&(h=e[l]),e[l]<f&&(f=e[l]);for(t=1<<h,r=new(n?Uint32Array:Array)(t),a=1,o=0,i=2;a<=h;){for(l=0;l<d;++l)if(e[l]===a){for(s=0,c=o,u=0;u<a;++u)s=s<<1|1&c,c>>=1;for(p=a<<16|l,u=s;u<t;u+=i)r[u]=p;++o}++a,o<<=1,i<<=1}return[r,h,f]}function i(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=n?new Uint8Array(e):e,this.m=!1,this.i=c,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case s:this.b=32768,this.c=new(n?Uint8Array:Array)(32768+this.h+258);break;case c:this.b=0,this.c=new(n?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var s=0,c=1,l={t:s,s:c};i.prototype.k=function(){for(;!this.m;){var t=L(this,3);switch(1&t&&(this.m=!0),t>>>=1){case 0:var r=this.input,a=this.a,i=this.c,l=this.b,u=r.length,p=e,d=i.length,f=e;if(this.d=this.f=0,a+1>=u)throw Error("invalid uncompressed block header: LEN");if(p=r[a++]|r[a++]<<8,a+1>=u)throw Error("invalid uncompressed block header: NLEN");if(p===~(r[a++]|r[a++]<<8))throw Error("invalid uncompressed block header: length verify");if(a+p>r.length)throw Error("input buffer is broken");switch(this.i){case s:for(;l+p>i.length;){if(p-=f=d-l,n)i.set(r.subarray(a,a+f),l),l+=f,a+=f;else for(;f--;)i[l++]=r[a++];this.b=l,i=this.e(),l=this.b}break;case c:for(;l+p>i.length;)i=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(n)i.set(r.subarray(a,a+p),l),l+=p,a+=p;else for(;p--;)i[l++]=r[a++];this.a=a,this.b=l,this.c=i;break;case 1:this.j(A,O);break;case 2:var m,v,g,b,y=L(this,5)+257,w=L(this,5)+1,x=L(this,4)+4,S=new(n?Uint8Array:Array)(h.length),E=e,T=e,C=e,_=e,R=e;for(R=0;R<x;++R)S[h[R]]=L(this,3);if(!n)for(R=x,x=S.length;R<x;++R)S[h[R]]=0;for(m=o(S),E=new(n?Uint8Array:Array)(y+w),R=0,b=y+w;R<b;)switch(T=M(this,m)){case 16:for(_=3+L(this,2);_--;)E[R++]=C;break;case 17:for(_=3+L(this,3);_--;)E[R++]=0;C=0;break;case 18:for(_=11+L(this,7);_--;)E[R++]=0;C=0;break;default:C=E[R++]=T}v=o(n?E.subarray(0,y):E.slice(0,y)),g=o(n?E.subarray(y):E.slice(y)),this.j(v,g);break;default:throw Error("unknown BTYPE: "+t)}}return this.n()};var u,p,d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],h=n?new Uint16Array(d):d,f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],m=n?new Uint16Array(f):f,v=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],g=n?new Uint8Array(v):v,b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],y=n?new Uint16Array(b):b,w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=n?new Uint8Array(w):w,S=new(n?Uint8Array:Array)(288);for(u=0,p=S.length;u<p;++u)S[u]=143>=u?8:255>=u?9:279>=u?7:8;var E,T,A=o(S),C=new(n?Uint8Array:Array)(30);for(E=0,T=C.length;E<T;++E)C[E]=5;var O=o(C);function L(e,t){for(var r,n=e.f,a=e.d,o=e.input,i=e.a,s=o.length;a<t;){if(i>=s)throw Error("input buffer is broken");n|=o[i++]<<a,a+=8}return r=n&(1<<t)-1,e.f=n>>>t,e.d=a-t,e.a=i,r}function M(e,t){for(var r,n,a=e.f,o=e.d,i=e.input,s=e.a,c=i.length,l=t[0],u=t[1];o<u&&!(s>=c);)a|=i[s++]<<o,o+=8;if((n=(r=l[a&(1<<u)-1])>>>16)>o)throw Error("invalid code length: "+n);return e.f=a>>n,e.d=o-n,e.a=s,65535&r}function _(e,t){var r,n;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),r=e[this.a++],n=e[this.a++],15&r){case R:this.method=R;break;default:throw Error("unsupported compression method")}if(0!=((r<<8)+n)%31)throw Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw Error("fdict flag is not supported");this.q=new i(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}i.prototype.j=function(e,t){var r=this.c,n=this.b;this.o=e;for(var a,o,i,s,c=r.length-258;256!==(a=M(this,e));)if(256>a)n>=c&&(this.b=n,r=this.e(),n=this.b),r[n++]=a;else for(s=m[o=a-257],0<g[o]&&(s+=L(this,g[o])),a=M(this,t),i=y[a],0<x[a]&&(i+=L(this,x[a])),n>=c&&(this.b=n,r=this.e(),n=this.b);s--;)r[n]=r[n++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},i.prototype.w=function(e,t){var r=this.c,n=this.b;this.o=e;for(var a,o,i,s,c=r.length;256!==(a=M(this,e));)if(256>a)n>=c&&(c=(r=this.e()).length),r[n++]=a;else for(s=m[o=a-257],0<g[o]&&(s+=L(this,g[o])),a=M(this,t),i=y[a],0<x[a]&&(i+=L(this,x[a])),n+s>c&&(c=(r=this.e()).length);s--;)r[n]=r[n++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},i.prototype.e=function(){var e,t,r=new(n?Uint8Array:Array)(this.b-32768),a=this.b-32768,o=this.c;if(n)r.set(o.subarray(32768,r.length));else for(e=0,t=r.length;e<t;++e)r[e]=o[e+32768];if(this.g.push(r),this.l+=r.length,n)o.set(o.subarray(a,a+32768));else for(e=0;32768>e;++e)o[e]=o[a+e];return this.b=32768,o},i.prototype.z=function(e){var t,r,a,o=this.input.length/this.a+1|0,i=this.input,s=this.c;return e&&("number"==typeof e.p&&(o=e.p),"number"==typeof e.u&&(o+=e.u)),2>o?r=(a=(i.length-this.a)/this.o[2]/2*258|0)<s.length?s.length+a:s.length<<1:r=s.length*o,n?(t=new Uint8Array(r)).set(s):t=s,this.c=t},i.prototype.n=function(){var e,t,r,a,o,i=0,s=this.c,c=this.g,l=new(n?Uint8Array:Array)(this.l+(this.b-32768));if(0===c.length)return n?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,r=c.length;t<r;++t)for(a=0,o=(e=c[t]).length;a<o;++a)l[i++]=e[a];for(t=32768,r=this.b;t<r;++t)l[i++]=s[t];return this.g=[],this.buffer=l},i.prototype.v=function(){var e,t=this.b;return n?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},_.prototype.k=function(){var e,t,r=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(r[this.a++]<<24|r[this.a++]<<16|r[this.a++]<<8|r[this.a++])>>>0;var n=e;if("string"==typeof n){var a,o,i=n.split("");for(a=0,o=i.length;a<o;a++)i[a]=(255&i[a].charCodeAt(0))>>>0;n=i}for(var s,c=1,l=0,u=n.length,p=0;0<u;){u-=s=1024<u?1024:u;do{l+=c+=n[p++]}while(--s);c%=65521,l%=65521}if(t!==(l<<16|c)>>>0)throw Error("invalid adler-32 checksum")}return e};var R=8;r("Zlib.Inflate",_),r("Zlib.Inflate.prototype.decompress",_.prototype.k);var k,P,N,I,D={ADAPTIVE:l.s,BLOCK:l.t};if(a.a)k=a()(D);else for(P in k=[],N=0,D)k[N++]=P;for(N=0,I=k.length;N<I;++N)r("Zlib.Inflate.BufferType."+(P=k[N]),D[P])}).call(this)},jL0q:function(e,t,r){"use strict";r.d(t,"c",function(){return a}),r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});var n=r("uUaz"),a={Number:0,Bool:1,Color:2,Texture:3,EnvCub:4,Select:5,Vector2:6,Vector3:7,ColorRGB:8},o=[{name:"color",type:a.ColorRGB},{name:"groundColor",type:a.ColorRGB},{name:"intensity",type:a.Number,value:[0,2]},{name:"distance",type:a.Number,value:[0,1e3]},{name:"angle",type:a.Number,value:[0,Math.PI/2]},{name:"decay",type:a.Number,value:[0,10]},{name:"penumbra",type:a.Number,value:[0,2]},{name:"position",type:a.Vector3,value:[-5e3,5e3]}],i=[{name:"visible",type:a.Bool,value:!0},{name:"blending",type:a.Select,value:{NoBlending:n.NoBlending,NormalBlending:n.NormalBlending,AdditiveBlending:n.AdditiveBlending,SubtractiveBlending:n.SubtractiveBlending,MultiplyBlending:n.MultiplyBlending,CustomBlending:n.CustomBlending}},{name:"blendSrc",type:a.Select,value:{ZeroFactor:n.ZeroFactor,OneFactor:n.OneFactor,SrcColorFactor:n.SrcColorFactor,OneMinusSrcColorFactor:n.OneMinusSrcColorFactor,SrcAlphaFactor:n.SrcAlphaFactor,OneMinusSrcAlphaFactor:n.OneMinusSrcAlphaFactor,DstAlphaFactor:n.DstAlphaFactor,OneMinusDstAlphaFactor:n.OneMinusDstAlphaFactor,DstColorFactor:n.DstColorFactor,OneMinusDstColorFactor:n.OneMinusDstColorFactor,SrcAlphaSaturateFactor:n.SrcAlphaSaturateFactor}},{name:"blendDst",type:a.Select,value:{ZeroFactor:n.ZeroFactor,OneFactor:n.OneFactor,SrcColorFactor:n.SrcColorFactor,OneMinusSrcColorFactor:n.OneMinusSrcColorFactor,SrcAlphaFactor:n.SrcAlphaFactor,OneMinusSrcAlphaFactor:n.OneMinusSrcAlphaFactor,DstAlphaFactor:n.DstAlphaFactor,OneMinusDstAlphaFactor:n.OneMinusDstAlphaFactor,DstColorFactor:n.DstColorFactor,OneMinusDstColorFactor:n.OneMinusDstColorFactor,SrcAlphaSaturateFactor:n.SrcAlphaSaturateFactor}},{name:"blendEquation",type:a.Select,value:{AddEquation:n.AddEquation,SubtractEquation:n.SubtractEquation,ReverseSubtractEquation:n.ReverseSubtractEquation,MinEquation:n.MinEquation,MaxEquation:n.MaxEquation}},{name:"shading",type:a.Select,value:{FlatShading:n.FlatShading,SmoothShading:n.SmoothShading}},{name:"combine",type:a.Select,value:{MultiplyOperation:n.MultiplyOperation,MixOperation:n.MixOperation,AddOperation:n.AddOperation}},{name:"side",type:a.Select,value:{FrontSide:n.FrontSide,BackSide:n.BackSide,DoubleSide:n.DoubleSide}},{name:"opacity",type:a.Number,value:[0,1]},{name:"alphaTest",type:a.Number,value:[0,1]},{name:"transparent",type:a.Bool,value:!1},{name:"color",type:a.Color},{name:"map",type:a.Texture},{name:"specular",type:a.Color},{name:"specularMap",type:a.Texture},{name:"shininess",type:a.Number,value:[0,1e3]},{name:"roughness",type:a.Number,value:[0,1]},{name:"metalness",type:a.Number,value:[0,1]},{name:"lightMap",type:a.Texture},{name:"lightMapIntensity",type:a.Number,value:[0,1]},{name:"aoMap",type:a.Texture},{name:"aoMapIntensity",type:a.Number,value:[0,1]},{name:"emissive",type:a.Color},{name:"emissiveIntensity",type:a.Number,value:[0,1]},{name:"emissiveMap",type:a.Texture},{name:"bumpMap",type:a.Texture},{name:"bumpScale",type:a.Number,value:[-100,100]},{name:"normalMap",type:a.Texture},{name:"normalScale",type:a.Vector2,value:[-100,100]},{name:"displacementMap",type:a.Texture},{name:"displacementScale",type:a.Number,value:[-100,100]},{name:"displacementBias",type:a.Number,value:[-1,1]},{name:"roughnessMap",type:a.Texture},{name:"metalnessMap",type:a.Texture},{name:"alphaMap",type:a.Texture},{name:"envMap",type:a.EnvCub},{name:"envMapIntensity",type:a.Number,value:[0,1]},{name:"refractionRatio",type:a.Number,value:[0,10]},{name:"reflectivity",type:a.Number,value:[0,1]},{name:"clearCoat",type:a.Number,value:[0,1]},{name:"clearCoatRoughness",type:a.Number,value:[0,1]},{name:"morphTargets",type:a.Bool,value:!0},{name:"morphNormals",type:a.Bool,value:!0},{name:"wireframe",type:a.Bool,value:!1},{name:"skinning",type:a.Bool,value:!1}]},kJPP:function(e,t,r){"use strict";var n=r("lC5x"),a=r.n(n),o=r("rVsN"),i=r.n(o),s=r("J0Oq"),c=r.n(s),l=r("G71/"),u=r("Ufiy"),p=r("u3qd"),d=this,h=r("ZB6q"),f=r("uUaz");r("CHqU"),r("JQBp");var m=new f.FBXLoader;h(f);var v,g,b,y={json:(b={},g=c()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b[t]){e.next=2;break}return e.abrupt("return",b[t]);case 2:return e.abrupt("return",new i.a(function(e){l.e.load(t+".json",function(r){b[t]=JSON.parse(r),e(JSON.parse(r))})}));case 3:case"end":return e.stop()}},e,d)})),function(e){return g.apply(this,arguments)}),ftrn:function(){var e,t={};return e=c()(a.a.mark(function e(r){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[r]){e.next=2;break}return e.abrupt("return",t[r]);case 2:return e.next=4,l.f.loadFtrn(r+".ftrn");case 4:return n=e.sent,t[r]=JSON.parse(Object(u.c)(new Uint8Array(n))),e.abrupt("return",t[r]);case 7:case"end":return e.stop()}},e,d)})),function(t){return e.apply(this,arguments)}}(),ftrm:function(e){return p.a.ftrmCache[e]?p.a.ftrmCache[e]:new i.a(function(t){var r,n=l.n.loadFtrm(e,(r=c()(a.a.mark(function r(n){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:p.a.ftrmCache[e]=n,t(n);case 2:case"end":return r.stop()}},r,d)})),function(e){return r.apply(this,arguments)}));p.a.requestList.push(n)})},drc:(v=c()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new i.a(function(e){l.n.load(t,function(t){t.computeVertexNormals();var r=new f.Mesh(t);e(r)})}));case 1:case"end":return e.stop()}},e,d)})),function(e){return v.apply(this,arguments)}),decoder:function(e){return new i.a(function(t){l.n.decodeDracoFile(e,function(r){if(r.attributes.uv){var n=r.attributes.uv.array;r.addAttribute("uv2",new f.BufferAttribute(n,2))}else console.log("error: "+e);setTimeout(function(){t(r)},0)})})},obj:function(e){return new i.a(function(t){(new f.OBJLoader).load(e,function(e){console.log(e);var r=e.children[0];t(r)})})},FBX:function(e){return new i.a(function(t){m.load(e,function(e){t(e)})})},gltf:function(e){return new i.a(function(t){(new f.GLTFLoader).load(e,function(e){t(e)})})}};t.a=y},kWYd:function(e,t,r){"use strict";var n=r("G71/"),a=r("hDu7"),o=r("u3qd"),i=(r("uUaz"),r("V2Z7"));t.a=function(){if("number"!=typeof o.a.animateId){var e=0,t=0;console.time("animation"),function r(){e++,o.a.isRotateWheel&&(t++,Object(a.f)(t,o.a.rotateWheelSpeed)),Object(a.d)(e),o.a.composer?o.a.composer.render():n.k.render(n.l,n.a),i.update(),n.i.update(),n.d&&n.d.update(),o.a.animateId=requestAnimationFrame(r)}()}}},nc2e:function(e,t,r){"use strict";var n=function(e){var t=document.createElement("div");t.id="fontregl_shade",t.style.position="absolute",t.style.background="white",t.style.top="0px",t.style.left="0px",t.style.height="100%",t.style.width="100%",t.style.transition="2s",t.style.transitionProperty="opacity",t.style.opacity=1,document.body.appendChild(t),t.addEventListener("transitionend",function(){console.log("-=-=-=-=-=-=-",t.style.opacity),"0"===t.style.opacity&&(t.style.width="0")},!1)},a=function(){var e=document.querySelector("#fontregl_shade");if(!e)return console.warn("element [fontregl_shade] not exist ");e.style.opacity=0},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"black",t=document.querySelector("#fontregl_shade");if(!t)return console.warn("element [fontregl_shade] not exist ");t.style.width="100%",t.style.background=e,t.style.opacity=1};r.d(t,"a",function(){return n}),r.d(t,"b",function(){return a}),r.d(t,!1,function(){return o})},pUg0:function(e,t,r){"use strict";var n,a=r("lC5x"),o=r.n(a),i=r("J0Oq"),s=r.n(i),c=r("jL0q"),l=r("dlDQ"),u=this,p=(n=s()(o.a.mark(function e(t,r,n){var a,i,s,p,h;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=0,i=n.length;case 1:if(!(a<i)){e.next=34;break}if(s=n[a],p=s.name,h=s.type,t.hasOwnProperty(p)&&r.hasOwnProperty(p)){e.next=5;break}return e.abrupt("continue",31);case 5:e.t0=h,e.next=e.t0===c.c.Number?8:e.t0===c.c.Bool?10:e.t0===c.c.Color?12:e.t0===c.c.Texture?14:e.t0===c.c.EnvCub?18:e.t0===c.c.Select?22:e.t0===c.c.Vector2?24:e.t0===c.c.Vector3?26:e.t0===c.c.ColorRGB?28:30;break;case 8:case 10:return t[p]=r[p],e.abrupt("break",31);case 12:return t[p].setHex(r[p]),e.abrupt("break",31);case 14:return e.next=16,Object(l.e)(r[p]);case 16:return t[p]=e.sent,e.abrupt("break",31);case 18:return e.next=20,Object(l.d)(r[p]);case 20:return t[p]=e.sent,e.abrupt("break",31);case 22:return t[p]=r[p],e.abrupt("break",31);case 24:case 26:case 28:return d(t[p],r[p]),e.abrupt("break",31);case 30:throw Error("setMaterial not found type");case 31:a++,e.next=1;break;case 34:case"end":return e.stop()}},e,u)})),function(e,t,r){return n.apply(this,arguments)});function d(e,t){for(var r in t)e[r]=t[r]}t.a=p},u3qd:function(e,t,r){"use strict";t.a={version:"1.1.5",isCancel:!1,isLoading:!1,postprocessing:null,composer:null,sceneCache:[],debug:!1,carCode:null,animateId:null,hotSpotState:{},spriteState:{},requestList:[],textureCache:{},ftrmCache:{},isRotateWheel:!1,rotateWheelSpeed:1,transRotateWheelSpeed:0,tempRotateWheelSpeed:1,isOpenLight:!1,isShowSellPoints:!1,currCameraPos:null,storeCameraDistance:null,isGetAlpha:!1,firstAlpha:null}}},["X5ol"]);
//# sourceMappingURL=webgl.ca46ce926e65121e2a06.js.map