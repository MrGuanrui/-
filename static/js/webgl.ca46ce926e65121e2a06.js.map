{"version":3,"sources":["webpack:///./src/FontreGL/three/materials/CarPaintShader.js","webpack:///./src/FontreGL/three/materials/CarPaintShader.Text.js","webpack:///./src/FontreGL/config/carConfig.js","webpack:///./src/FontreGL/three/libs/FBXLoader.js","webpack:///./src/FontreGL/three/LoadAssets.Lights.js","webpack:///./src/FontreGL/three/LoadAssets.Sprites.js","webpack:///./src/FontreGL/three/LoadAssets.Models.js","webpack:///./src/FontreGL/three/LoadAssets.js","webpack:///./src/FontreGL/three/libs/FontreLoader.js","webpack:///./src/FontreGL/three/libs/DRACOLoader.js","webpack:///./src/FontreGL/three/libs/FontreOrbitControls.js","webpack:///./src/FontreGL/three/libs/Lensflare.js","webpack:///./src/FontreGL/three/libs/postprocessing/EffectComposer.js","webpack:///./src/FontreGL/three/libs/postprocessing/SSAARenderPass.js","webpack:///./src/FontreGL/three/libs/postprocessing/TAARenderPass.js","webpack:///./src/FontreGL/three/libs/postprocessing/RenderPass.js","webpack:///./src/FontreGL/three/libs/postprocessing/MaskPass.js","webpack:///./src/FontreGL/three/libs/postprocessing/ShaderPass.js","webpack:///./src/FontreGL/three/Three.Constant.js","webpack:///./src/FontreGL/three/Postprocessing.js","webpack:///./src/FontreGL/three/libs/GLTFLoader.js","webpack:///./node_modules/_constants-browserify@1.0.0@constants-browserify/constants.json","webpack:///./src/FontreGL/three/InterFace.js","webpack:///./src/FontreGL/three/LoadAssets.AfterModel.js","webpack:///./src/FontreGL/three/Detector.js","webpack:///./src/FontreGL/three/libs/Stats.js","webpack:///./src/FontreGL/three/Event.js","webpack:///./src/FontreGL/three/libs/CopyShader.js","webpack:///./src/FontreGL/three/libs/compute.js","webpack:///./src/FontreGL/utils.js","webpack:///./src/FontreGL/pano/Init.js","webpack:///./src/FontreGL/main.js","webpack:///./src/FontreCarConfig/utils.js","webpack:///./src/FontreCarConfig/index.js","webpack:///./src/FontreGL/three/materials/GetMaterial.js","webpack:///./src/FontreGL/three/Event.MouseMove.js","webpack:///./src/FontreGL/three/Init.js","webpack:///./src/FontreGL/config/texConfig.js","webpack:///./src/FontreGL/three/actions/doors/closeDoor.js","webpack:///./src/FontreGL/three/actions/showSize/index.js","webpack:///./src/FontreGL/three/actions/index.js","webpack:///./src/FontreGL/three/Tools.js","webpack:///./src/FontreGL/three/Animation.Action.js","webpack:///./src/FontreGL/three/process/Process.js","webpack:///./src/FontreGL/three/libs/inflate.min.js","webpack:///./src/FontreGL/three/materials/SetMaterial.Constant.js","webpack:///./src/FontreGL/three/Loaders.js","webpack:///./src/FontreGL/three/Animation.js","webpack:///./src/FontreGL/three/shade/createShade.js","webpack:///./src/FontreGL/three/shade/hideShade.js","webpack:///./src/FontreGL/three/shade/showShade.js","webpack:///./src/FontreGL/three/shade/index.js","webpack:///./src/FontreGL/three/materials/SetMaterial.js","webpack:///./src/FontreGL/state/state.js"],"names":["_ref","_callee2","materialData","aoMap","envMap","color1","color2","regenerator_default","a","wrap","_context2","prev","next","t0","type","value","THREE","Color","t1","getTexture","t2","sent","t3","t4","t5","t6","min","max","t7","getEnvMap","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","abrupt","paintColor1","paintColor2","map","normalMap","normalScale","glossLevel","microflakeNMap","flakeColor","flakeScale","normalPerturbation","microflakePerturbationA","microflakePerturbation","filmic","time","stop","this","require","getCarPaintShader","asyncToGenerator_default","mark","_callee","param","_context","fragmentShader","vertexShader","Uniform","derivatives","uniforms","extensions","_x","apply","arguments","window","FONTRE_PATH","carConfig","lafesta","assets","backgroundColor","exteriorViewpoint","position","x","y","z","mobilePosition","lookAt","minDistance","maxDistance","interiorViewpoint","lon","lat","interiorColors","colorCode","desc","data","pano","xml_file","jsFile","exteriorHotspot","red","red_cartop","white","white_cartop","brown","brown_cartop","gray","gray_cartop","blue","blue_cartop","gold","gold_cartop","interiorScreen","scene_frontRow","scene_BackRow","modelSwitching","code","Zlib","FBXLoader","manager","undefined","DefaultLoadingManager","FBXTreeParser","textureLoader","TextParser","BinaryParser","BinaryReader","buffer","littleEndian","dv","DataView","offset","FBXTree","getFbxVersion","text","match","parseInt","Error","convertFBXTimeToSeconds","prototype","constructor","crossOrigin","load","url","onLoad","onProgress","onError","self","resourceDirectory","LoaderUtils","extractUrlBase","loader","FileLoader","setResponseType","scene","parse","error","console","log","setTimeout","itemError","setCrossOrigin","FBXBuffer","CORRECT","byteLength","length","convertArrayBufferToString","FBXText","cursor","read","result","slice","i","num","isFbxFormatASCII","TextureLoader","setPath","connections","parseConnections","images","parseImages","textures","parseTextures","materials","parseMaterials","deformers","parseDeformers","geometryMap","parseGeometries","parseScene","connectionMap","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_map___default","Connections","forEach","rawConnection","fromID","toID","relationship","has","set","parents","children","parentRelationship","ID","get","push","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","id","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","base64Content","image","parseImage","filename","split","pop","content","fileName","extension","lastIndexOf","toLowerCase","TGALoader","warn","Loader","Handlers","add","array","Uint8Array","URL","createObjectURL","Blob","textureMap","textureNodes","Texture","texture","parseTexture","textureNode","loadTexture","name","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","wrapS","RepeatWrapping","ClampToEdgeWrapping","wrapT","values","Scaling","repeat","currentPath","path","indexOf","FileName","materialMap","materialNodes","Material","material","parseMaterial","materialNode","ShadingModel","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default","parameters","parseParameters","MeshPhongMaterial","MeshLambertMaterial","color","setValues","BumpFactor","bumpScale","Diffuse","fromArray","DiffuseColor","DisplacementFactor","displacementScale","Emissive","emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","parseFloat","Opacity","opacity","transparent","ReflectionFactor","reflectivity","Shininess","shininess","Specular","specular","SpecularColor","child","bumpMap","displacementMap","emissiveMap","mapping","EquirectangularReflectionMapping","specularMap","alphaMap","LayeredTexture","skeletons","morphTargets","DeformerNodes","Deformer","deformerNode","relationships","attrType","skeleton","parseSkeleton","geometryID","morphTarget","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","indices","weights","transform","Matrix4","Transform","transformLink","TransformLink","linkMode","Mode","Indexes","Weights","bones","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","geoNodes","Geometry","geo","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","modelNodes","parent","Model","reduce","modelNode","transformData","eulerOrder","RotationOrder","translation","GeometricTranslation","rotation","GeometricRotation","scale","GeometricScaling","generateTransform","genGeometry","preTransform","BufferGeometry","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","Float32BufferAttribute","vertex","applyToBufferAttribute","addAttribute","colors","Uint16BufferAttribute","weightsIndices","vertexWeights","FBX_Deformer","normal","normalAttribute","Matrix3","getNormalMatrix","uvs","uvBuffer","toString","mappingType","prevMaterialIndex","materialIndex","startIndex","currentIndex","addGroup","groups","lastGroup","lastIndex","start","count","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","uv","parseUVs","weightTable","index","j","weight","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","morphAttributes","rawTarget","morphGeoNode","genMorphGeometry","morphGeo","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UV","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","NURBSCurve","order","Order","isNaN","startKnot","endKnot","degree","knots","KnotVector","controlPoints","pointsValues","Points","l","Vector4","Form","vertices","getPoints","positions","Float32Array","toArray","geometry","BufferAttribute","sceneGraph","Group","modelMap","parseModels","model","setLookAtProperties","connection","bindSkeleton","addAnimations","createAmbientLight","setupMorphMaterials","isGroup","animations","node","buildSkeleton","createCamera","createLight","createMesh","createCurve","PropertyBinding","sanitizeNodeName","setModelTransforms","bone","subBone","Bone","matrixWorld","copy","cameraAttribute","attr","NodeAttribute","Object3D","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","width","innerWidth","height","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","PerspectiveCamera","setFocalLength","OrthographicCamera","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","distance","FarAttenuationEnd","EnableFarAttenuation","PointLight","DirectionalLight","angle","Math","PI","InnerAngle","degToRad","penumbra","OuterAngle","SpotLight","CastShadows","castShadow","attributes","vertexColors","VertexColors","skinning","SkinnedMesh","Mesh","LineBasicMaterial","linewidth","Line","Lcl_Translation","rotationOffset","RotationOffset","Lcl_Rotation","preRotation","PreRotation","postRotation","PostRotation","Lcl_Scaling","applyMatrix","lookAtTarget","pos","target","Vector3","bindMatrices","parsePoseNodes","geoConnParent","bind","Skeleton","BindPoseNode","Pose","poseNodes","PoseNode","Array","isArray","poseNode","Node","Matrix","rawClips","parseAnimations","key","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","curves","rawCurves","animationCurve","times","KeyTime","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","getModelAnimTransform","preRotations","postRotations","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","tracks","rawTracks","concat","generateTracks","AnimationClip","Quaternion","decompose","Euler","setFromQuaternion","T","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","S","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","VectorKeyframeTrack","interpolateRotations","setFromEuler","inverse","quaternion","euler","quaternionValues","premultiply","multiply","QuaternionKeyframeTrack","val","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","sort","b","filter","elem","prevValue","xIndex","yIndex","zIndex","xValue","yValue","zValue","curve","valuesSpan","absoluteSpan","abs","numSubIntervals","step","nextValue","initialTime","interval","nextTime","interpolatedTimes","interpolatedValues","inject","GlobalSettings","ambientColor","AmbientColor","r","g","AmbientLight","traverse","isMesh","uuid","matUuid","sharedMat","clone","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","allNodes","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","property","nodeName","trim","replace","nodeAttrs","attrs","parseNodeAttr","currentNode","contentLine","propName","propValue","connProps","from","to","rest","append","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","type2","flag","reader","skip","version","getUint32","endOfContent","parseNode","size","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","encoding","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","reader2","Inflate","decompress","low","high","nullByte","decodeText","dataArray","infoObject","tempMat","tempEuler","tempVec","identity","getEulerOrder","makeRotationFromEuler","getInverse","setPosition","enums","a1","a2","getLightType","light","lightParam","addLights","Lights","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_ref2","get_iterator_default","done","setMaterial","LightEditChildren","Scene","return","finish","_this","loadAssets","Sprites","item","Sprite","getMaterial","State","spriteState","LoadAssets_Sprites__this","mesh","_ref4","Hotspot","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","hot","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_item$pivotPoint","getUsrData","models","slicedToArray_default","pivotPoint","makeTranslation","_callee3","blob","modelTotal","byte_offset","byte_length","file_name_array","drcContent","_context3","ArrayToint32","Int8Array","AsciiArrayToStr","Loaders","adjustRotate","floor","process","processNum","addModels","modelPath","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","requestPath","object","Models","getAssetPath","Object","call","addFtrm","loadFloor","addSpriteCarLight","LoadAssets_Models__this","usrData","timeEnd","addSprites","LoadAssets__this","decoder","FONTRELoader","verbosity","attributeOptions","dracoDecoderType","drawMode","TrianglesDrawMode","loadFile","loadFtrn","scope","promise_default","resolve","reject","key_length","buffer_length","err","_x2","_x3","_x4","decodeFtrBlob","decodeDracoFile","setVerbosity","level","setDracoDecoderType","setDrawMode","setSkipDequantization","attributeName","skipDequantization","getAttributeOptions","rawBuffer","callback","getDecoder","dracoDecoder","decodeDracoFileInternal","DecoderBuffer","Init","Decoder","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","POINT_CLOUD","errorMsg","convertDracoGeometryTo3JS","dracoGeometry","decodingStatus","SkipAttributeTransform","POSITION","start_time","performance","now","DecodeBufferToMesh","PointCloud","DecodeBufferToPointCloud","ok","ptr","error_msg","destroy","numFaces","numPoints","numVertexCoordinates","numTextureCoordinates","numColorCoordinates","numAttributes","decode_end","numColorCoordinateComponents","num_faces","num_points","num_attributes","posAttId","GetAttributeId","posAttribute","GetAttribute","posAttributeData","DracoFloat32Array","GetAttributeFloatForAllPoints","colAttributeData","colorAttId","COLOR","colAttribute","num_components","norAttributeData","normalAttId","NORMAL","norAttribute","textCoordAttributeData","texCoordAttId","TEX_COORD","texCoordAttribute","geometryBuffer","normals","GetValue","TriangleStripDrawMode","stripsArray","DracoInt32Array","GetTriangleStripsFromMesh","Uint32Array","numIndices","ia","GetFaceFromMesh","setIndex","Uint32BufferAttribute","posTransform","AttributeQuantizationTransform","InitFromAttribute","isQuantized","maxRange","range","numQuantizationBits","quantization_bits","minValues","min_value","decode_time","import_time","isVersionSupported","onDracoDecoderModuleLoadedCallback","DracoDecoderModule","module","DRACOLoader","timeLoaded","nativeAttributeMap","loadFtrm","attributeUniqueIdMap","attributeTypeMap","getDecoderModule","then","addAttributeToGeometry","attributeType","attribute","attributeData","TypedBufferAttribute","numComponents","numValues","DracoInt8Array","GetAttributeInt8ForAllPoints","Int8BufferAttribute","Int16Array","DracoInt16Array","GetAttributeInt16ForAllPoints","Int16BufferAttribute","Int32Array","GetAttributeInt32ForAllPoints","Int32BufferAttribute","DracoUInt8Array","GetAttributeUInt8ForAllPoints","Uint8BufferAttribute","Uint16Array","DracoUInt16Array","GetAttributeUInt16ForAllPoints","DracoUInt32Array","GetAttributeUInt32ForAllPoints","attId","attributeId","GetAttributeByUniqueId","decoderPath","decoderConfig","decoderModulePromise","setDecoderPath","setDecoderConfig","config","wasmBinary","releaseDecoderModule","promise","WebAssembly","typeof_default","_loadScript","wasmBinaryFile","_loadArrayBuffer","onModuleLoaded","src","prevScript","document","getElementById","parentNode","removeChild","head","getElementsByTagName","script","createElement","onload","appendChild","OrbitControls","domElement","enabled","Infinity","customDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","zoom0","zoom","onClickCallback","onMouseMoveCallBack","isIntoInterior","fpsTarget","lookSpeed","phi","theta","focalLengthBackup","getFocalLength","interactingTimeOut","interactingTime","getPolarAngle","spherical","getAzimuthalAngle","saveState","reset","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","delta","isOrbit","quat","setFromUnitVectors","up","quatInverse","lastPosition","lastQuaternion","actualLookSpeed","sphericalDelta","EPS","radToDeg","targetPosition","sin","cos","panOffset","sub","applyQuaternion","setFromVector3","rotateLeft","makeSafe","radius","setFromSpherical","zoomChanged","distanceToSquared","dot","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onClick","onMouseMove","onMouseUp","onKeyDown","moveLeft","moveUp","rotateUp","moveIn","dollyOut","getZoomScale","moveOut","dollyIn","startEvent","endEvent","cusMouseDownMove","cusMouseUp","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pow","v","panLeft","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","pan","deltaX","deltaY","element","body","targetDistance","tan","clientHeight","matrix","right","left","clientWidth","top","bottom","dollyScale","event","preventDefault","button","clientX","clientY","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","addEventListener","subVectors","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","sqrt","handleTouchStartDolly","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","create_default","EventDispatcher","define_properties_default","center","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","float32Array","interleavedBuffer","Lensflare","MeshBasicMaterial","frustumCulled","renderOrder","positionScreen","tempMap","DataTexture","RGBFormat","minFilter","NearestFilter","magFilter","needsUpdate","occlusionMap","material1a","RawShaderMaterial","screenPosition","join","depthTest","depthWrite","material1b","mesh1","elements","shader","LensflareElement","Shader","material2","blending","AdditiveBlending","mesh2","addElement","screenPositionPixels","validArea","Box2","viewport","onBeforeRender","renderer","camera","getCurrentViewport","invAspect","w","halfViewportWidth","halfViewportHeight","setFromMatrixPosition","applyMatrix4","matrixWorldInverse","projectionMatrix","containsPoint","copyFramebufferToTexture","renderBufferDirect","vecX","vecY","uniformsNeedUpdate","isLensflare","InterleavedBuffer","InterleavedBufferAttribute","EffectComposer","renderTarget","LinearFilter","format","RGBAFormat","stencilBuffer","getDrawingBufferSize","WebGLRenderTarget","renderTarget1","renderTarget2","writeBuffer","readBuffer","passes","CopyShader","ShaderPass","copyPass","assign_default","swapBuffers","addPass","pass","setSize","insertPass","splice","render","maskActive","il","needsSwap","context","stencilFunc","NOTEQUAL","EQUAL","MaskPass","ClearMaskPass","Pass","clear","renderToScreen","SSAARenderPass","clearColor","clearAlpha","sampleLevel","unbiased","copyShader","copyUniforms","UniformsUtils","copyMaterial","ShaderMaterial","premultipliedAlpha","camera2","scene2","quad2","PlaneBufferGeometry","sampleRenderTarget","jitterOffsets","JitterVectors","autoClear","oldClearColor","getClearColor","getHex","oldClearAlpha","getClearAlpha","baseSampleWeight","jitterOffset","setViewOffset","sampleWeight","setClearColor","clearViewOffset","TAARenderPass","params","accumulate","accumulateIndex","holdRenderTarget","numSamplesPerFrame","accumulationWeight","RenderPass","overrideMaterial","clearDepth","oldAutoClear","writeValue","clearValue","setMask","depth","setLocked","stencil","setTest","setOp","REPLACE","setFunc","ALWAYS","setClear","KEEP","textureID","defines","quad","FPS","debug","Staus","showPanel","dom","background","fog","Fog","Camera","rderer","CanvasRenderer","Detector","webgl","WebGLRenderer","antialias","precision","alpha","powerPreference","preserveDrawingBuffer","Renderer","Orbit","Mouse","Raycaster","Fileloader","FontreLoader","dracoLoader","CubeLoader","CubeTextureLoader","Clock","__webpack_require__","GLTFLoader","itemStart","_onError","e","itemEnd","gltf","setDRACOLoader","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","headerView","BINARY_EXTENSION_HEADER_LENGTH","header","magic","chunkView","chunkIndex","chunkLength","chunkType","BINARY_EXTENSION_CHUNK_TYPES","JSON","contentArray","BIN","byteOffset","json","asset","extensionsUsed","extensionName","extensionsRequired","KHR_LIGHTS_PUNCTUAL","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","parser","GLTFParser","scenes","cameras","glTF","userData","addUnknownExtensionsToUserData","DDSLoader","ddsLoader","lights","lightDefs","lightNode","lightDef","spot","innerConeAngle","outerConeAngle","decay","getMaterialType","extendParams","materialParams","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_promise___default","all","specularGlossinessParams","pbrSpecularGlossiness","ShaderLib","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","roughness","metalness","roughnessMap","metalnessMap","setHex","glossiness","glossinessMap","STANDARD","diffuseFactor","diffuseTexture","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossIndex","createMaterial","isGLTFSpecularGlossinessMaterial","lightMap","lightMapIntensity","aoMapIntensity","displacementBias","envMapIntensity","refractionRatio","cloneMaterial","source","refreshUniforms","group","uvScaleMap","diffuse","isWebGLRenderTarget","matrixAutoUpdate","updateMatrix","uvTransform","flipEnvMap","isCubeTexture","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","Interpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","getDependency","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_create___default","copySampleValue_","valueSize","beforeStart_","afterEnd_","interpolate_","i1","t","stride","stride2","stride3","td","p","pp","ppp","offset1","offset0","s0","s1","s2","s3","p0","m0","p1","m1","WEBGL_CONSTANTS","Number","5120","5121","5122","5123","5125","5126","WEBGL_FILTERS","9728","9729","9984","NearestMipMapNearestFilter","9985","LinearMipMapNearestFilter","9986","NearestMipMapLinearFilter","9987","LinearMipMapLinearFilter","WEBGL_WRAPPINGS","33071","33648","MirroredRepeatWrapping","10497","WEBGL_TYPE_SIZES","BackSide","FrontSide","NeverDepth","LessDepth","EqualDepth","LessEqualDepth","GreaterEqualDepth","NotEqualDepth","AlwaysDepth","AddEquation","SubtractEquation","ReverseSubtractEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","TEXCOORD_0","TEXCOORD0","TEXCOORD","TEXCOORD_1","COLOR_0","COLOR0","WEIGHTS_0","WEIGHT","JOINTS_0","JOINT","PATH_PROPERTIES","INTERPOLATION","CUBICSPLINE","InterpolateSmooth","LINEAR","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","MIME_TYPE_FORMATS","image/png","image/jpeg","resolveURL","test","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","meshDef","morphTargetInfluences","targetNames","isObjectEqual","isArrayEqual","getCachedGeometry","cache","newPrimitive","cached","cloneBufferAttribute","isInterleavedBufferAttribute","itemSize","getX","getY","getZ","getW","options","objects","remove","removeAll","primitiveCache","multiplePrimitivesCache","multiPassGeometryCache","fileLoader","addPrimitiveAttributes","primitiveDef","gltfAttributeName","threeAttributeName","bufferAttribute","targets","hasMorphPosition","hasMorphNormal","morphNormals","jl","setXYZ","markDefs","getMultiDependencies","dependencies","catch","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","meshReferences","meshUses","skinIndex","skinLength","joints","isBone","nodeIndex","nodeLength","nodeDef","skin","isSkinnedMesh","cacheKey","dependency","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","getDependencies","defs","def","types","results","pendings","bufferIndex","bufferDef","uri","bufferViewDef","bufferViews","accessorIndex","sparse","pendingBufferViews","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","byteStride","ibCacheKey","ib","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setArray","setX","setY","setZ","setW","textureIndex","webkitURL","textureDef","textureExtensions","sourceURI","isObjectURL","mimeType","revokeObjectURL","flipY","sampler","samplers","textureName","materialType","materialDef","materialExtensions","sgExtension","kmuExtension","MeshStandardMaterial","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","side","DoubleSide","alphaMode","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","sRGBEncoding","loadGeometries","primitives","originalPrimitives","isMultiPass","primitive0","targets0","mode","isMultiPassGeometry","geometryPromise","geometries","baseGeometry","getCachedMultiPassGeometry","accessor","BufferGeometryUtils","baseGeometries","getCachedCombinedGeometry","mergeBufferGeometries","meshIndex","originalMaterials","isMultiMaterial","TriangleFanDrawMode","LineSegments","LineLoop","useVertexColors","useFlatShading","useSkinning","useMorphTargets","useMorphNormals","isPoints","pointsMaterial","PointsMaterial","isLine","lineMaterial","cachedMaterial","flatShading","uv2","cameraIndex","cameraDef","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","channels","channel","input","output","inputAccessor","outputAccessor","TypedKeyframeTrack","targetName","interpolation","track","AnimationUtils","arraySlice","createInterpolant","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","instanceNum","buildNodeHierachy","nodeId","parentObject","boneInverses","jointId","jointNode","mat","sceneIndex","sceneDef","nodeIds","exports","O_RDONLY","O_WRONLY","O_RDWR","S_IFMT","S_IFREG","S_IFDIR","S_IFCHR","S_IFBLK","S_IFIFO","S_IFLNK","S_IFSOCK","O_CREAT","O_EXCL","O_NOCTTY","O_TRUNC","O_APPEND","O_DIRECTORY","O_NOFOLLOW","O_SYNC","O_SYMLINK","O_NONBLOCK","S_IRWXU","S_IRUSR","S_IWUSR","S_IXUSR","S_IRWXG","S_IRGRP","S_IWGRP","S_IXGRP","S_IRWXO","S_IROTH","S_IWOTH","S_IXOTH","E2BIG","EACCES","EADDRINUSE","EADDRNOTAVAIL","EAFNOSUPPORT","EAGAIN","EALREADY","EBADF","EBADMSG","EBUSY","ECANCELED","ECHILD","ECONNABORTED","ECONNREFUSED","ECONNRESET","EDEADLK","EDESTADDRREQ","EDOM","EDQUOT","EEXIST","EFAULT","EFBIG","EHOSTUNREACH","EIDRM","EILSEQ","EINPROGRESS","EINTR","EINVAL","EIO","EISCONN","EISDIR","ELOOP","EMFILE","EMLINK","EMSGSIZE","EMULTIHOP","ENAMETOOLONG","ENETDOWN","ENETRESET","ENETUNREACH","ENFILE","ENOBUFS","ENODATA","ENODEV","ENOENT","ENOEXEC","ENOLCK","ENOLINK","ENOMEM","ENOMSG","ENOPROTOOPT","ENOSPC","ENOSR","ENOSTR","ENOSYS","ENOTCONN","ENOTDIR","ENOTEMPTY","ENOTSOCK","ENOTSUP","ENOTTY","ENXIO","EOPNOTSUPP","EOVERFLOW","EPERM","EPIPE","EPROTO","EPROTONOSUPPORT","EPROTOTYPE","ERANGE","EROFS","ESPIPE","ESRCH","ESTALE","ETIME","ETIMEDOUT","ETXTBSY","EWOULDBLOCK","EXDEV","SIGHUP","SIGINT","SIGQUIT","SIGILL","SIGTRAP","SIGABRT","SIGIOT","SIGBUS","SIGFPE","SIGKILL","SIGUSR1","SIGSEGV","SIGUSR2","SIGPIPE","SIGALRM","SIGTERM","SIGCHLD","SIGCONT","SIGSTOP","SIGTSTP","SIGTTIN","SIGTTOU","SIGURG","SIGXCPU","SIGXFSZ","SIGVTALRM","SIGPROF","SIGWINCH","SIGIO","SIGSYS","SSL_OP_ALL","SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION","SSL_OP_CIPHER_SERVER_PREFERENCE","SSL_OP_CISCO_ANYCONNECT","SSL_OP_COOKIE_EXCHANGE","SSL_OP_CRYPTOPRO_TLSEXT_BUG","SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS","SSL_OP_EPHEMERAL_RSA","SSL_OP_LEGACY_SERVER_CONNECT","SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER","SSL_OP_MICROSOFT_SESS_ID_BUG","SSL_OP_MSIE_SSLV2_RSA_PADDING","SSL_OP_NETSCAPE_CA_DN_BUG","SSL_OP_NETSCAPE_CHALLENGE_BUG","SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG","SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG","SSL_OP_NO_COMPRESSION","SSL_OP_NO_QUERY_MTU","SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TICKET","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","SSL_OP_NO_TLSv1_2","SSL_OP_PKCS1_CHECK_1","SSL_OP_PKCS1_CHECK_2","SSL_OP_SINGLE_DH_USE","SSL_OP_SINGLE_ECDH_USE","SSL_OP_SSLEAY_080_CLIENT_DH_BUG","SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG","SSL_OP_TLS_BLOCK_PADDING_BUG","SSL_OP_TLS_D5_BUG","SSL_OP_TLS_ROLLBACK_BUG","ENGINE_METHOD_DSA","ENGINE_METHOD_DH","ENGINE_METHOD_RAND","ENGINE_METHOD_ECDH","ENGINE_METHOD_ECDSA","ENGINE_METHOD_CIPHERS","ENGINE_METHOD_DIGESTS","ENGINE_METHOD_STORE","ENGINE_METHOD_PKEY_METHS","ENGINE_METHOD_PKEY_ASN1_METHS","ENGINE_METHOD_ALL","ENGINE_METHOD_NONE","DH_CHECK_P_NOT_SAFE_PRIME","DH_CHECK_P_NOT_PRIME","DH_UNABLE_TO_CHECK_GENERATOR","DH_NOT_SUITABLE_GENERATOR","NPN_ENABLED","RSA_PKCS1_PADDING","RSA_SSLV23_PADDING","RSA_NO_PADDING","RSA_PKCS1_OAEP_PADDING","RSA_X931_PADDING","RSA_PKCS1_PSS_PADDING","POINT_CONVERSION_COMPRESSED","POINT_CONVERSION_UNCOMPRESSED","POINT_CONVERSION_HYBRID","F_OK","R_OK","W_OK","X_OK","UV_UDP_REUSEADDR","_ref5","fontregl","initGL","animation","hideShade","showSize","showModel","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default","loadedCar","sceneCache","changeCarShaderColor","_ref3","Ftween","Hex2RGB","changeMaterials","_callee4","_item","_context4","carCode","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_get_iterator___default","_x5","openLFDoor","_this2","_callee5","_context5","_callee6","_context6","hasOwnProperty","ModelSwitching","visible","_x6","switchWheelAnimation","bool","speed","isRotateWheel","rotateWheelSpeed","doors","closeAllDoor","cancelAnimation","animateId","cancelAnimationFrame","resize","h","textureCache","k","hotSpotState","changeView","openLights","_this3","_callee7","_ref6","SpriteLights","len","leftLight","rightLight","_context7","isOpenLight","resetCamera","_this4","_callee8","_context8","closeDoor","outInterior","showSellPoint","_this5","_callee9","_ref7","_context9","isShowSellPoints","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_regenerator___default","lightArr","obj","sprite","spriteRight","_size","_texture","SpriteMaterial","imgPath","follow","lightPath","noLightPath","texBackLight","texNoBackLight","arr","_obj","_mesh","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default","Floor","_Floor$repeat","_Floor$size","plane","FogSky","PlaneGeometry","rotateX","canvas","CanvasRenderingContext2D","WebGLRenderingContext","getContext","webgl2","WebGL2RenderingContext","workers","Worker","fileapi","File","FileReader","FileList","getWebGLErrorMessage","style","fontFamily","fontSize","fontWeight","textAlign","padding","margin","innerHTML","addGetWebGLMessage","global","factory","Stats","container","addPanel","panel","display","cssText","beginTime","Date","prevTime","frames","fpsPanel","Panel","msPanel","memory","memPanel","REVISION","begin","end","usedJSHeapSize","jsHeapSizeLimit","setMode","fg","bg","round","PR","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","maxValue","drawImage","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default","define","electricDoor","callBack","tweenAll","lock","actions","function","blackLine","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default","targetAngle","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default","_item$targetAngle$map","_item$targetAngle$map2","IN","OUT","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","TWEEN","Easing","Circular","Out","In","openSunroof","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_asyncToGenerator___default","spriteMesh","radian","bindEvent","offsetX","offsetY","setFromCamera","intersects","intersectObjects","onClickMesh","clickSellPoint","clickToInteriorPoint","hotspot","openDoor","FontreGL","activeSellPoint","activeToInteriorPoint","tDiffuse","Utf8ArrayToStr","out","char2","char3","c","String","fromCharCode","loadJSFile","_class","classCallCheck_default","krpano","createClass_default","exterColor","interColor","Pano","xml","panoEx","panoIn","_args","checkArguments","embedpano","showPano","exteriors","interior","res","html5","mobilescale","passQueryParameters","vars","onstart","onready","querySelector","hotspots","removepano","fontre","exteriorColor","interiorColor","isLoading","processShow","isCancel","processHide","changeExteriorColor","changeInteriorColor","idName","_args2","init","_x7","_x8","changeExterColor","_x9","changeInterColor","_x10","_x11","show","hide","processShowCallback","processHideCallback","processNumCallback","boole","isFast","isFuel","isComfort","toInterior","_ref8","hideHotSpot","toggleVR","utils","objOld","objNew","diffObj","pro","TypeError","EventEmitter","fontreGL","eventsDispatcher","exteriorDom","interiorPanoDom","isShowExterior","isShowInterior","isShowSpritespin","changeViewLock","exteriorConfig","carName","exteriorColorName","interiorColorName","configLineName","hubName","interiorConfig","isLoadedFrame","_LOAD_STATUS","LOADING","FINISHED","_tempCurrIsShowEx","fontreBind","_EventEmitter","possibleConstructorReturn_default","__proto__","get_prototype_of_default","inherits_default","clearConfig","addLoadingShade","rgba","loadShade","isSupportWebgl","supportWebgl","getSpritespinSource","pathMap","showExterior","imgSource","api","img","diffData","$","spritespin","replaceSourceFrame","SpriteSpin","Utils","preload","preloadCount","progress","complete","loading","skipFrames","Image","animate","frameTime","loop","sizeMode","detectSubsampling","sense","extendApi","frame","emit","common","stringify_default","setLoadingProgressCallback","showInterior","wheelAnimation","chargeAnimation","changeScene","on","funcName","func","leaveAndSaveSnap","switchShowDom","isEx","currIsShowExterior","chengViewLock","insideToOut","outToInside","switchSellPoint","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default","parameter","MaterialEditChildren","timer","MOVE_DISTANCE","CURRENT_DISTANCE","MouseMoveCallback","setProperty","navigator","userAgent","_Carconfig$State$carC","Carconfig","_Carconfig$State$carC2","far","setPixelRatio","createEl","FontLoader","shapes","generateShapes","ShapeBufferGeometry","computeBoundingBox","rotateZ","rotateY","sizeNameList","removeSize","d","__webpack_exports__","showSize_namespaceObject","doors_namespaceObject","assetPath","_findData2","PX","PY","PZ","NX","NY","NZ","cube","Cubes","_findData","_findData3","Textures","easing","endFunc","Function","tween","Tween","onComplete","cameraPath","spriteAnimation","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_object_values___default","toRotateWheel","floorMesh","leftDoorData","isChange","lf_door","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","reverse","aa","execScript","shift","f","m","n","s","POSITIVE_INFINITY","bufferSize","bufferType","A","B","C","subarray","ba","ca","U","V","D","u","M","F","q","E","P","fa","G","H","I","J","K","L","da","ea","N","O","ga","Q","W","verify","ha","method","o","charCodeAt","Y","Z","X","ADAPTIVE","BLOCK","ValueType","Bool","EnvCub","Select","ColorRGB","NoBlending","NormalBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","MinEquation","MaxEquation","FlatShading","SmoothShading","MultiplyOperation","MixOperation","AddOperation","OBJLoader","caChe","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default","ftrn","ftrm","ftrmCache","req","requestList","drc","computeVertexNormals","FBX","wheelCount","_animate","composer","requestAnimationFrame","div","transition","transitionProperty","shadeEl","showShade","_children$i","_iterationObj","materObj","paramObj","postprocessing","transRotateWheelSpeed","tempRotateWheelSpeed","currCameraPos","storeCameraDistance","isGetAlpha","firstAlpha"],"mappings":"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","file":"static/js/webgl.ca46ce926e65121e2a06.js","sourcesContent":["import { vertexShader, fragmentShader } from './CarPaintShader.Text'\nimport { getEnvMap, getTexture } from '../Tools'\n\nconst THREE = require('three')\n\nconst getCarPaintShader = async function(param) {\n  return {\n    fragmentShader: fragmentShader,\n    vertexShader: vertexShader,\n    uniforms: await Uniform(param),\n    extensions: {\n      derivatives: true\n    }\n  }\n}\n\n\nasync function Uniform(materialData) {\n    \n  let { aoMap, envMap, color1, color2 } = materialData\n  \n  return {\n\n    paintColor1: {\n      type: \"c\",\n      value: new THREE.Color(color1 || 0x000000)\n    },\n    paintColor2: {\n      type: \"c\",\n      value: new THREE.Color(color2 || 0x87878b)\n    },\n    map: {\n      type: \"t\",\n      value: await getTexture(aoMap) || null\n    },\n    normalMap: {\n      type: \"t\",\n      value: null\n    },\n    normalScale: {\n      type: \"f\",\n      value: 0.0,\n      min: 0.0,\n      max: 1.0\n    },\n    glossLevel: {\n      type: \"f\",\n      value: 2,\n      min: 0.0,\n      max: 5.0\n    },\n    envMap: {\n      type: \"t\",\n      value: await getEnvMap(envMap) || null\n    },\n    microflakeNMap: {\n      type: \"t\",\n      value: null\n    },\n    flakeColor: {\n      type: \"c\",\n      value: new THREE.Color(0xFF3388)\n    },\n    flakeScale: {\n      type: \"f\",\n      value: 10.0,\n      min: -50.0,\n      max: 1.0\n    },\n    normalPerturbation: {\n      type: \"f\",\n      value: 1.0,\n      min: -1.0,\n      max: 1.0\n    },\n    microflakePerturbationA: {\n      type: \"f\",\n      value: 0.05,\n      min: -1.0,\n      max: 1.0\n    },\n    microflakePerturbation: {\n      type: \"f\",\n      value: 0.2,\n      min: 0.0,\n      max: 1.0\n    },\n    filmic: {\n      type: \"b\",\n      value: true\n    },\n    time: {\n      type: \"f\",\n      value: 0.0\n    }\n  }\n}\n\nexport default getCarPaintShader\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/materials/CarPaintShader.js","/**\n *  Car Paint Shader\n */\n\nconst vertexShader = `\n\n  uniform float flakeScale;\n  uniform float time;\n\n  varying vec4 mvPosition;\n  varying vec3 worldNormal;\n  varying vec3 cameraToVertex;\n  varying vec2 vUv;\n  varying vec2 flakeUv;\n  varying vec2 shadowCoords;\n  varying vec2 texCoords;\n\n  varying vec4 forFragColor;\n  varying vec3 vertPos;\n  varying vec4 worldPosition;\n\n  void main() {\n    mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    worldPosition = modelMatrix * vec4( position, 1.0 );\n    vertPos = vec3(mvPosition) / mvPosition.w;\n\n    worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * normal;\n    cameraToVertex = normalize(worldPosition.xyz - cameraPosition);\n    vUv = uv;\n    flakeUv = uv * flakeScale;\n    shadowCoords = uv;\n    texCoords = uv;\n\n    gl_Position = projectionMatrix * mvPosition;\n    //if (time > 0.0) gl_Position += vec4(0.0, 3.0*sin(time * 2.0 + worldPosition.x / 20.0) + 3.0*sin(time * 2.0 + worldPosition.z / 20.0), 0.0, 0.0);\n  }\n`\n\nconst fragmentShader = `\n\nuniform vec3 paintColor1;\nuniform vec3 paintColor2;\nuniform vec3 paintColor3;\nuniform float time;\n\nuniform float normalPerturbation;\nuniform float microflakePerturbationA;\nuniform float microflakePerturbation;\nuniform bool filmic;\n\nuniform float glossLevel;\nuniform samplerCube envMap;\nuniform samplerCube staticSkybox;\n\nuniform sampler2D normalMap;\nuniform sampler2D microflakeNMap;\nuniform vec3 flakeColor;\nuniform float normalScale;\nuniform sampler2D map;\n\nvarying vec2 vUv;\nvarying vec2 flakeUv;\nvarying vec2 shadowCoords;\nvarying vec2 texCoords;\n\nvarying vec3 worldNormal;\nvarying vec4 mvPosition;\nvarying vec3 cameraToVertex;\nvarying vec3 vertPos;\nvarying vec4 worldPosition;\n\nconst vec3 lightPos = vec3(0.0, 200.0, 700.0);\nconst vec3 lightPos2 = vec3(700.0, 200.0, 0.0);\nconst vec3 lightPos3 = vec3(0.0, 200.0, -700.0);\nconst vec3 lightPos4 = vec3(-800.0, 200.0, 0.0);\n\nconst vec3 specColor = vec3(1.0, 1.0, 1.0);\n\n\n// This function taken directly from the three.js phong fragment shader.\n// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n  vec3 q0 = dFdx( eye_pos.xyz );\n  vec3 q1 = dFdy( eye_pos.xyz );\n  vec2 st0 = dFdx( vUv.st );\n  vec2 st1 = dFdy( vUv.st );\n\n  vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n  vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n  vec3 N = normalize( surf_norm );\n\n  vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n  mapN.xy = normalScale * mapN.xy;\n  mat3 tsn = mat3( S, T, N );\n  return surf_norm;\n  return normalize( tsn * mapN );\n}\n\nvec3 perturbSparkleNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n  vec3 q0 = dFdx( eye_pos.xyz );\n  vec3 q1 = dFdy( eye_pos.xyz );\n  vec2 st0 = dFdx( vUv.st );\n  vec2 st1 = dFdy( vUv.st );\n\n  vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n  vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n  vec3 N = normalize( surf_norm );\n\n  vec3 mapN = texture2D( microflakeNMap, flakeUv ).xyz * 2.0 - 1.0;\n  mapN.xy = 1.0 * mapN.xy;\n  mat3 tsn = mat3( S, T, N );\n  return normalize( tsn * mapN );\n}\n\nvec3 intersectCubeMap(vec3 rayOrigin, vec3 rayDir, float cubeSize){\n\n  vec3 t = (cubeSize * sign(rayDir) - rayOrigin) / rayDir;\n  float minT = min(min(t.x, t.y), t.z);\n  return rayOrigin + minT * rayDir;\n}\n\nvec3 getSpecular(vec3 irradiance, vec3 worldDir, vec3 viewDir, vec3 fleckedNormal, float roughnessSqr, float fFresnel){\n  vec3 halfVec = normalize(worldDir + viewDir);\n  float micro = max(dot(halfVec, fleckedNormal), 0.0);\n  float denom = (micro * micro) * (roughnessSqr/2.0 - 1.0) + 1.0;\n  float distr = roughnessSqr/2.0 / (denom * denom);\n  return distr * fFresnel * irradiance;\n}\n\nvoid main() {\n\n  float roughness = .04;\n  float roughnessSqr = roughness * roughness;\n\n  // radeon normal\n\n  vec3 normal = perturbNormal2Arb( mvPosition.xyz, worldNormal );\n\n\n  //vec3 normal = normalize(worldNormal); // V2\n\n  // V2 normal\n  /*vec3 S = normalize(worldBitangent);\n  vec3 T = normalize(worldTangent);*/\n  /*\n  vec3 q0 = dFdx( mvPosition.xyz );\n  vec3 q1 = dFdy( mvPosition.xyz );\n  vec2 st0 = dFdx( vUv.st );\n  vec2 st1 = dFdy( vUv.st );\n  vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n  vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\n  vec3 N = normalize(worldNormal);\n\n  mat3 tsn = mat3( T, S, N );\n\n  vec4 normalGloss = texture2D( normalMap, texCoords );\n  normalGloss.xyz = (normalGloss.xyz - 128.0 / 255.0) * 2.0;\n  vec3 normal = normalize(tsn * normalGloss.xyz);\n*/\n\n/*vec4 fleck = texture2D(flecksSampler, fleckCoords);\nvec3 fleckedNormal = normalGloss.xyz;\nfleckedNormal.xy += (fleck.xy - .5) * fleckScale;\nfleck.z *= fleckScale;\nfleckedNormal = tsn * normalize(fleckedNormal);\nroughnessSqr -= fleck.z * .1;\nif (roughnessSqr < 0.0) roughnessSqr = 0.0;*/\nvec3 fleckedNormal = normal;  // V2\n// end V2 normal\n\nvec3 color = vec3(0.0);\n\n// radeon fresnel calc.\n//float fFresnel = dot( normalize( -cameraToVertex ), normal );\n// end radon\n\n// V2 fresnel calc.\n//angle to the power of 5\nvec3 viewDir = normalize( -cameraToVertex );\nfloat angle = 1.0 - dot( viewDir, normal);\nfloat fFresnel = angle * angle;\nfFresnel *= fFresnel;\n//fFresnel *= angle;\n\nfloat normalSpecularReflection = .02;\nfFresnel = normalSpecularReflection + (1.0 - normalSpecularReflection) * fFresnel;\n// TODO: V2 fresnel is a bit flatter. Possible cause - camera FOV.\n// end V2 fresnel calc.\n\n// radeon reflection\n/*\nvec3 reflection = 2.0 * worldNormal * fFresnel - normalize(-cameraToVertex);\nvec4 envColor = textureCube( envMap, vec3( -reflection.x, reflection.yz ), 1.0 );\nvec3 rc = envColor.rgb;\n*/\n// end radeon reflection.\n\n// V2 reflection\nfloat skyboxSize = 50000.0;\nvec3 skyboxPosition = vec3(0.0);  \nvec3 reflectedView = -reflect(viewDir, normal);\nvec3 offsetRefl = intersectCubeMap(worldPosition.xyz - skyboxPosition, reflectedView, skyboxSize);\nvec3 rc0 = textureCube(envMap, offsetRefl).xyz; \n\n//vec3 staticReflection = textureCube(staticSkybox, reflectedView).xyz;\n//        rc = mix(staticReflection, rc, fresnelFactor);\n//        vec3 specular = textureCube(specularProbe, reflectedView).xyz;\nvec3 rc = rc0 * rc0 ;\n#ifdef NORMAL_MAP\n    rc *= (3.0 - fleck.z * 10.0);\n#else\n    rc *= 3.0;\n#endif\n\nrc *= fFresnel;\n// end V2 reflection.\n\n// Lighting\n\n// move light depending on cam?\n//vec3 lightPos = -mvPosition.xyz;\n//lightPos.y = -lightPos.y;\n\n// radeon lighting\n/*\nvec3 lightDir = normalize(lightPos - vertPos);\n// directional light?\n//vec3 lightDir = normalize(vec3(0.0,1.0,-5.0));\nvec3 reflectDir = reflect(-lightDir, worldNormal);\n// lambertian currently unused. only specular hilights are used.\nfloat lambertian = max(dot(lightDir,normal), 0.0);\nfloat specular = 0.0;\nif(lambertian > 0.0) {\n  float specAngle = max(dot(reflectDir, -cameraToVertex), 0.0);\n  specular = pow(specAngle, 512.0);\n}\n*/\n\nvec3 diffuseLight = vec3(0.0);\nvec3 specular = vec3(0.0);\n\nvec3 worldDir = normalize(lightPos - worldPosition.xyz);\nfloat lambert = max(dot(worldDir, fleckedNormal), 0.0);\nvec3 irradiance = vec3(1.0,0.8,0.6) * lambert;\ndiffuseLight += irradiance;\nspecular += getSpecular(irradiance, worldDir, viewDir, fleckedNormal, roughnessSqr, fFresnel)*0.05;\n\nworldDir = normalize(lightPos2 - worldPosition.xyz);\nlambert = max(dot(worldDir, fleckedNormal), 0.0);\nirradiance = vec3(1.0,0.8,0.6) * lambert;\ndiffuseLight += irradiance;\nspecular += getSpecular(irradiance, worldDir, viewDir, fleckedNormal, roughnessSqr, fFresnel)*0.05;\n\nworldDir = normalize(lightPos3 - worldPosition.xyz);\nlambert = max(dot(worldDir, fleckedNormal), 0.0);\nirradiance = vec3(1.0,0.8,0.6) * lambert;\ndiffuseLight += irradiance;\nspecular += getSpecular(irradiance, worldDir, viewDir, fleckedNormal, roughnessSqr, fFresnel)*0.05;\n\nworldDir = normalize(lightPos4 - worldPosition.xyz);\nlambert = max(dot(worldDir, fleckedNormal), 0.0);\nirradiance = vec3(1.0,0.8,0.6) * lambert;\ndiffuseLight += irradiance;\nspecular += getSpecular(irradiance, worldDir, viewDir, fleckedNormal, roughnessSqr, fFresnel)*0.05;  \n\n// radeon paint.\n/*\nvec3 vFlakesNormal = perturbSparkleNormal2Arb(mvPosition.xyz, worldNormal);\nvec3 vNp1 = microflakePerturbationA * vFlakesNormal + normalPerturbation * worldNormal;\nvec3 vNp2 = microflakePerturbation * ( vFlakesNormal + worldNormal ) ;\n\nfloat fFresnel1 = clamp(dot( -cameraToVertex, vNp1 ), 0.0, 1.0);\nfloat fFresnel2 = clamp(dot( -cameraToVertex, vNp2 ), 0.0, 1.0);\n\nfloat fFresnel1Sq = fFresnel1 * fFresnel1;\nvec3 paintColor = 0.3 * fFresnel1 * paintColor1 +\n                   0.35 * fFresnel1Sq * paintColor2 +\n                   0.35 * fFresnel1Sq * fFresnel1Sq * paintColor3 +\n                   pow( fFresnel2, 16.0 ) * flakeColor;\n                   */\n// end radeon paint.\n\n// V2 paint\nfloat ratio = angle * angle * angle;\nvec3 paintColor = paintColor1; //mix(paintColor1, paintColor2, ratio);\npaintColor = mix(paintColor1, paintColor2, ratio);\n// end V2 paint\n\n\n// debug fresnel components.\n//vec3 paintColor = pow( fFresnel2, 16.0 ) * flakeColor;\n//vec3 paintColor = fFresnel1Sq * fFresnel1Sq * paintColor3;\n//vec3 paintColor = fFresnel1Sq * paintColor2;\n//vec3 paintColor = fFresnel1 * paintColor1;\n\n// radeon compositing.\n/*\ncolor += paintColor * (0.1 + (0.9 * fFresnel)); \n// apply reflection\ncolor += rc * (1.0 - 0.9 * fFresnel);\n*/\n\n// apply texture\nvec4 colorSample = texture2D(map, texCoords);\ndiffuseLight *= colorSample.xyz;\n\nrc *= colorSample.xyz;\n// clamp the reflections based on AO map.\nif (colorSample.x < 0.5) {\n  //rc = vec3(0.0);\n}\n\n// V2 compositing.\n\n//color = paintColor;\ncolor += paintColor * colorSample.xyz   + specular;\n//color+= paintColor * diffuseLight  ;\ncolor +=  rc*0.85;\n\n\n\n// filmic tone mapping.\nif (filmic) {\n  vec3 film = max(vec3(0.0), color - 0.005);\n  color = (film*(7.2*film+.7))/(film*(6.2*film+1.7)+0.06);\n}\n\nif(gl_FrontFacing)\n  gl_FragColor = vec4(color, 1.0);\nelse\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n }\n`\n\n\n\n\n\nexport { vertexShader, fragmentShader }\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/materials/CarPaintShader.Text.js","\nwindow.FONTRE_PATH = \"static/fontre\";\n\nconst carConfig = {\n\n  // 现代\n  lafesta: {\n    assets: window.FONTRE_PATH + \"/project/lafesta/assets\",\n    backgroundColor: 0xffffff,\n    exteriorViewpoint: {\n      position: { x: -538, y: 65, z: 280 },\n      mobilePosition: {x: -618, y: 23, z: -21},\n      lookAt: { x: 0, y: 0, z: 0 },\n      minDistance: 300,\n      maxDistance: 800\n    },\n    interiorViewpoint: {\n      position: { x: -35, y: 50, z: 36 },\n      lon: -93,\n      lat: -11\n    },\n    // exteriorColors: [\n    //   {\n    //     colorCode: \"white\",\n    //     desc: '凌冽白',\n    //     data: \"white\"\n    //   },\n    //   {\n    //     colorCode: \"brown\",\n    //     desc: '静谧棕',\n    //     data: \"brown\"\n    //   },\n    //   {\n    //     colorCode: \"red\",\n    //     desc: '炙热红',\n    //     data: \"red\"\n    //   },\n    //   {\n    //     colorCode: \"gray\",\n    //     desc: '碳晶灰',\n    //     data: \"gray\"\n    //   },\n    //   {\n    //     colorCode: \"blue\",\n    //     desc: '宝石蓝',\n    //     data: \"blue\"\n    //   },\n    //   {\n    //     colorCode: \"gold\",\n    //     desc: '摩登金',\n    //     data: \"gold\"\n    //   }\n    // ],\n    interiorColors: [\n      {\n        colorCode: \"scene_frontRow\",\n        desc: \"scene_frontRow\",\n        data: \"scene_frontRow\"\n      },\n      {\n        colorCode: \"scene_BackRow\",\n        desc: \"scene_BackRow\",\n        data: \"scene_BackRow\"\n      }\n      \n    ],\n\n    pano: {\n      xml_file: window.FONTRE_PATH + \"/project/lafesta/pano/tour.xml\",\n      jsFile: window.FONTRE_PATH + \"/project/lafesta/pano/tour.js\",  // pano 配置文件\n      exteriorHotspot: {\n        //炙热红\n        red: [\n          \"hotspot_red_l\",//左车漆图\n          \"hotspot_red_r\"//右车漆图\n        ],\n        red_cartop: [\n          \"hotspot_red_l\",//左车漆图\n          \"hotspot_red_r\"//右车漆图\n        ],\n        //凌冽白\n        white: [\n          \"hotspot_white_l\",\n          \"hotspot_white_r\"\n        ],\n        white_cartop: [\n          \"hotspot_white_l\",\n          \"hotspot_white_r\"\n        ],\n        //静谧棕\n        brown: [\n          \"hotspot_brown_l\",\n          \"hotspot_brown_r\"\n        ],\n        brown_cartop: [\n          \"hotspot_brown_l\",\n          \"hotspot_brown_r\"\n        ],\n        //碳晶灰\n        gray: [\n          \"hotspot_gray_l\",\n          \"hotspot_gray_r\"\n        ],\n        gray_cartop: [\n          \"hotspot_gray_l\",\n          \"hotspot_gray_r\"\n        ],\n        //宝石蓝\n        blue: [\n          \"hotspot_blue_l\",\n          \"hotspot_blue_r\"\n        ],\n        blue_cartop: [\n          \"hotspot_blue_l\",\n          \"hotspot_blue_r\"\n        ],\n        //摩登金\n        gold: [\n          \"hotspot_gold_l\",\n          \"hotspot_gold_r\"\n        ],\n        gold_cartop: [\n          \"hotspot_gold_l\",\n          \"hotspot_gold_r\"\n        ]\n      },\n      interiorScreen: {\n        scene_frontRow: 'scene_frontRow',\n        scene_BackRow: 'scene_BackRow',\n      }\n      \n    },\n    modelSwitching: [\n      {\n        code: \"fender\",\n        type: 'options',\n        desc: \"挡泥板(选装)\"\n      }, \n      {\n        code: \"applique1\",\n        type: 'options',\n        desc: \"贴花A(选装)\"\n      },\n      {\n        code: \"applique2\",\n        type: 'options',\n        desc: \"贴花B(选装)\"\n      },\n      {\n        code: \"applique3\",\n        type: 'options',\n        desc: \"贴花C(选装)\"\n      },\n      {\n        code: \"no_fender\",\n        type: 'options',\n        desc: \"无挡泥板(选装)\"\n      }, \n      {\n        code: \"no_applique1\",\n        type: 'options',\n        desc: \"无贴花A(选装)\"\n      },\n      {\n        code: \"no_applique2\",\n        type: 'options',\n        desc: \"无贴花B(选装)\"\n      },\n      {\n        code: \"no_applique3\",\n        type: 'options',\n        desc: \"无贴花C(选装)\"\n      },\n      {\n        code: \"hub1\",\n        type: 'options',\n      },\n      {\n        code: \"hub2\",\n        type: 'options',\n      }\n    ]\n  },\n\n}\n\nexport default carConfig\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/config/carConfig.js","/**\n * @author Kyle-Larson https://github.com/Kyle-Larson\n * @author Takahiro https://github.com/takahirox\n * @author Lewy Blue https://github.com/looeee\n *\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n * \thttp://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * \tBinary format specification:\n *\t\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\nconst THREE = require('three')\nconst { Zlib } = require('./inflate.min.js')\n\nTHREE.FBXLoader = ( function () {\n\n\tfunction FBXLoader( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n\t}\n\n\tFBXLoader.prototype = {\n\n\t\tconstructor: FBXLoader,\n\n\t\tcrossOrigin: 'anonymous',\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar self = this;\n\n\t\t\tvar resourceDirectory = THREE.LoaderUtils.extractUrlBase( url );\n\n\t\t\tvar loader = new THREE.FileLoader( this.manager );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.load( url, function ( buffer ) {\n\t\t\t\ttry {\n\n\t\t\t\t\tvar scene = self.parse( buffer, resourceDirectory );\n\t\t\t\t\tonLoad( scene );\n\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\t\tself.manager.itemError( url );\n\n\t\t\t\t\t}, 0 );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t},\n\n\t\tsetCrossOrigin: function ( value ) {\n\n\t\t\tthis.crossOrigin = value;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( FBXBuffer, resourceDirectory ) {\n\n\t\t\tvar FBXTree;\n\n\t\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\n\n\t\t\t\tFBXTree = new BinaryParser().parse( FBXBuffer );\n\n\t\t\t} else {\n\n\t\t\t\tvar FBXText = convertArrayBufferToString( FBXBuffer );\n\n\t\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n\t\t\t\t}\n\n\t\t\t\tFBXTree = new TextParser().parse( FBXText );\n\n\t\t\t}\n\n\t\t\t//console.log( FBXTree );\n\n\t\t\tvar textureLoader = new THREE.TextureLoader( this.manager ).setPath( resourceDirectory ).setCrossOrigin( this.crossOrigin );\n\n\t\t\treturn new FBXTreeParser( textureLoader ).parse( FBXTree );\n\n\t\t}\n\n\t};\n\n\t// Parse the FBXTree object returned by the BinaryParser or TextParser and return a THREE.Group\n\tfunction FBXTreeParser( textureLoader ) {\n\n\t\tthis.textureLoader = textureLoader;\n\n\t}\n\n\tFBXTreeParser.prototype = {\n\n\t\tconstructor: FBXTreeParser,\n\n\t\tparse: function ( FBXTree ) {\n\n\t\t\tthis.FBXTree = FBXTree;\n\n\t\t\tthis.connections = this.parseConnections();\n\t\t\tvar images = this.parseImages();\n\t\t\tvar textures = this.parseTextures( images );\n\t\t\tvar materials = this.parseMaterials( textures );\n\t\t\tvar deformers = this.parseDeformers();\n\t\t\tvar geometryMap = this.parseGeometries( deformers );\n\n\t\t\treturn this.parseScene( deformers, geometryMap, materials );\n\n\t\t},\n\n\t\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n\t\t// and details the connection type\n\t\tparseConnections: function () {\n\n\t\t\tvar connectionMap = new Map();\n\n\t\t\tif ( 'Connections' in this.FBXTree ) {\n\n\t\t\t\tvar rawConnections = this.FBXTree.Connections.connections;\n\n\t\t\t\trawConnections.forEach( function ( rawConnection ) {\n\n\t\t\t\t\tvar fromID = rawConnection[ 0 ];\n\t\t\t\t\tvar toID = rawConnection[ 1 ];\n\t\t\t\t\tvar relationship = rawConnection[ 2 ];\n\n\t\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( fromID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar parentRelationship = { ID: toID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\n\n\t\t\t\t\tif ( ! connectionMap.has( toID ) ) {\n\n\t\t\t\t\t\tconnectionMap.set( toID, {\n\t\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\t\tchildren: []\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar childRelationship = { ID: fromID, relationship: relationship };\n\t\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn connectionMap;\n\n\t\t},\n\n\t\t// Parse FBXTree.Objects.Video for embedded image data\n\t\t// These images are connected to textures in FBXTree.Objects.Textures\n\t\t// via FBXTree.Connections.\n\t\tparseImages: function () {\n\n\t\t\tvar images = {};\n\t\t\tvar blobs = {};\n\n\t\t\tif ( 'Video' in this.FBXTree.Objects ) {\n\n\t\t\t\tvar videoNodes = this.FBXTree.Objects.Video;\n\n\t\t\t\tfor ( var nodeID in videoNodes ) {\n\n\t\t\t\t\tvar videoNode = videoNodes[ nodeID ];\n\n\t\t\t\t\tvar id = parseInt( nodeID );\n\n\t\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\n\n\t\t\t\t\t// raw image data is in videoNode.Content\n\t\t\t\t\tif ( 'Content' in videoNode ) {\n\n\t\t\t\t\t\tvar arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n\t\t\t\t\t\tvar base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n\t\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\n\n\t\t\t\t\t\t\tvar image = this.parseImage( videoNodes[ nodeID ] );\n\n\t\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var id in images ) {\n\n\t\t\t\tvar filename = images[ id ];\n\n\t\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n\t\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n\t\t\t}\n\n\t\t\treturn images;\n\n\t\t},\n\n\t\t// Parse embedded image data in FBXTree.Video.Content\n\t\tparseImage: function ( videoNode ) {\n\n\t\t\tvar content = videoNode.Content;\n\t\t\tvar fileName = videoNode.RelativeFilename || videoNode.Filename;\n\t\t\tvar extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n\t\t\tvar type;\n\n\t\t\tswitch ( extension ) {\n\n\t\t\t\tcase 'bmp':\n\n\t\t\t\t\ttype = 'image/bmp';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'jpg':\n\t\t\t\tcase 'jpeg':\n\n\t\t\t\t\ttype = 'image/jpeg';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'png':\n\n\t\t\t\t\ttype = 'image/png';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tif':\n\n\t\t\t\t\ttype = 'image/tiff';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'tga':\n\n\t\t\t\t\tif ( typeof THREE.TGALoader !== 'function' ) {\n\n\t\t\t\t\t\tconsole.warn( 'FBXLoader: THREE.TGALoader is required to load TGA textures' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( THREE.Loader.Handlers.get( '.tga' ) === null ) {\n\n\t\t\t\t\t\t\tTHREE.Loader.Handlers.add( /\\.tga$/i, new THREE.TGALoader() );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttype = 'image/tga';\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n\t\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( typeof content === 'string' ) { // ASCII format\n\n\t\t\t\treturn 'data:' + type + ';base64,' + content;\n\n\t\t\t} else { // Binary Format\n\n\t\t\t\tvar array = new Uint8Array( content );\n\t\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Texture\n\t\t// These contain details such as UV scaling, cropping, rotation etc and are connected\n\t\t// to images in FBXTree.Objects.Video\n\t\tparseTextures: function ( images ) {\n\n\t\t\tvar textureMap = new Map();\n\n\t\t\tif ( 'Texture' in this.FBXTree.Objects ) {\n\n\t\t\t\tvar textureNodes = this.FBXTree.Objects.Texture;\n\t\t\t\tfor ( var nodeID in textureNodes ) {\n\n\t\t\t\t\tvar texture = this.parseTexture( textureNodes[ nodeID ], images );\n\t\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn textureMap;\n\n\t\t},\n\n\t\t// Parse individual node in FBXTree.Objects.Texture\n\t\tparseTexture: function ( textureNode, images ) {\n\n\t\t\tvar texture = this.loadTexture( textureNode, images );\n\n\t\t\ttexture.ID = textureNode.id;\n\n\t\t\ttexture.name = textureNode.attrName;\n\n\t\t\tvar wrapModeU = textureNode.WrapModeU;\n\t\t\tvar wrapModeV = textureNode.WrapModeV;\n\n\t\t\tvar valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n\t\t\tvar valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n\t\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n\t\t\t// 0: repeat(default), 1: clamp\n\n\t\t\ttexture.wrapS = valueU === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = valueV === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\n\t\t\tif ( 'Scaling' in textureNode ) {\n\n\t\t\t\tvar values = textureNode.Scaling.value;\n\n\t\t\t\ttexture.repeat.x = values[ 0 ];\n\t\t\t\ttexture.repeat.y = values[ 1 ];\n\n\t\t\t}\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// load a texture specified as a blob or data URI, or via an external URL using THREE.TextureLoader\n\t\tloadTexture: function ( textureNode, images ) {\n\n\t\t\tvar fileName;\n\n\t\t\tvar currentPath = this.textureLoader.path;\n\n\t\t\tvar children = this.connections.get( textureNode.id ).children;\n\n\t\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n\t\t\t\tfileName = images[ children[ 0 ].ID ];\n\n\t\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n\t\t\t\t\tthis.textureLoader.setPath( undefined );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar texture;\n\n\t\t\tif ( textureNode.FileName.slice( - 3 ).toLowerCase() === 'tga' ) {\n\n\t\t\t\ttexture = THREE.Loader.Handlers.get( '.tga' ).load( fileName );\n\n\t\t\t} else {\n\n\t\t\t\ttexture = this.textureLoader.load( fileName );\n\n\t\t\t}\n\n\t\t\tthis.textureLoader.setPath( currentPath );\n\n\t\t\treturn texture;\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Material\n\t\tparseMaterials: function ( textureMap ) {\n\n\t\t\tvar materialMap = new Map();\n\n\t\t\tif ( 'Material' in this.FBXTree.Objects ) {\n\n\t\t\t\tvar materialNodes = this.FBXTree.Objects.Material;\n\n\t\t\t\tfor ( var nodeID in materialNodes ) {\n\n\t\t\t\t\tvar material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\n\n\t\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn materialMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Material\n\t\t// Materials are connected to texture maps in FBXTree.Objects.Textures\n\t\t// FBX format currently only supports Lambert and Phong shading models\n\t\tparseMaterial: function ( materialNode, textureMap ) {\n\n\t\t\tvar ID = materialNode.id;\n\t\t\tvar name = materialNode.attrName;\n\t\t\tvar type = materialNode.ShadingModel;\n\n\t\t\t// Case where FBX wraps shading model in property object.\n\t\t\tif ( typeof type === 'object' ) {\n\n\t\t\t\ttype = type.value;\n\n\t\t\t}\n\n\t\t\t// Ignore unused materials which don't have any connections.\n\t\t\tif ( ! this.connections.has( ID ) ) return null;\n\n\t\t\tvar parameters = this.parseParameters( materialNode, textureMap, ID );\n\n\t\t\tvar material;\n\n\t\t\tswitch ( type.toLowerCase() ) {\n\n\t\t\t\tcase 'phong':\n\t\t\t\t\tmaterial = new THREE.MeshPhongMaterial();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'lambert':\n\t\t\t\t\tmaterial = new THREE.MeshLambertMaterial();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n\t\t\t\t\tmaterial = new THREE.MeshPhongMaterial( { color: 0x3300ff } );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tmaterial.setValues( parameters );\n\t\t\tmaterial.name = name;\n\n\t\t\treturn material;\n\n\t\t},\n\n\t\t// Parse FBX material and return parameters suitable for a three.js material\n\t\t// Also parse the texture map and return any textures associated with the material\n\t\tparseParameters: function ( materialNode, textureMap, ID ) {\n\n\t\t\tvar parameters = {};\n\n\t\t\tif ( materialNode.BumpFactor ) {\n\n\t\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Diffuse ) {\n\n\t\t\t\tparameters.color = new THREE.Color().fromArray( materialNode.Diffuse.value );\n\n\t\t\t} else if ( materialNode.DiffuseColor && materialNode.DiffuseColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\n\t\t\t\tparameters.color = new THREE.Color().fromArray( materialNode.DiffuseColor.value );\n\n\t\t\t}\n\t\t\tif ( materialNode.DisplacementFactor ) {\n\n\t\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Emissive ) {\n\n\t\t\t\tparameters.emissive = new THREE.Color().fromArray( materialNode.Emissive.value );\n\n\t\t\t} else if ( materialNode.EmissiveColor && materialNode.EmissiveColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\n\t\t\t\tparameters.emissive = new THREE.Color().fromArray( materialNode.EmissiveColor.value );\n\n\t\t\t}\n\t\t\tif ( materialNode.EmissiveFactor ) {\n\n\t\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\n\n\t\t\t}\n\t\t\tif ( materialNode.Opacity ) {\n\n\t\t\t\tparameters.opacity = parseFloat( materialNode.Opacity.value );\n\n\t\t\t}\n\t\t\tif ( parameters.opacity < 1.0 ) {\n\n\t\t\t\tparameters.transparent = true;\n\n\t\t\t}\n\t\t\tif ( materialNode.ReflectionFactor ) {\n\n\t\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Shininess ) {\n\n\t\t\t\tparameters.shininess = materialNode.Shininess.value;\n\n\t\t\t}\n\t\t\tif ( materialNode.Specular ) {\n\n\t\t\t\tparameters.specular = new THREE.Color().fromArray( materialNode.Specular.value );\n\n\t\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\n\n\t\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\n\t\t\t\tparameters.specular = new THREE.Color().fromArray( materialNode.SpecularColor.value );\n\n\t\t\t}\n\n\t\t\tvar self = this;\n\t\t\tthis.connections.get( ID ).children.forEach( function ( child ) {\n\n\t\t\t\tvar type = child.relationship;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'Bump':\n\t\t\t\t\t\tparameters.bumpMap = textureMap.get( child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DiffuseColor':\n\t\t\t\t\t\tparameters.map = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DisplacementColor':\n\t\t\t\t\t\tparameters.displacementMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tcase 'EmissiveColor':\n\t\t\t\t\t\tparameters.emissiveMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'NormalMap':\n\t\t\t\t\t\tparameters.normalMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ReflectionColor':\n\t\t\t\t\t\tparameters.envMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.envMap.mapping = THREE.EquirectangularReflectionMapping;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SpecularColor':\n\t\t\t\t\t\tparameters.specularMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TransparentColor':\n\t\t\t\t\t\tparameters.alphaMap = self.getTexture( textureMap, child.ID );\n\t\t\t\t\t\tparameters.transparent = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'AmbientColor':\n\t\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\n\t\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\n\t\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn parameters;\n\n\t\t},\n\n\t\t// get a texture from the textureMap for use by a material.\n\t\tgetTexture: function ( textureMap, id ) {\n\n\t\t\t// if the texture is a layered texture, just use the first layer and issue a warning\n\t\t\tif ( 'LayeredTexture' in this.FBXTree.Objects && id in this.FBXTree.Objects.LayeredTexture ) {\n\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n\t\t\t\tid = this.connections.get( id ).children[ 0 ].ID;\n\n\t\t\t}\n\n\t\t\treturn textureMap.get( id );\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Deformer\n\t\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n\t\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\t\tparseDeformers: function () {\n\n\t\t\tvar skeletons = {};\n\t\t\tvar morphTargets = {};\n\n\t\t\tif ( 'Deformer' in this.FBXTree.Objects ) {\n\n\t\t\t\tvar DeformerNodes = this.FBXTree.Objects.Deformer;\n\n\t\t\t\tfor ( var nodeID in DeformerNodes ) {\n\n\t\t\t\t\tvar deformerNode = DeformerNodes[ nodeID ];\n\n\t\t\t\t\tvar relationships = this.connections.get( parseInt( nodeID ) );\n\n\t\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\n\n\t\t\t\t\t\tvar skeleton = this.parseSkeleton( relationships, DeformerNodes );\n\t\t\t\t\t\tskeleton.ID = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n\t\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\n\n\t\t\t\t\t\tskeletons[ nodeID ] = skeleton;\n\n\t\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\n\n\t\t\t\t\t\tvar morphTarget = {\n\t\t\t\t\t\t\tid: nodeID,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\n\t\t\t\t\t\tmorphTarget.id = nodeID;\n\n\t\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\n\n\t\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\n\t\t\t\tskeletons: skeletons,\n\t\t\t\tmorphTargets: morphTargets,\n\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse single nodes in FBXTree.Objects.Deformer\n\t\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n\t\t// Each skin node represents a skeleton and each cluster node represents a bone\n\t\tparseSkeleton: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawBones = [];\n\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar boneNode = deformerNodes[ child.ID ];\n\n\t\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\n\n\t\t\t\tvar rawBone = {\n\n\t\t\t\t\tID: child.ID,\n\t\t\t\t\tindices: [],\n\t\t\t\t\tweights: [],\n\t\t\t\t\ttransform: new THREE.Matrix4().fromArray( boneNode.Transform.a ),\n\t\t\t\t\ttransformLink: new THREE.Matrix4().fromArray( boneNode.TransformLink.a ),\n\t\t\t\t\tlinkMode: boneNode.Mode,\n\n\t\t\t\t};\n\n\t\t\t\tif ( 'Indexes' in boneNode ) {\n\n\t\t\t\t\trawBone.indices = boneNode.Indexes.a;\n\t\t\t\t\trawBone.weights = boneNode.Weights.a;\n\n\t\t\t\t}\n\n\t\t\t\trawBones.push( rawBone );\n\n\t\t\t} );\n\n\t\t\treturn {\n\n\t\t\t\trawBones: rawBones,\n\t\t\t\tbones: []\n\n\t\t\t};\n\n\t\t},\n\n\t\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\t\tparseMorphTargets: function ( relationships, deformerNodes ) {\n\n\t\t\tvar rawMorphTargets = [];\n\n\t\t\tfor ( var i = 0; i < relationships.children.length; i ++ ) {\n\n\t\t\t\tif ( i === 8 ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.' );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar child = relationships.children[ i ];\n\n\t\t\t\tvar morphTargetNode = deformerNodes[ child.ID ];\n\n\t\t\t\tvar rawMorphTarget = {\n\n\t\t\t\t\tname: morphTargetNode.attrName,\n\t\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\n\t\t\t\t\tid: morphTargetNode.id,\n\t\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\n\n\t\t\t\t};\n\n\t\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\n\n\t\t\t\tvar targetRelationships = this.connections.get( parseInt( child.ID ) );\n\n\t\t\t\ttargetRelationships.children.forEach( function ( child ) {\n\n\t\t\t\t\tif ( child.relationship === undefined ) rawMorphTarget.geoID = child.ID;\n\n\t\t\t\t} );\n\n\t\t\t\trawMorphTargets.push( rawMorphTarget );\n\n\t\t\t}\n\n\t\t\treturn rawMorphTargets;\n\n\t\t},\n\n\t\t// Parse nodes in FBXTree.Objects.Geometry\n\t\tparseGeometries: function ( deformers ) {\n\n\t\t\tvar geometryMap = new Map();\n\n\t\t\tif ( 'Geometry' in this.FBXTree.Objects ) {\n\n\t\t\t\tvar geoNodes = this.FBXTree.Objects.Geometry;\n\n\t\t\t\tfor ( var nodeID in geoNodes ) {\n\n\t\t\t\t\tvar relationships = this.connections.get( parseInt( nodeID ) );\n\t\t\t\t\tvar geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\n\n\t\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn geometryMap;\n\n\t\t},\n\n\t\t// Parse single node in FBXTree.Objects.Geometry\n\t\tparseGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tswitch ( geoNode.attrType ) {\n\n\t\t\t\tcase 'Mesh':\n\t\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\treturn this.parseNurbsGeometry( geoNode );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\n\t\tparseMeshGeometry: function ( relationships, geoNode, deformers ) {\n\n\t\t\tvar skeletons = deformers.skeletons;\n\t\t\tvar morphTargets = deformers.morphTargets;\n\n\t\t\tvar self = this;\n\t\t\tvar modelNodes = relationships.parents.map( function ( parent ) {\n\n\t\t\t\treturn self.FBXTree.Objects.Model[ parent.ID ];\n\n\t\t\t} );\n\n\t\t\t// don't create geometry if it is not associated with any models\n\t\t\tif ( modelNodes.length === 0 ) return;\n\n\t\t\tvar skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n\t\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n\t\t\t\treturn skeleton;\n\n\t\t\t}, null );\n\n\t\t\tvar morphTarget = relationships.children.reduce( function ( morphTarget, child ) {\n\n\t\t\t\tif ( morphTargets[ child.ID ] !== undefined ) morphTarget = morphTargets[ child.ID ];\n\n\t\t\t\treturn morphTarget;\n\n\t\t\t}, null );\n\n\t\t\t// TODO: if there is more than one model associated with the geometry, AND the models have\n\t\t\t// different geometric transforms, then this will cause problems\n\t\t\t// if ( modelNodes.length > 1 ) { }\n\n\t\t\t// For now just assume one model and get the preRotations from that\n\t\t\tvar modelNode = modelNodes[ 0 ];\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = modelNode.RotationOrder.value;\n\t\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\n\t\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\n\t\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\n\n\t\t\tvar transform = generateTransform( transformData );\n\n\t\t\treturn this.genGeometry( geoNode, skeleton, morphTarget, transform );\n\n\t\t},\n\n\t\t// Generate a THREE.BufferGeometry from a node in FBXTree.Objects.Geometry\n\t\tgenGeometry: function ( geoNode, skeleton, morphTarget, preTransform ) {\n\n\t\t\tvar geo = new THREE.BufferGeometry();\n\t\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\n\n\t\t\tvar geoInfo = this.parseGeoNode( geoNode, skeleton );\n\t\t\tvar buffers = this.genBuffers( geoInfo );\n\n\t\t\tvar positionAttribute = new THREE.Float32BufferAttribute( buffers.vertex, 3 );\n\n\t\t\tpreTransform.applyToBufferAttribute( positionAttribute );\n\n\t\t\tgeo.addAttribute( 'position', positionAttribute );\n\n\t\t\tif ( buffers.colors.length > 0 ) {\n\n\t\t\t\tgeo.addAttribute( 'color', new THREE.Float32BufferAttribute( buffers.colors, 3 ) );\n\n\t\t\t}\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tgeo.addAttribute( 'skinIndex', new THREE.Uint16BufferAttribute( buffers.weightsIndices, 4 ) );\n\n\t\t\t\tgeo.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( buffers.vertexWeights, 4 ) );\n\n\t\t\t\t// used later to bind the skeleton to the model\n\t\t\t\tgeo.FBX_Deformer = skeleton;\n\n\t\t\t}\n\n\t\t\tif ( buffers.normal.length > 0 ) {\n\n\t\t\t\tvar normalAttribute = new THREE.Float32BufferAttribute( buffers.normal, 3 );\n\n\t\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( preTransform );\n\t\t\t\tnormalMatrix.applyToBufferAttribute( normalAttribute );\n\n\t\t\t\tgeo.addAttribute( 'normal', normalAttribute );\n\n\t\t\t}\n\n\t\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\n\n\t\t\t\t// subsequent uv buffers are called 'uv1', 'uv2', ...\n\t\t\t\tvar name = 'uv' + ( i + 1 ).toString();\n\n\t\t\t\t// the first uv buffer is just called 'uv'\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tname = 'uv';\n\n\t\t\t\t}\n\n\t\t\t\tgeo.addAttribute( name, new THREE.Float32BufferAttribute( buffers.uvs[ i ], 2 ) );\n\n\t\t\t} );\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\n\t\t\t\tvar prevMaterialIndex = buffers.materialIndex[ 0 ];\n\t\t\t\tvar startIndex = 0;\n\n\t\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\n\n\t\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\n\n\t\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n\t\t\t\t\t\tprevMaterialIndex = currentIndex;\n\t\t\t\t\t\tstartIndex = i;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\t// the loop above doesn't add the last group, do that here.\n\t\t\t\tif ( geo.groups.length > 0 ) {\n\n\t\t\t\t\tvar lastGroup = geo.groups[ geo.groups.length - 1 ];\n\t\t\t\t\tvar lastIndex = lastGroup.start + lastGroup.count;\n\n\t\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\n\n\t\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// case where there are multiple materials but the whole geometry is only\n\t\t\t\t// using one of them\n\t\t\t\tif ( geo.groups.length === 0 ) {\n\n\t\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.addMorphTargets( geo, geoNode, morphTarget, preTransform );\n\n\t\t\treturn geo;\n\n\t\t},\n\n\t\tparseGeoNode: function ( geoNode, skeleton ) {\n\n\t\t\tvar geoInfo = {};\n\n\t\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\n\t\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\n\n\t\t\tif ( geoNode.LayerElementColor ) {\n\n\t\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementMaterial ) {\n\n\t\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementNormal ) {\n\n\t\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoNode.LayerElementUV ) {\n\n\t\t\t\tgeoInfo.uv = [];\n\n\t\t\t\tvar i = 0;\n\t\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\n\n\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\n\t\t\t\t\ti ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeoInfo.weightTable = {};\n\n\t\t\tif ( skeleton !== null ) {\n\n\t\t\t\tgeoInfo.skeleton = skeleton;\n\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t// loop over the bone's vertex indices and weights\n\t\t\t\t\trawBone.indices.forEach( function ( index, j ) {\n\n\t\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\n\n\t\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\n\n\t\t\t\t\t\t\tid: i,\n\t\t\t\t\t\t\tweight: rawBone.weights[ j ],\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn geoInfo;\n\n\t\t},\n\n\t\tgenBuffers: function ( geoInfo ) {\n\n\t\t\tvar buffers = {\n\t\t\t\tvertex: [],\n\t\t\t\tnormal: [],\n\t\t\t\tcolors: [],\n\t\t\t\tuvs: [],\n\t\t\t\tmaterialIndex: [],\n\t\t\t\tvertexWeights: [],\n\t\t\t\tweightsIndices: [],\n\t\t\t};\n\n\t\t\tvar polygonIndex = 0;\n\t\t\tvar faceLength = 0;\n\t\t\tvar displayedWeightsWarning = false;\n\n\t\t\t// these will hold data for a single face\n\t\t\tvar facePositionIndexes = [];\n\t\t\tvar faceNormals = [];\n\t\t\tvar faceColors = [];\n\t\t\tvar faceUVs = [];\n\t\t\tvar faceWeights = [];\n\t\t\tvar faceWeightIndices = [];\n\n\t\t\tvar self = this;\n\t\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n\t\t\t\tvar endOfFace = false;\n\n\t\t\t\t// Face index and vertex index arrays are combined in a single array\n\t\t\t\t// A cube with quad faces looks like this:\n\t\t\t\t// PolygonVertexIndex: *24 {\n\t\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n\t\t\t\t//  }\n\t\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n\t\t\t\t// to find index of last vertex bit shift the index: ^ - 1\n\t\t\t\tif ( vertexIndex < 0 ) {\n\n\t\t\t\t\tvertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\n\t\t\t\t\tendOfFace = true;\n\n\t\t\t\t}\n\n\t\t\t\tvar weightIndices = [];\n\t\t\t\tvar weights = [];\n\n\t\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\n\n\t\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\n\n\t\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n\t\t\t\t\t\t\tweights.push( wt.weight );\n\t\t\t\t\t\t\tweightIndices.push( wt.id );\n\n\t\t\t\t\t\t} );\n\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( weights.length > 4 ) {\n\n\t\t\t\t\t\tif ( ! displayedWeightsWarning ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n\t\t\t\t\t\t\tdisplayedWeightsWarning = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar wIndex = [ 0, 0, 0, 0 ];\n\t\t\t\t\t\tvar Weight = [ 0, 0, 0, 0 ];\n\n\t\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\n\n\t\t\t\t\t\t\tvar currentWeight = weight;\n\t\t\t\t\t\t\tvar currentIndex = weightIndices[ weightIndex ];\n\n\t\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n\t\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\n\n\t\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\n\t\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\n\n\t\t\t\t\t\t\t\t\tvar tmp = wIndex[ comparedWeightIndex ];\n\t\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\n\t\t\t\t\t\t\t\t\tcurrentIndex = tmp;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tweightIndices = wIndex;\n\t\t\t\t\t\tweights = Weight;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// if the weight array is shorter than 4 pad with 0s\n\t\t\t\t\twhile ( weights.length < 4 ) {\n\n\t\t\t\t\t\tweights.push( 0 );\n\t\t\t\t\t\tweightIndices.push( 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < 4; ++ i ) {\n\n\t\t\t\t\t\tfaceWeights.push( weights[ i ] );\n\t\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\n\n\t\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tvar materialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\n\n\t\t\t\t\t\tvar data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n\t\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\n\n\t\t\t\t\t\t\tfaceUVs[ i ] = [];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\n\t\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tfaceLength ++;\n\n\t\t\t\tif ( endOfFace ) {\n\n\t\t\t\t\tself.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\n\n\t\t\t\t\tpolygonIndex ++;\n\t\t\t\t\tfaceLength = 0;\n\n\t\t\t\t\t// reset arrays for the next face\n\t\t\t\t\tfacePositionIndexes = [];\n\t\t\t\t\tfaceNormals = [];\n\t\t\t\t\tfaceColors = [];\n\t\t\t\t\tfaceUVs = [];\n\t\t\t\t\tfaceWeights = [];\n\t\t\t\t\tfaceWeightIndices = [];\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn buffers;\n\n\t\t},\n\n\t\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\t\tgenFace: function ( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\n\n\t\t\tfor ( var i = 2; i < faceLength; i ++ ) {\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 0 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );\n\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 1 ] ] );\n\t\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 2 ] ] );\n\n\t\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 0 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 0 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 1 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 2 ] );\n\t\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 3 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ 0 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 0 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 1 ] );\n\t\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\n\n\t\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 0 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );\n\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 ] );\n\t\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\taddMorphTargets: function ( parentGeo, parentGeoNode, morphTarget, preTransform ) {\n\n\t\t\tif ( morphTarget === null ) return;\n\n\t\t\tparentGeo.morphAttributes.position = [];\n\t\t\tparentGeo.morphAttributes.normal = [];\n\n\t\t\tvar self = this;\n\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\n\n\t\t\t\tvar morphGeoNode = self.FBXTree.Objects.Geometry[ rawTarget.geoID ];\n\n\t\t\t\tif ( morphGeoNode !== undefined ) {\n\n\t\t\t\t\tself.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\t// a morph geometry node is similar to a standard  node, and the node is also contained\n\t\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n\t\t// and a special attribute Index defining which vertices of the original geometry are affected\n\t\t// Normal and position attributes only have data for the vertices that are affected by the morph\n\t\tgenMorphGeometry: function ( parentGeo, parentGeoNode, morphGeoNode, preTransform ) {\n\n\t\t\tvar morphGeo = new THREE.BufferGeometry();\n\t\t\tif ( morphGeoNode.attrName ) morphGeo.name = morphGeoNode.attrName;\n\n\t\t\tvar vertexIndices = ( parentGeoNode.PolygonVertexIndex !== undefined ) ? parentGeoNode.PolygonVertexIndex.a : [];\n\n\t\t\t// make a copy of the parent's vertex positions\n\t\t\tvar vertexPositions = ( parentGeoNode.Vertices !== undefined ) ? parentGeoNode.Vertices.a.slice() : [];\n\n\t\t\tvar morphPositions = ( morphGeoNode.Vertices !== undefined ) ? morphGeoNode.Vertices.a : [];\n\t\t\tvar indices = ( morphGeoNode.Indexes !== undefined ) ? morphGeoNode.Indexes.a : [];\n\n\t\t\tfor ( var i = 0; i < indices.length; i ++ ) {\n\n\t\t\t\tvar morphIndex = indices[ i ] * 3;\n\n\t\t\t\t// FBX format uses blend shapes rather than morph targets. This can be converted\n\t\t\t\t// by additively combining the blend shape positions with the original geometry's positions\n\t\t\t\tvertexPositions[ morphIndex ] += morphPositions[ i * 3 ];\n\t\t\t\tvertexPositions[ morphIndex + 1 ] += morphPositions[ i * 3 + 1 ];\n\t\t\t\tvertexPositions[ morphIndex + 2 ] += morphPositions[ i * 3 + 2 ];\n\n\t\t\t}\n\n\t\t\t// TODO: add morph normal support\n\t\t\tvar morphGeoInfo = {\n\t\t\t\tvertexIndices: vertexIndices,\n\t\t\t\tvertexPositions: vertexPositions,\n\t\t\t};\n\n\t\t\tvar morphBuffers = this.genBuffers( morphGeoInfo );\n\n\t\t\tvar positionAttribute = new THREE.Float32BufferAttribute( morphBuffers.vertex, 3 );\n\t\t\tpositionAttribute.name = morphGeoNode.attrName;\n\n\t\t\tpreTransform.applyToBufferAttribute( positionAttribute );\n\n\t\t\tparentGeo.morphAttributes.position.push( positionAttribute );\n\n\t\t},\n\n\t\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\t\tparseNormals: function ( NormalNode ) {\n\n\t\t\tvar mappingType = NormalNode.MappingInformationType;\n\t\t\tvar referenceType = NormalNode.ReferenceInformationType;\n\t\t\tvar buffer = NormalNode.Normals.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tif ( 'NormalIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\n\n\t\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\n\n\t\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 3,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\t\tparseUVs: function ( UVNode ) {\n\n\t\t\tvar mappingType = UVNode.MappingInformationType;\n\t\t\tvar referenceType = UVNode.ReferenceInformationType;\n\t\t\tvar buffer = UVNode.UV.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = UVNode.UVIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 2,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\t\tparseVertexColors: function ( ColorNode ) {\n\n\t\t\tvar mappingType = ColorNode.MappingInformationType;\n\t\t\tvar referenceType = ColorNode.ReferenceInformationType;\n\t\t\tvar buffer = ColorNode.Colors.a;\n\t\t\tvar indexBuffer = [];\n\t\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\t\tindexBuffer = ColorNode.ColorIndex.a;\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 4,\n\t\t\t\tbuffer: buffer,\n\t\t\t\tindices: indexBuffer,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\t\tparseMaterialIndices: function ( MaterialNode ) {\n\n\t\t\tvar mappingType = MaterialNode.MappingInformationType;\n\t\t\tvar referenceType = MaterialNode.ReferenceInformationType;\n\n\t\t\tif ( mappingType === 'NoMappingInformation' ) {\n\n\t\t\t\treturn {\n\t\t\t\t\tdataSize: 1,\n\t\t\t\t\tbuffer: [ 0 ],\n\t\t\t\t\tindices: [ 0 ],\n\t\t\t\t\tmappingType: 'AllSame',\n\t\t\t\t\treferenceType: referenceType\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar materialIndexBuffer = MaterialNode.Materials.a;\n\n\t\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n\t\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\n\t\t\t// for conforming with the other functions we've written for other data.\n\t\t\tvar materialIndices = [];\n\n\t\t\tfor ( var i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n\t\t\t\tmaterialIndices.push( i );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdataSize: 1,\n\t\t\t\tbuffer: materialIndexBuffer,\n\t\t\t\tindices: materialIndices,\n\t\t\t\tmappingType: mappingType,\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t},\n\n\t\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\t\tparseNurbsGeometry: function ( geoNode ) {\n\n\t\t\tif ( THREE.NURBSCurve === undefined ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );\n\t\t\t\treturn new THREE.BufferGeometry();\n\n\t\t\t}\n\n\t\t\tvar order = parseInt( geoNode.Order );\n\n\t\t\tif ( isNaN( order ) ) {\n\n\t\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\n\t\t\t\treturn new THREE.BufferGeometry();\n\n\t\t\t}\n\n\t\t\tvar degree = order - 1;\n\n\t\t\tvar knots = geoNode.KnotVector.a;\n\t\t\tvar controlPoints = [];\n\t\t\tvar pointsValues = geoNode.Points.a;\n\n\t\t\tfor ( var i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n\t\t\t\tcontrolPoints.push( new THREE.Vector4().fromArray( pointsValues, i ) );\n\n\t\t\t}\n\n\t\t\tvar startKnot, endKnot;\n\n\t\t\tif ( geoNode.Form === 'Closed' ) {\n\n\t\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\n\n\t\t\t} else if ( geoNode.Form === 'Periodic' ) {\n\n\t\t\t\tstartKnot = degree;\n\t\t\t\tendKnot = knots.length - 1 - startKnot;\n\n\t\t\t\tfor ( var i = 0; i < degree; ++ i ) {\n\n\t\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar curve = new THREE.NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\n\t\t\tvar vertices = curve.getPoints( controlPoints.length * 7 );\n\n\t\t\tvar positions = new Float32Array( vertices.length * 3 );\n\n\t\t\tvertices.forEach( function ( vertex, i ) {\n\n\t\t\t\tvertex.toArray( positions, i * 3 );\n\n\t\t\t} );\n\n\t\t\tvar geometry = new THREE.BufferGeometry();\n\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t},\n\n\t\t// create the main THREE.Group() to be returned by the loader\n\t\tparseScene: function ( deformers, geometryMap, materialMap ) {\n\n\t\t\tvar sceneGraph = new THREE.Group();\n\n\t\t\tvar modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\n\n\t\t\tvar modelNodes = this.FBXTree.Objects.Model;\n\n\t\t\tvar self = this;\n\t\t\tmodelMap.forEach( function ( model ) {\n\n\t\t\t\tvar modelNode = modelNodes[ model.ID ];\n\t\t\t\tself.setLookAtProperties( model, modelNode, sceneGraph );\n\n\t\t\t\tvar parentConnections = self.connections.get( model.ID ).parents;\n\n\t\t\t\tparentConnections.forEach( function ( connection ) {\n\n\t\t\t\t\tvar parent = modelMap.get( connection.ID );\n\t\t\t\t\tif ( parent !== undefined ) parent.add( model );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( model.parent === null ) {\n\n\t\t\t\t\tsceneGraph.add( model );\n\n\t\t\t\t}\n\n\n\t\t\t} );\n\n\t\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\n\t\t\tthis.addAnimations( sceneGraph );\n\n\t\t\tthis.createAmbientLight( sceneGraph );\n\n\t\t\tthis.setupMorphMaterials( sceneGraph );\n\n\t\t\t// if all the models where already combined in a single group, just return that\n\t\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\n\n\t\t\t\tsceneGraph.children[ 0 ].animations = sceneGraph.animations;\n\t\t\t\treturn sceneGraph.children[ 0 ];\n\n\t\t\t}\n\n\t\t\treturn sceneGraph;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.Model\n\t\tparseModels: function ( skeletons, geometryMap, materialMap ) {\n\n\t\t\tvar modelMap = new Map();\n\t\t\tvar modelNodes = this.FBXTree.Objects.Model;\n\n\t\t\tfor ( var nodeID in modelNodes ) {\n\n\t\t\t\tvar id = parseInt( nodeID );\n\t\t\t\tvar node = modelNodes[ nodeID ];\n\t\t\t\tvar relationships = this.connections.get( id );\n\n\t\t\t\tvar model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\n\n\t\t\t\tif ( ! model ) {\n\n\t\t\t\t\tswitch ( node.attrType ) {\n\n\t\t\t\t\t\tcase 'Camera':\n\t\t\t\t\t\t\tmodel = this.createCamera( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Light':\n\t\t\t\t\t\t\tmodel = this.createLight( relationships );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Mesh':\n\t\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'LimbNode': // usually associated with a Bone, however if a Bone was not created we'll make a Group instead\n\t\t\t\t\t\tcase 'Null':\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tmodel = new THREE.Group();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel.name = THREE.PropertyBinding.sanitizeNodeName( node.attrName );\n\t\t\t\t\tmodel.ID = id;\n\n\t\t\t\t}\n\n\t\t\t\tthis.setModelTransforms( model, node );\n\t\t\t\tmodelMap.set( id, model );\n\n\t\t\t}\n\n\t\t\treturn modelMap;\n\n\t\t},\n\n\t\tbuildSkeleton: function ( relationships, skeletons, id, name ) {\n\n\t\t\tvar bone = null;\n\n\t\t\trelationships.parents.forEach( function ( parent ) {\n\n\t\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\n\n\t\t\t\t\t\t\tvar subBone = bone;\n\t\t\t\t\t\t\tbone = new THREE.Bone();\n\t\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\n\n\t\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\t\t\t\t\t\t\tbone.name = THREE.PropertyBinding.sanitizeNodeName( name );\n\t\t\t\t\t\t\tbone.ID = id;\n\n\t\t\t\t\t\t\tskeleton.bones[ i ] = bone;\n\n\t\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\n\t\t\t\t\t\t\t// duplicate the bone here and and it as a child of the first bone\n\t\t\t\t\t\t\tif ( subBone !== null ) {\n\n\t\t\t\t\t\t\t\tbone.add( subBone );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn bone;\n\n\t\t},\n\n\t\t// create a THREE.PerspectiveCamera or THREE.OrthographicCamera\n\t\tcreateCamera: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar cameraAttribute;\n\n\t\t\tvar self = this;\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = self.FBXTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tcameraAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( cameraAttribute === undefined ) {\n\n\t\t\t\tmodel = new THREE.Object3D();\n\n\t\t\t} else {\n\n\t\t\t\tvar type = 0;\n\t\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n\t\t\t\t\ttype = 1;\n\n\t\t\t\t}\n\n\t\t\t\tvar nearClippingPlane = 1;\n\t\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\n\n\t\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n\t\t\t\t}\n\n\t\t\t\tvar farClippingPlane = 1000;\n\t\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\n\n\t\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n\t\t\t\t}\n\n\n\t\t\t\tvar width = window.innerWidth;\n\t\t\t\tvar height = window.innerHeight;\n\n\t\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n\t\t\t\t\twidth = cameraAttribute.AspectWidth.value;\n\t\t\t\t\theight = cameraAttribute.AspectHeight.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar aspect = width / height;\n\n\t\t\t\tvar fov = 45;\n\t\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\n\n\t\t\t\t\tfov = cameraAttribute.FieldOfView.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Perspective\n\t\t\t\t\t\tmodel = new THREE.PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Orthographic\n\t\t\t\t\t\tmodel = new THREE.OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n\t\t\t\t\t\tmodel = new THREE.Object3D();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\t// Create a THREE.DirectionalLight, THREE.PointLight or THREE.SpotLight\n\t\tcreateLight: function ( relationships ) {\n\n\t\t\tvar model;\n\t\t\tvar lightAttribute;\n\n\t\t\tvar self = this;\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tvar attr = self.FBXTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\t\tlightAttribute = attr;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( lightAttribute === undefined ) {\n\n\t\t\t\tmodel = new THREE.Object3D();\n\n\t\t\t} else {\n\n\t\t\t\tvar type;\n\n\t\t\t\t// LightType can be undefined for Point lights\n\t\t\t\tif ( lightAttribute.LightType === undefined ) {\n\n\t\t\t\t\ttype = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttype = lightAttribute.LightType.value;\n\n\t\t\t\t}\n\n\t\t\t\tvar color = 0xffffff;\n\n\t\t\t\tif ( lightAttribute.Color !== undefined ) {\n\n\t\t\t\t\tcolor = new THREE.Color().fromArray( lightAttribute.Color.value );\n\n\t\t\t\t}\n\n\t\t\t\tvar intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n\t\t\t\t// light disabled\n\t\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n\t\t\t\t\tintensity = 0;\n\n\t\t\t\t}\n\n\t\t\t\tvar distance = 0;\n\t\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n\t\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n\t\t\t\t\t\tdistance = 0;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\t\t\t\tvar decay = 1;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 0: // Point\n\t\t\t\t\t\tmodel = new THREE.PointLight( color, intensity, distance, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1: // Directional\n\t\t\t\t\t\tmodel = new THREE.DirectionalLight( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2: // Spot\n\t\t\t\t\t\tvar angle = Math.PI / 3;\n\n\t\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\n\n\t\t\t\t\t\t\tangle = THREE.Math.degToRad( lightAttribute.InnerAngle.value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar penumbra = 0;\n\t\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\n\n\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\n\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n\t\t\t\t\t\t\tpenumbra = THREE.Math.degToRad( lightAttribute.OuterAngle.value );\n\t\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmodel = new THREE.SpotLight( color, intensity, distance, angle, penumbra, decay );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a THREE.PointLight.' );\n\t\t\t\t\t\tmodel = new THREE.PointLight( color, intensity );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n\t\t\t\t\tmodel.castShadow = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateMesh: function ( relationships, geometryMap, materialMap ) {\n\n\t\t\tvar model;\n\t\t\tvar geometry = null;\n\t\t\tvar material = null;\n\t\t\tvar materials = [];\n\n\t\t\t// get geometry and materials(s) from connections\n\t\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) {\n\n\t\t\t\t\tgeometry = geometryMap.get( child.ID );\n\n\t\t\t\t}\n\n\t\t\t\tif ( materialMap.has( child.ID ) ) {\n\n\t\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tif ( materials.length > 1 ) {\n\n\t\t\t\tmaterial = materials;\n\n\t\t\t} else if ( materials.length > 0 ) {\n\n\t\t\t\tmaterial = materials[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new THREE.MeshPhongMaterial( { color: 0xcccccc } );\n\t\t\t\tmaterials.push( material );\n\n\t\t\t}\n\n\t\t\tif ( 'color' in geometry.attributes ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.vertexColors = THREE.VertexColors;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( geometry.FBX_Deformer ) {\n\n\t\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\t\tmaterial.skinning = true;\n\n\t\t\t\t} );\n\n\t\t\t\tmodel = new THREE.SkinnedMesh( geometry, material );\n\n\t\t\t} else {\n\n\t\t\t\tmodel = new THREE.Mesh( geometry, material );\n\n\t\t\t}\n\n\t\t\treturn model;\n\n\t\t},\n\n\t\tcreateCurve: function ( relationships, geometryMap ) {\n\n\t\t\tvar geometry = relationships.children.reduce( function ( geo, child ) {\n\n\t\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n\t\t\t\treturn geo;\n\n\t\t\t}, null );\n\n\t\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\t\t\tvar material = new THREE.LineBasicMaterial( { color: 0x3300ff, linewidth: 1 } );\n\t\t\treturn new THREE.Line( geometry, material );\n\n\t\t},\n\n\t\t// parse the model node for transform details and apply them to the model\n\t\tsetModelTransforms: function ( model, modelNode ) {\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = parseInt( modelNode.RotationOrder.value );\n\t\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\t\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\t\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\t\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\t\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\t\tvar transform = generateTransform( transformData );\n\n\t\t\tmodel.applyMatrix( transform );\n\n\t\t},\n\n\t\tsetLookAtProperties: function ( model, modelNode, sceneGraph ) {\n\n\t\t\tif ( 'LookAtProperty' in modelNode ) {\n\n\t\t\t\tvar children = this.connections.get( model.ID ).children;\n\n\t\t\t\tvar self = this;\n\t\t\t\tchildren.forEach( function ( child ) {\n\n\t\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\n\n\t\t\t\t\t\tvar lookAtTarget = self.FBXTree.Objects.Model[ child.ID ];\n\n\t\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\n\n\t\t\t\t\t\t\tvar pos = lookAtTarget.Lcl_Translation.value;\n\n\t\t\t\t\t\t\t// DirectionalLight, SpotLight\n\t\t\t\t\t\t\tif ( model.target !== undefined ) {\n\n\t\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\n\t\t\t\t\t\t\t\tsceneGraph.add( model.target );\n\n\t\t\t\t\t\t\t} else { // Cameras and other Object3Ds\n\n\t\t\t\t\t\t\t\tmodel.lookAt( new THREE.Vector3().fromArray( pos ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tbindSkeleton: function ( skeletons, geometryMap, modelMap ) {\n\n\t\t\tvar bindMatrices = this.parsePoseNodes();\n\n\t\t\tfor ( var ID in skeletons ) {\n\n\t\t\t\tvar skeleton = skeletons[ ID ];\n\n\t\t\t\tvar parents = this.connections.get( parseInt( skeleton.ID ) ).parents;\n\n\t\t\t\tvar self = this;\n\t\t\t\tparents.forEach( function ( parent ) {\n\n\t\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\n\n\t\t\t\t\t\tvar geoID = parent.ID;\n\t\t\t\t\t\tvar geoRelationships = self.connections.get( geoID );\n\n\t\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\n\n\t\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\n\n\t\t\t\t\t\t\t\tvar model = modelMap.get( geoConnParent.ID );\n\n\t\t\t\t\t\t\t\tmodel.bind( new THREE.Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparsePoseNodes: function () {\n\n\t\t\tvar bindMatrices = {};\n\n\t\t\tif ( 'Pose' in this.FBXTree.Objects ) {\n\n\t\t\t\tvar BindPoseNode = this.FBXTree.Objects.Pose;\n\n\t\t\t\tfor ( var nodeID in BindPoseNode ) {\n\n\t\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' ) {\n\n\t\t\t\t\t\tvar poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n\t\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\n\n\t\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\n\n\t\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new THREE.Matrix4().fromArray( poseNode.Matrix.a );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new THREE.Matrix4().fromArray( poseNodes.Matrix.a );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bindMatrices;\n\n\t\t},\n\n\t\t// take raw animation clips and turn them into three.js animation clips\n\t\taddAnimations: function ( sceneGraph ) {\n\n\t\t\tsceneGraph.animations = [];\n\n\t\t\tvar rawClips = this.parseAnimations();\n\n\t\t\tif ( rawClips === undefined ) return;\n\n\t\t\tfor ( var key in rawClips ) {\n\n\t\t\t\tvar rawClip = rawClips[ key ];\n\n\t\t\t\tvar clip = this.addClip( rawClip, sceneGraph );\n\n\t\t\t\tsceneGraph.animations.push( clip );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseAnimations: function () {\n\n\t\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n\t\t\t// if this is undefined we can safely assume there are no animations\n\t\t\tif ( this.FBXTree.Objects.AnimationCurve === undefined ) return undefined;\n\n\t\t\tvar curveNodesMap = this.parseAnimationCurveNodes();\n\n\t\t\tthis.parseAnimationCurves( curveNodesMap );\n\n\t\t\tvar layersMap = this.parseAnimationLayers( curveNodesMap );\n\t\t\tvar rawClips = this.parseAnimStacks( layersMap );\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurveNode\n\t\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n\t\t// and is referenced by an AnimationLayer\n\t\tparseAnimationCurveNodes: function () {\n\n\t\t\tvar rawCurveNodes = this.FBXTree.Objects.AnimationCurveNode;\n\n\t\t\tvar curveNodesMap = new Map();\n\n\t\t\tfor ( var nodeID in rawCurveNodes ) {\n\n\t\t\t\tvar rawCurveNode = rawCurveNodes[ nodeID ];\n\n\t\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\n\n\t\t\t\t\tvar curveNode = {\n\n\t\t\t\t\t\tid: rawCurveNode.id,\n\t\t\t\t\t\tattr: rawCurveNode.attrName,\n\t\t\t\t\t\tcurves: {},\n\n\t\t\t\t\t};\n\n\t\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn curveNodesMap;\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n\t\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n\t\t// axis ( e.g. times and values of x rotation)\n\t\tparseAnimationCurves: function ( curveNodesMap ) {\n\n\t\t\tvar rawCurves = this.FBXTree.Objects.AnimationCurve;\n\n\t\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\n\t\t\t// e.g. position times: [0, 0.4, 0. 8]\n\t\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n\t\t\t// clearly, this should be optimised to\n\t\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n\t\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\n\n\t\t\tfor ( var nodeID in rawCurves ) {\n\n\t\t\t\tvar animationCurve = {\n\n\t\t\t\t\tid: rawCurves[ nodeID ].id,\n\t\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n\t\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\n\n\t\t\t\t};\n\n\t\t\t\tvar relationships = this.connections.get( animationCurve.id );\n\n\t\t\t\tif ( relationships !== undefined ) {\n\n\t\t\t\t\tvar animationCurveID = relationships.parents[ 0 ].ID;\n\t\t\t\t\tvar animationCurveRelationship = relationships.parents[ 0 ].relationship;\n\n\t\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\n\n\t\t\t\t\t} else if ( animationCurveRelationship.match( /d|DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\n\n\t\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n\t\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\n\t\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\t\tparseAnimationLayers: function ( curveNodesMap ) {\n\n\t\t\tvar rawLayers = this.FBXTree.Objects.AnimationLayer;\n\n\t\t\tvar layersMap = new Map();\n\n\t\t\tfor ( var nodeID in rawLayers ) {\n\n\t\t\t\tvar layerCurveNodes = [];\n\n\t\t\t\tvar connection = this.connections.get( parseInt( nodeID ) );\n\n\t\t\t\tif ( connection !== undefined ) {\n\n\t\t\t\t// all the animationCurveNodes used in the layer\n\t\t\t\t\tvar children = connection.children;\n\n\t\t\t\t\tvar self = this;\n\t\t\t\t\tchildren.forEach( function ( child, i ) {\n\n\t\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\n\n\t\t\t\t\t\t\tvar curveNode = curveNodesMap.get( child.ID );\n\n\t\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\t\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar modelID;\n\n\t\t\t\t\t\t\t\t\tself.connections.get( child.ID ).parents.forEach( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( parent.relationship !== undefined ) modelID = parent.ID;\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tvar rawModel = self.FBXTree.Objects.Model[ modelID.toString() ];\n\n\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: THREE.PropertyBinding.sanitizeNodeName( rawModel.attrName ),\n\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\n\t\t\t\t\t\t\t\t\t\ttransform: self.getModelAnimTransform( rawModel ),\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\n\t\t\t\t\t\t\t\t\t// animation value as well\n\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotations = rawModel.PreRotation.value;\n\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotations = rawModel.PostRotation.value;\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\t\tvar deformerID;\n\n\t\t\t\t\t\t\t\t\tself.connections.get( child.ID ).parents.forEach( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( parent.relationship !== undefined ) deformerID = parent.ID;\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tvar morpherID = self.connections.get( deformerID ).parents[ 0 ].ID;\n\t\t\t\t\t\t\t\t\tvar geoID = self.connections.get( morpherID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\n\t\t\t\t\t\t\t\t\tvar modelID = self.connections.get( geoID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t\tvar rawModel = self.FBXTree.Objects.Model[ modelID ];\n\n\t\t\t\t\t\t\t\t\tvar node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: THREE.PropertyBinding.sanitizeNodeName( rawModel.attrName ),\n\t\t\t\t\t\t\t\t\t\tmorphName: self.FBXTree.Objects.Deformer[ deformerID ].attrName,\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn layersMap;\n\n\t\t},\n\n\t\tgetModelAnimTransform: function ( modelNode ) {\n\n\t\t\tvar transformData = {};\n\n\t\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = parseInt( modelNode.RotationOrder.value );\n\n\t\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\t\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\n\t\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\n\t\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\n\t\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\t\treturn generateTransform( transformData );\n\n\t\t},\n\n\t\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n\t\t// hierarchy. Each Stack node will be used to create a THREE.AnimationClip\n\t\tparseAnimStacks: function ( layersMap ) {\n\n\t\t\tvar rawStacks = this.FBXTree.Objects.AnimationStack;\n\n\t\t\t// connect the stacks (clips) up to the layers\n\t\t\tvar rawClips = {};\n\n\t\t\tfor ( var nodeID in rawStacks ) {\n\n\t\t\t\tvar children = this.connections.get( parseInt( nodeID ) ).children;\n\n\t\t\t\tif ( children.length > 1 ) {\n\n\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\n\t\t\t\t// where there are multiple layers per stack, we'll display a warning\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n\t\t\t\t}\n\n\t\t\t\tvar layer = layersMap.get( children[ 0 ].ID );\n\n\t\t\t\trawClips[ nodeID ] = {\n\n\t\t\t\t\tname: rawStacks[ nodeID ].attrName,\n\t\t\t\t\tlayer: layer,\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\treturn rawClips;\n\n\t\t},\n\n\t\taddClip: function ( rawClip, sceneGraph ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar self = this;\n\t\t\trawClip.layer.forEach( function ( rawTracks ) {\n\n\t\t\t\ttracks = tracks.concat( self.generateTracks( rawTracks, sceneGraph ) );\n\n\t\t\t} );\n\n\t\t\treturn new THREE.AnimationClip( rawClip.name, - 1, tracks );\n\n\t\t},\n\n\t\tgenerateTracks: function ( rawTracks, sceneGraph ) {\n\n\t\t\tvar tracks = [];\n\n\t\t\tvar initialPosition = new THREE.Vector3();\n\t\t\tvar initialRotation = new THREE.Quaternion();\n\t\t\tvar initialScale = new THREE.Vector3();\n\n\t\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, initialRotation, initialScale );\n\n\t\t\tinitialPosition = initialPosition.toArray();\n\t\t\tinitialRotation = new THREE.Euler().setFromQuaternion( initialRotation ).toArray(); // todo: euler order\n\t\t\tinitialScale = initialScale.toArray();\n\n\t\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n\t\t\t\tvar positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\n\t\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n\t\t\t\tvar rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotations, rawTracks.postRotations );\n\t\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n\t\t\t\tvar scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\n\t\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n\t\t\t}\n\n\t\t\tif ( rawTracks.DeformPercent !== undefined ) {\n\n\t\t\t\tvar morphTrack = this.generateMorphTrack( rawTracks, sceneGraph );\n\t\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\n\n\t\t\t}\n\n\t\t\treturn tracks;\n\n\t\t},\n\n\t\tgenerateVectorTrack: function ( modelName, curves, initialValue, type ) {\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\treturn new THREE.VectorKeyframeTrack( modelName + '.' + type, times, values );\n\n\t\t},\n\n\t\tgenerateRotationTrack: function ( modelName, curves, initialValue, preRotations, postRotations ) {\n\n\t\t\tif ( curves.x !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.x );\n\t\t\t\tcurves.x.values = curves.x.values.map( THREE.Math.degToRad );\n\n\t\t\t}\n\t\t\tif ( curves.y !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.y );\n\t\t\t\tcurves.y.values = curves.y.values.map( THREE.Math.degToRad );\n\n\t\t\t}\n\t\t\tif ( curves.z !== undefined ) {\n\n\t\t\t\tthis.interpolateRotations( curves.z );\n\t\t\t\tcurves.z.values = curves.z.values.map( THREE.Math.degToRad );\n\n\t\t\t}\n\n\t\t\tvar times = this.getTimesForAllAxes( curves );\n\t\t\tvar values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\t\tif ( preRotations !== undefined ) {\n\n\t\t\t\tpreRotations = preRotations.map( THREE.Math.degToRad );\n\t\t\t\tpreRotations.push( 'ZYX' );\n\n\t\t\t\tpreRotations = new THREE.Euler().fromArray( preRotations );\n\t\t\t\tpreRotations = new THREE.Quaternion().setFromEuler( preRotations );\n\n\t\t\t}\n\n\t\t\tif ( postRotations !== undefined ) {\n\n\t\t\t\tpostRotations = postRotations.map( THREE.Math.degToRad );\n\t\t\t\tpostRotations.push( 'ZYX' );\n\n\t\t\t\tpostRotations = new THREE.Euler().fromArray( postRotations );\n\t\t\t\tpostRotations = new THREE.Quaternion().setFromEuler( postRotations ).inverse();\n\n\t\t\t}\n\n\t\t\tvar quaternion = new THREE.Quaternion();\n\t\t\tvar euler = new THREE.Euler();\n\n\t\t\tvar quaternionValues = [];\n\n\t\t\tfor ( var i = 0; i < values.length; i += 3 ) {\n\n\t\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], 'ZYX' );\n\n\t\t\t\tquaternion.setFromEuler( euler );\n\n\t\t\t\tif ( preRotations !== undefined ) quaternion.premultiply( preRotations );\n\t\t\t\tif ( postRotations !== undefined ) quaternion.multiply( postRotations );\n\n\t\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n\t\t\t}\n\n\t\t\treturn new THREE.QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\n\n\t\t},\n\n\t\tgenerateMorphTrack: function ( rawTracks, sceneGraph ) {\n\n\t\t\tvar curves = rawTracks.DeformPercent.curves.morph;\n\t\t\tvar values = curves.values.map( function ( val ) {\n\n\t\t\t\treturn val / 100;\n\n\t\t\t} );\n\n\t\t\tvar morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\n\n\t\t\treturn new THREE.NumberKeyframeTrack( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\n\n\t\t},\n\n\t\t// For all animated objects, times are defined separately for each axis\n\t\t// Here we'll combine the times into one sorted array without duplicates\n\t\tgetTimesForAllAxes: function ( curves ) {\n\n\t\t\tvar times = [];\n\n\t\t\t// first join together the times for each axis, if defined\n\t\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\n\t\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\n\t\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n\t\t\t// then sort them and remove duplicates\n\t\t\ttimes = times.sort( function ( a, b ) {\n\n\t\t\t\treturn a - b;\n\n\t\t\t} ).filter( function ( elem, index, array ) {\n\n\t\t\t\treturn array.indexOf( elem ) == index;\n\n\t\t\t} );\n\n\t\t\treturn times;\n\n\t\t},\n\n\t\tgetKeyframeTrackValues: function ( times, curves, initialValue ) {\n\n\t\t\tvar prevValue = initialValue;\n\n\t\t\tvar values = [];\n\n\t\t\tvar xIndex = - 1;\n\t\t\tvar yIndex = - 1;\n\t\t\tvar zIndex = - 1;\n\n\t\t\ttimes.forEach( function ( time ) {\n\n\t\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\n\t\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\n\t\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n\t\t\t\t// if there is an x value defined for this frame, use that\n\t\t\t\tif ( xIndex !== - 1 ) {\n\n\t\t\t\t\tvar xValue = curves.x.values[ xIndex ];\n\t\t\t\t\tvalues.push( xValue );\n\t\t\t\t\tprevValue[ 0 ] = xValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// otherwise use the x value from the previous frame\n\t\t\t\t\tvalues.push( prevValue[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( yIndex !== - 1 ) {\n\n\t\t\t\t\tvar yValue = curves.y.values[ yIndex ];\n\t\t\t\t\tvalues.push( yValue );\n\t\t\t\t\tprevValue[ 1 ] = yValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 1 ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( zIndex !== - 1 ) {\n\n\t\t\t\t\tvar zValue = curves.z.values[ zIndex ];\n\t\t\t\t\tvalues.push( zValue );\n\t\t\t\t\tprevValue[ 2 ] = zValue;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvalues.push( prevValue[ 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn values;\n\n\t\t},\n\n\t\t// Rotations are defined as Euler angles which can have values  of any size\n\t\t// These will be converted to quaternions which don't support values greater than\n\t\t// PI, so we'll interpolate large rotations\n\t\tinterpolateRotations: function ( curve ) {\n\n\t\t\tfor ( var i = 1; i < curve.values.length; i ++ ) {\n\n\t\t\t\tvar initialValue = curve.values[ i - 1 ];\n\t\t\t\tvar valuesSpan = curve.values[ i ] - initialValue;\n\n\t\t\t\tvar absoluteSpan = Math.abs( valuesSpan );\n\n\t\t\t\tif ( absoluteSpan >= 180 ) {\n\n\t\t\t\t\tvar numSubIntervals = absoluteSpan / 180;\n\n\t\t\t\t\tvar step = valuesSpan / numSubIntervals;\n\t\t\t\t\tvar nextValue = initialValue + step;\n\n\t\t\t\t\tvar initialTime = curve.times[ i - 1 ];\n\t\t\t\t\tvar timeSpan = curve.times[ i ] - initialTime;\n\t\t\t\t\tvar interval = timeSpan / numSubIntervals;\n\t\t\t\t\tvar nextTime = initialTime + interval;\n\n\t\t\t\t\tvar interpolatedTimes = [];\n\t\t\t\t\tvar interpolatedValues = [];\n\n\t\t\t\t\twhile ( nextTime < curve.times[ i ] ) {\n\n\t\t\t\t\t\tinterpolatedTimes.push( nextTime );\n\t\t\t\t\t\tnextTime += interval;\n\n\t\t\t\t\t\tinterpolatedValues.push( nextValue );\n\t\t\t\t\t\tnextValue += step;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurve.times = inject( curve.times, i, interpolatedTimes );\n\t\t\t\t\tcurve.values = inject( curve.values, i, interpolatedValues );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n\t\tcreateAmbientLight: function ( sceneGraph ) {\n\n\t\t\tif ( 'GlobalSettings' in this.FBXTree && 'AmbientColor' in this.FBXTree.GlobalSettings ) {\n\n\t\t\t\tvar ambientColor = this.FBXTree.GlobalSettings.AmbientColor.value;\n\t\t\t\tvar r = ambientColor[ 0 ];\n\t\t\t\tvar g = ambientColor[ 1 ];\n\t\t\t\tvar b = ambientColor[ 2 ];\n\n\t\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\n\n\t\t\t\t\tvar color = new THREE.Color( r, g, b );\n\t\t\t\t\tsceneGraph.add( new THREE.AmbientLight( color, 1 ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetupMorphMaterials: function ( sceneGraph ) {\n\n\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\tif ( child.geometry.morphAttributes.position || child.geometry.morphAttributes.normal ) {\n\n\t\t\t\t\t\tvar uuid = child.uuid;\n\t\t\t\t\t\tvar matUuid = child.material.uuid;\n\n\t\t\t\t\t\t// if a geometry has morph targets, it cannot share the material with other geometries\n\t\t\t\t\t\tvar sharedMat = false;\n\n\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\t\t\t\tif ( child.isMesh ) {\n\n\t\t\t\t\t\t\t\tif ( child.material.uuid === matUuid && child.uuid !== uuid ) sharedMat = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tif ( sharedMat === true ) child.material = child.material.clone();\n\n\t\t\t\t\t\tchild.material.morphTargets = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t};\n\n\t// parse an FBX file in ASCII format\n\tfunction TextParser() {}\n\n\tTextParser.prototype = {\n\n\t\tconstructor: TextParser,\n\n\t\tgetPrevNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 2 ];\n\n\t\t},\n\n\t\tgetCurrentNode: function () {\n\n\t\t\treturn this.nodeStack[ this.currentIndent - 1 ];\n\n\t\t},\n\n\t\tgetCurrentProp: function () {\n\n\t\t\treturn this.currentProp;\n\n\t\t},\n\n\t\tpushStack: function ( node ) {\n\n\t\t\tthis.nodeStack.push( node );\n\t\t\tthis.currentIndent += 1;\n\n\t\t},\n\n\t\tpopStack: function () {\n\n\t\t\tthis.nodeStack.pop();\n\t\t\tthis.currentIndent -= 1;\n\n\t\t},\n\n\t\tsetCurrentProp: function ( val, name ) {\n\n\t\t\tthis.currentProp = val;\n\t\t\tthis.currentPropName = name;\n\n\t\t},\n\n\t\tparse: function ( text ) {\n\n\t\t\tthis.currentIndent = 0;\n\t\t\tthis.allNodes = new FBXTree();\n\t\t\tthis.nodeStack = [];\n\t\t\tthis.currentProp = [];\n\t\t\tthis.currentPropName = '';\n\n\t\t\tvar self = this;\n\n\t\t\tvar split = text.split( /[\\r\\n]+/ );\n\n\t\t\tsplit.forEach( function ( line, i ) {\n\n\t\t\t\tvar matchComment = line.match( /^[\\s\\t]*;/ );\n\t\t\t\tvar matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n\t\t\t\tif ( matchComment || matchEmpty ) return;\n\n\t\t\t\tvar matchBeginning = line.match( '^\\\\t{' + self.currentIndent + '}(\\\\w+):(.*){', '' );\n\t\t\t\tvar matchProperty = line.match( '^\\\\t{' + ( self.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n\t\t\t\tvar matchEnd = line.match( '^\\\\t{' + ( self.currentIndent - 1 ) + '}}' );\n\n\t\t\t\tif ( matchBeginning ) {\n\n\t\t\t\t\tself.parseNodeBegin( line, matchBeginning );\n\n\t\t\t\t} else if ( matchProperty ) {\n\n\t\t\t\t\tself.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n\t\t\t\t} else if ( matchEnd ) {\n\n\t\t\t\t\tself.popStack();\n\n\t\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n\t\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\n\t\t\t\t\t// if this is encountered the line needs to be joined to the previous line\n\t\t\t\t\tself.parseNodePropertyContinued( line );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this.allNodes;\n\n\t\t},\n\n\t\tparseNodeBegin: function ( line, property ) {\n\n\t\t\tvar nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\tvar nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n\t\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t\t} );\n\n\t\t\tvar node = { name: nodeName };\n\t\t\tvar attrs = this.parseNodeAttr( nodeAttrs );\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\t// a top node\n\t\t\tif ( this.currentIndent === 0 ) {\n\n\t\t\t\tthis.allNodes.add( nodeName, node );\n\n\t\t\t} else { // a subnode\n\n\t\t\t\t// if the subnode already exists, append it\n\t\t\t\tif ( nodeName in currentNode ) {\n\n\t\t\t\t// special case Pose needs PoseNodes as an array\n\t\t\t\t\tif ( nodeName === 'PoseNode' ) {\n\n\t\t\t\t\t\tcurrentNode.PoseNode.push( node );\n\n\t\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\n\n\t\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( typeof attrs.id === 'number' ) {\n\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t\t} else if ( nodeName !== 'Properties70' ) {\n\n\t\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n\t\t\t\t\telse currentNode[ nodeName ] = node;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\n\t\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\n\t\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\n\n\t\t\tthis.pushStack( node );\n\n\t\t},\n\n\t\tparseNodeAttr: function ( attrs ) {\n\n\t\t\tvar id = attrs[ 0 ];\n\n\t\t\tif ( attrs[ 0 ] !== '' ) {\n\n\t\t\t\tid = parseInt( attrs[ 0 ] );\n\n\t\t\t\tif ( isNaN( id ) ) {\n\n\t\t\t\t\tid = attrs[ 0 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = '', type = '';\n\n\t\t\tif ( attrs.length > 1 ) {\n\n\t\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n\t\t\t\ttype = attrs[ 2 ];\n\n\t\t\t}\n\n\t\t\treturn { id: id, name: name, type: type };\n\n\t\t},\n\n\t\tparseNodeProperty: function ( line, property, contentLine ) {\n\n\t\t\tvar propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\t\t\tvar propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n\t\t\t// for special case: base64 image data follows \"Content: ,\" line\n\t\t\t//\tContent: ,\n\t\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\n\t\t\tif ( propName === 'Content' && propValue === ',' ) {\n\n\t\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n\t\t\t}\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\t\t\tvar parentName = currentNode.name;\n\n\t\t\tif ( parentName === 'Properties70' ) {\n\n\t\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t// Connections\n\t\t\tif ( propName === 'C' ) {\n\n\t\t\t\tvar connProps = propValue.split( ',' ).slice( 1 );\n\t\t\t\tvar from = parseInt( connProps[ 0 ] );\n\t\t\t\tvar to = parseInt( connProps[ 1 ] );\n\n\t\t\t\tvar rest = propValue.split( ',' ).slice( 3 );\n\n\t\t\t\trest = rest.map( function ( elem ) {\n\n\t\t\t\t\treturn elem.trim().replace( /^\"/, '' );\n\n\t\t\t\t} );\n\n\t\t\t\tpropName = 'connections';\n\t\t\t\tpropValue = [ from, to ];\n\t\t\t\tappend( propValue, rest );\n\n\t\t\t\tif ( currentNode[ propName ] === undefined ) {\n\n\t\t\t\t\tcurrentNode[ propName ] = [];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Node\n\t\t\tif ( propName === 'Node' ) currentNode.id = propValue;\n\n\t\t\t// connections\n\t\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n\t\t\t\tcurrentNode[ propName ].push( propValue );\n\n\t\t\t} else {\n\n\t\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\n\t\t\t\telse currentNode.a = propValue;\n\n\t\t\t}\n\n\t\t\tthis.setCurrentProp( currentNode, propName );\n\n\t\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\n\t\t\tif ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( propValue );\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseNodePropertyContinued: function ( line ) {\n\n\t\t\tvar currentNode = this.getCurrentNode();\n\n\t\t\tcurrentNode.a += line;\n\n\t\t\t// if the line doesn't end in ',' we have reached the end of the property value\n\t\t\t// so convert the string to an array\n\t\t\tif ( line.slice( - 1 ) !== ',' ) {\n\n\t\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\n\n\t\t\t}\n\n\t\t},\n\n\t\t// parse \"Property70\"\n\t\tparseNodeSpecialProperty: function ( line, propName, propValue ) {\n\n\t\t\t// split this\n\t\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n\t\t\t// into array like below\n\t\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n\t\t\tvar props = propValue.split( '\",' ).map( function ( prop ) {\n\n\t\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n\t\t\t} );\n\n\t\t\tvar innerPropName = props[ 0 ];\n\t\t\tvar innerPropType1 = props[ 1 ];\n\t\t\tvar innerPropType2 = props[ 2 ];\n\t\t\tvar innerPropFlag = props[ 3 ];\n\t\t\tvar innerPropValue = props[ 4 ];\n\n\t\t\t// cast values where needed, otherwise leave as strings\n\t\t\tswitch ( innerPropType1 ) {\n\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'enum':\n\t\t\t\tcase 'bool':\n\t\t\t\tcase 'ULongLong':\n\t\t\t\tcase 'double':\n\t\t\t\tcase 'Number':\n\t\t\t\tcase 'FieldOfView':\n\t\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Color':\n\t\t\t\tcase 'ColorRGB':\n\t\t\t\tcase 'Vector3D':\n\t\t\t\tcase 'Lcl_Translation':\n\t\t\t\tcase 'Lcl_Rotation':\n\t\t\t\tcase 'Lcl_Scaling':\n\t\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\t// CAUTION: these props must append to parent's parent\n\t\t\tthis.getPrevNode()[ innerPropName ] = {\n\n\t\t\t\t'type': innerPropType1,\n\t\t\t\t'type2': innerPropType2,\n\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t'value': innerPropValue\n\n\t\t\t};\n\n\t\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\n\n\t\t},\n\n\t};\n\n\t// Parse an FBX file in Binary format\n\tfunction BinaryParser() {}\n\n\tBinaryParser.prototype = {\n\n\t\tconstructor: BinaryParser,\n\n\t\tparse: function ( buffer ) {\n\n\t\t\tvar reader = new BinaryReader( buffer );\n\t\t\treader.skip( 23 ); // skip magic 23 bytes\n\n\t\t\tvar version = reader.getUint32();\n\n\t\t\tconsole.log( 'THREE.FBXLoader: FBX binary version: ' + version );\n\n\t\t\tvar allNodes = new FBXTree();\n\n\t\t\twhile ( ! this.endOfContent( reader ) ) {\n\n\t\t\t\tvar node = this.parseNode( reader, version );\n\t\t\t\tif ( node !== null ) allNodes.add( node.name, node );\n\n\t\t\t}\n\n\t\t\treturn allNodes;\n\n\t\t},\n\n\t\t// Check if reader has reached the end of content.\n\t\tendOfContent: function ( reader ) {\n\n\t\t\t// footer size: 160bytes + 16-byte alignment padding\n\t\t\t// - 16bytes: magic\n\t\t\t// - padding til 16-byte alignment (at least 1byte?)\n\t\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\n\t\t\t// - 4bytes: magic\n\t\t\t// - 4bytes: version\n\t\t\t// - 120bytes: zero\n\t\t\t// - 16bytes: magic\n\t\t\tif ( reader.size() % 16 === 0 ) {\n\n\t\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\n\n\t\t\t} else {\n\n\t\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\n\n\t\t\t}\n\n\t\t},\n\n\t\t// recursively parse nodes until the end of the file is reached\n\t\tparseNode: function ( reader, version ) {\n\n\t\t\tvar node = {};\n\n\t\t\t// The first three data sizes depends on version.\n\t\t\tvar endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\t\t\tvar numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t\t// note: do not remove this even if you get a linter warning as it moves the buffer forward\n\t\t\tvar propertyListLen = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t\tvar nameLen = reader.getUint8();\n\t\t\tvar name = reader.getString( nameLen );\n\n\t\t\t// Regards this node as NULL-record if endOffset is zero\n\t\t\tif ( endOffset === 0 ) return null;\n\n\t\t\tvar propertyList = [];\n\n\t\t\tfor ( var i = 0; i < numProperties; i ++ ) {\n\n\t\t\t\tpropertyList.push( this.parseProperty( reader ) );\n\n\t\t\t}\n\n\t\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\n\t\t\tvar id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n\t\t\tvar attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n\t\t\tvar attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n\t\t\t// check if this node represents just a single property\n\t\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\t\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n\t\t\twhile ( endOffset > reader.getOffset() ) {\n\n\t\t\t\tvar subNode = this.parseNode( reader, version );\n\n\t\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n\t\t\t}\n\n\t\t\tnode.propertyList = propertyList; // raw property list used by parent\n\n\t\t\tif ( typeof id === 'number' ) node.id = id;\n\t\t\tif ( attrName !== '' ) node.attrName = attrName;\n\t\t\tif ( attrType !== '' ) node.attrType = attrType;\n\t\t\tif ( name !== '' ) node.name = name;\n\n\t\t\treturn node;\n\n\t\t},\n\n\t\tparseSubNode: function ( name, node, subNode ) {\n\n\t\t\t// special case: child node is single property\n\t\t\tif ( subNode.singleProperty === true ) {\n\n\t\t\t\tvar value = subNode.propertyList[ 0 ];\n\n\t\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t\tsubNode.a = value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = value;\n\n\t\t\t\t}\n\n\t\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\n\n\t\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\n\t\t\t\t\tif ( i !== 0 ) array.push( property );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( node.connections === undefined ) {\n\n\t\t\t\t\tnode.connections = [];\n\n\t\t\t\t}\n\n\t\t\t\tnode.connections.push( array );\n\n\t\t\t} else if ( subNode.name === 'Properties70' ) {\n\n\t\t\t\tvar keys = Object.keys( subNode );\n\n\t\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\t\tnode[ key ] = subNode[ key ];\n\n\t\t\t\t} );\n\n\t\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n\t\t\t\tvar innerPropName = subNode.propertyList[ 0 ];\n\t\t\t\tvar innerPropType1 = subNode.propertyList[ 1 ];\n\t\t\t\tvar innerPropType2 = subNode.propertyList[ 2 ];\n\t\t\t\tvar innerPropFlag = subNode.propertyList[ 3 ];\n\t\t\t\tvar innerPropValue;\n\n\t\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n\t\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n\t\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n\t\t\t\t\tinnerPropValue = [\n\t\t\t\t\t\tsubNode.propertyList[ 4 ],\n\t\t\t\t\t\tsubNode.propertyList[ 5 ],\n\t\t\t\t\t\tsubNode.propertyList[ 6 ]\n\t\t\t\t\t];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\n\n\t\t\t\t}\n\n\t\t\t\t// this will be copied to parent, see above\n\t\t\t\tnode[ innerPropName ] = {\n\n\t\t\t\t\t'type': innerPropType1,\n\t\t\t\t\t'type2': innerPropType2,\n\t\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t\t'value': innerPropValue\n\n\t\t\t\t};\n\n\t\t\t} else if ( node[ subNode.name ] === undefined ) {\n\n\t\t\t\tif ( typeof subNode.id === 'number' ) {\n\n\t\t\t\t\tnode[ subNode.name ] = {};\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( subNode.name === 'PoseNode' ) {\n\n\t\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n\t\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnode[ subNode.name ].push( subNode );\n\n\t\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n\t\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tparseProperty: function ( reader ) {\n\n\t\t\tvar type = reader.getString( 1 );\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'C':\n\t\t\t\t\treturn reader.getBoolean();\n\n\t\t\t\tcase 'D':\n\t\t\t\t\treturn reader.getFloat64();\n\n\t\t\t\tcase 'F':\n\t\t\t\t\treturn reader.getFloat32();\n\n\t\t\t\tcase 'I':\n\t\t\t\t\treturn reader.getInt32();\n\n\t\t\t\tcase 'L':\n\t\t\t\t\treturn reader.getInt64();\n\n\t\t\t\tcase 'R':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getArrayBuffer( length );\n\n\t\t\t\tcase 'S':\n\t\t\t\t\tvar length = reader.getUint32();\n\t\t\t\t\treturn reader.getString( length );\n\n\t\t\t\tcase 'Y':\n\t\t\t\t\treturn reader.getInt16();\n\n\t\t\t\tcase 'b':\n\t\t\t\tcase 'c':\n\t\t\t\tcase 'd':\n\t\t\t\tcase 'f':\n\t\t\t\tcase 'i':\n\t\t\t\tcase 'l':\n\n\t\t\t\t\tvar arrayLength = reader.getUint32();\n\t\t\t\t\tvar encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\t\t\t\t\tvar compressedLength = reader.getUint32();\n\n\t\t\t\t\tif ( encoding === 0 ) {\n\n\t\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\n\n\t\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( typeof Zlib === 'undefined' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar inflate = new Zlib.Inflate( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef\n\t\t\t\t\tvar reader2 = new BinaryReader( inflate.decompress().buffer );\n\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\n\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tfunction BinaryReader( buffer, littleEndian ) {\n\n\t\tthis.dv = new DataView( buffer );\n\t\tthis.offset = 0;\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\n\t}\n\n\tBinaryReader.prototype = {\n\n\t\tconstructor: BinaryReader,\n\n\t\tgetOffset: function () {\n\n\t\t\treturn this.offset;\n\n\t\t},\n\n\t\tsize: function () {\n\n\t\t\treturn this.dv.buffer.byteLength;\n\n\t\t},\n\n\t\tskip: function ( length ) {\n\n\t\t\tthis.offset += length;\n\n\t\t},\n\n\t\t// seems like true/false representation depends on exporter.\n\t\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n\t\t// then sees LSB.\n\t\tgetBoolean: function () {\n\n\t\t\treturn ( this.getUint8() & 1 ) === 1;\n\n\t\t},\n\n\t\tgetBooleanArray: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getBoolean() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint8: function () {\n\n\t\t\tvar value = this.dv.getUint8( this.offset );\n\t\t\tthis.offset += 1;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt16: function () {\n\n\t\t\tvar value = this.dv.getInt16( this.offset, this.littleEndian );\n\t\t\tthis.offset += 2;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32: function () {\n\n\t\t\tvar value = this.dv.getInt32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetInt32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetUint32: function () {\n\n\t\t\tvar value = this.dv.getUint32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\t// JavaScript doesn't support 64-bit integer so calculate this here\n\t\t// 1 << 32 will return 1 so using multiply operation instead here.\n\t\t// There's a possibility that this method returns wrong value if the value\n\t\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n\t\t// TODO: safely handle 64-bit integer\n\t\tgetInt64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\t// calculate negative value\n\t\t\tif ( high & 0x80000000 ) {\n\n\t\t\t\thigh = ~ high & 0xFFFFFFFF;\n\t\t\t\tlow = ~ low & 0xFFFFFFFF;\n\n\t\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\n\n\t\t\t\treturn - ( high * 0x100000000 + low );\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetInt64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getInt64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\t// Note: see getInt64() comment\n\t\tgetUint64: function () {\n\n\t\t\tvar low, high;\n\n\t\t\tif ( this.littleEndian ) {\n\n\t\t\t\tlow = this.getUint32();\n\t\t\t\thigh = this.getUint32();\n\n\t\t\t} else {\n\n\t\t\t\thigh = this.getUint32();\n\t\t\t\tlow = this.getUint32();\n\n\t\t\t}\n\n\t\t\treturn high * 0x100000000 + low;\n\n\t\t},\n\n\t\tgetFloat32: function () {\n\n\t\t\tvar value = this.dv.getFloat32( this.offset, this.littleEndian );\n\t\t\tthis.offset += 4;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat32Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat32() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetFloat64: function () {\n\n\t\t\tvar value = this.dv.getFloat64( this.offset, this.littleEndian );\n\t\t\tthis.offset += 8;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetFloat64Array: function ( size ) {\n\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta.push( this.getFloat64() );\n\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t},\n\n\t\tgetArrayBuffer: function ( size ) {\n\n\t\t\tvar value = this.dv.buffer.slice( this.offset, this.offset + size );\n\t\t\tthis.offset += size;\n\t\t\treturn value;\n\n\t\t},\n\n\t\tgetString: function ( size ) {\n\n\t\t\t// note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n\t\t\tvar a = [];\n\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\n\n\t\t\t\ta[ i ] = this.getUint8();\n\n\t\t\t}\n\n\t\t\tvar nullByte = a.indexOf( 0 );\n\t\t\tif ( nullByte >= 0 ) a = a.slice( 0, nullByte );\n\n\t\t\treturn THREE.LoaderUtils.decodeText( new Uint8Array( a ) );\n\n\t\t}\n\n\t};\n\n\t// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n\t// and BinaryParser( FBX Binary format)\n\tfunction FBXTree() {}\n\n\tFBXTree.prototype = {\n\n\t\tconstructor: FBXTree,\n\n\t\tadd: function ( key, val ) {\n\n\t\t\tthis[ key ] = val;\n\n\t\t},\n\n\t};\n\n\t// ************** UTILITY FUNCTIONS **************\n\n\tfunction isFbxFormatBinary( buffer ) {\n\n\t\tvar CORRECT = 'Kaydara FBX Binary  \\0';\n\n\t\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n\t}\n\n\tfunction isFbxFormatASCII( text ) {\n\n\t\tvar CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n\t\tvar cursor = 0;\n\n\t\tfunction read( offset ) {\n\n\t\t\tvar result = text[ offset - 1 ];\n\t\t\ttext = text.slice( cursor + offset );\n\t\t\tcursor ++;\n\t\t\treturn result;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < CORRECT.length; ++ i ) {\n\n\t\t\tvar num = read( 1 );\n\t\t\tif ( num === CORRECT[ i ] ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction getFbxVersion( text ) {\n\n\t\tvar versionRegExp = /FBXVersion: (\\d+)/;\n\t\tvar match = text.match( versionRegExp );\n\t\tif ( match ) {\n\n\t\t\tvar version = parseInt( match[ 1 ] );\n\t\t\treturn version;\n\n\t\t}\n\t\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n\t}\n\n\t// Converts FBX ticks into real time seconds.\n\tfunction convertFBXTimeToSeconds( time ) {\n\n\t\treturn time / 46186158000;\n\n\t}\n\n\tvar dataArray = [];\n\n\t// extracts the data from the correct position in the FBX array based on indexing type\n\tfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n\t\tvar index;\n\n\t\tswitch ( infoObject.mappingType ) {\n\n\t\t\tcase 'ByPolygonVertex' :\n\t\t\t\tindex = polygonVertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByPolygon' :\n\t\t\t\tindex = polygonIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'ByVertice' :\n\t\t\t\tindex = vertexIndex;\n\t\t\t\tbreak;\n\t\t\tcase 'AllSame' :\n\t\t\t\tindex = infoObject.indices[ 0 ];\n\t\t\t\tbreak;\n\t\t\tdefault :\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\n\n\t\t}\n\n\t\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\n\n\t\tvar from = index * infoObject.dataSize;\n\t\tvar to = from + infoObject.dataSize;\n\n\t\treturn slice( dataArray, infoObject.buffer, from, to );\n\n\t}\n\n\tvar tempMat = new THREE.Matrix4();\n\tvar tempEuler = new THREE.Euler();\n\tvar tempVec = new THREE.Vector3();\n\tvar translation = new THREE.Vector3();\n\tvar rotation = new THREE.Matrix4();\n\n\t// generate transformation from FBX transform data\n\t// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n\t// transformData = {\n\t//\t eulerOrder: int,\n\t//\t translation: [],\n\t//   rotationOffset: [],\n\t//\t preRotation\n\t//\t rotation\n\t//\t postRotation\n\t//   scale\n\t// }\n\t// all entries are optional\n\tfunction generateTransform( transformData ) {\n\n\t\tvar transform = new THREE.Matrix4();\n\t\ttranslation.set( 0, 0, 0 );\n\t\trotation.identity();\n\n\t\tvar order = ( transformData.eulerOrder ) ? getEulerOrder( transformData.eulerOrder ) : getEulerOrder( 0 );\n\n\t\tif ( transformData.translation ) translation.fromArray( transformData.translation );\n\t\tif ( transformData.rotationOffset ) translation.add( tempVec.fromArray( transformData.rotationOffset ) );\n\n\t\tif ( transformData.rotation ) {\n\n\t\t\tvar array = transformData.rotation.map( THREE.Math.degToRad );\n\t\t\tarray.push( order );\n\t\t\trotation.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t}\n\n\t\tif ( transformData.preRotation ) {\n\n\t\t\tvar array = transformData.preRotation.map( THREE.Math.degToRad );\n\t\t\tarray.push( order );\n\t\t\ttempMat.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t\trotation.premultiply( tempMat );\n\n\t\t}\n\n\t\tif ( transformData.postRotation ) {\n\n\t\t\tvar array = transformData.postRotation.map( THREE.Math.degToRad );\n\t\t\tarray.push( order );\n\t\t\ttempMat.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t\t\ttempMat.getInverse( tempMat );\n\n\t\t\trotation.multiply( tempMat );\n\n\t\t}\n\n\t\tif ( transformData.scale ) transform.scale( tempVec.fromArray( transformData.scale ) );\n\n\t\ttransform.setPosition( translation );\n\t\ttransform.multiply( rotation );\n\n\t\treturn transform;\n\n\t}\n\n\t// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n\t// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n\tfunction getEulerOrder( order ) {\n\n\t\tvar enums = [\n\t\t\t'ZYX', // -> XYZ extrinsic\n\t\t\t'YZX', // -> XZY extrinsic\n\t\t\t'XZY', // -> YZX extrinsic\n\t\t\t'ZXY', // -> YXZ extrinsic\n\t\t\t'YXZ', // -> ZXY extrinsic\n\t\t\t'XYZ', // -> ZYX extrinsic\n\t\t//'SphericXYZ', // not possible to support\n\t\t];\n\n\t\tif ( order === 6 ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\t\t\treturn enums[ 0 ];\n\n\t\t}\n\n\t\treturn enums[ order ];\n\n\t}\n\n\t// Parses comma separated list of numbers and returns them an array.\n\t// Used internally by the TextParser\n\tfunction parseNumberArray( value ) {\n\n\t\tvar array = value.split( ',' ).map( function ( val ) {\n\n\t\t\treturn parseFloat( val );\n\n\t\t} );\n\n\t\treturn array;\n\n\t}\n\n\tfunction convertArrayBufferToString( buffer, from, to ) {\n\n\t\tif ( from === undefined ) from = 0;\n\t\tif ( to === undefined ) to = buffer.byteLength;\n\n\t\treturn THREE.LoaderUtils.decodeText( new Uint8Array( buffer, from, to ) );\n\n\t}\n\n\tfunction append( a, b ) {\n\n\t\tfor ( var i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t}\n\n\tfunction slice( a, b, from, to ) {\n\n\t\tfor ( var i = from, j = 0; i < to; i ++, j ++ ) {\n\n\t\t\ta[ j ] = b[ i ];\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t// inject array a2 into array a1 at index\n\tfunction inject( a1, index, a2 ) {\n\n\t\treturn a1.slice( 0, index ).concat( a2 ).concat( a1.slice( index ) );\n\n\t}\n\n\treturn FBXLoader;\n\n} )();\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/FBXLoader.js","\nimport setMaterial from './materials/SetMaterial'\nimport { Scene } from './Three.Constant.js'\n// import State from '../state/state'\nimport { LightEditChildren } from './materials/SetMaterial.Constant'\nconst THREE = require('three')\n\n\nconst addLights = async Lights => {\n\n  if (!Lights) {\n    throw Error(`Lights data are undefined! (Function: addLights)`)\n  }\n\n  for (const { type, param } of Lights) {\n\n    let light = getLightType(type)\n    await setMaterial(light, param, LightEditChildren)\n\n    Scene.add(light)\n  }\n}\n\n\nfunction getLightType(type) {\n  let light, lightParam = {r: 1, g: 1, b: 1}\n  switch (type) {\n    case 'AmbientLight':\n      light = new THREE[type](lightParam, 1)\n      break\n    case 'HemisphereLight':\n      light = new THREE[type](lightParam, lightParam, 1)\n      break\n    case 'DirectionalLight':\n      light = new THREE[type](lightParam, 1)\n      break\n    case 'PointLight':\n      light = new THREE[type](lightParam, 1)\n      break\n    case 'SpotLight':\n      light = new THREE[type](lightParam, 1)\n      break\n    default:\n      throw Error('LightType is error')\n  }\n\n  return light\n}\n\n\n\n\nexport default addLights\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/LoadAssets.Lights.js","import getMaterial from \"./materials/GetMaterial\";\nimport { Scene, Matrix4} from './Three.Constant.js'\n\nimport { getAssetPath, getUsrData } from './Tools' \nimport State from '../state/state'\nimport { ENGINE_METHOD_RSA } from \"constants\";\nconst THREE = require('three')\n\nconst loadAssets = async Sprites => {\n\n  for ( const item of Sprites ) {\n\n    let material = await getMaterial(item.material)\n    let Sprite =  new THREE.Sprite(material)\n      // { x, y, z } = fontreConfig.getMeshOffset()\n\n    Sprite.name = item.name\n\n    Sprite.position.set(\n      item.position.x + 0,\n      item.position.y + -81,\n      item.position.z + 0\n    )\n    \n    Scene.add(Sprite);\n    State.spriteState[item.name] = Sprite\n  }\n\n  // await addGroup()\n}\n\n\n// async function addGroup (mesh) {\n\n//   let { Hotspot } = await getUsrData()\n  \n//   if ( Hotspot && Hotspot.length > 0 ) {\n//     for (const hot of Hotspot) { \n\n//       if ( hot.type !== 1 ) {\n//         break\n//       }\n\n//       const group = new THREE.Group()\n//       group.name = hot.name\n\n//       let x, y, z;\n\n//       for ( const item of hot.models ) {\n\n\n//         group.add(Scene.getObjectByName(item.name))\n\n//           x = item.pivotPoint[0]\n//           y = item.pivotPoint[1]\n//           z = item.pivotPoint[2]\n//       }\n\n//       Scene.add(group)\n//     }\n//   }\n// }\n\n\n\n\n\nexport default loadAssets\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/LoadAssets.Sprites.js","\nimport { Scene, Matrix4, TextureLoader } from './Three.Constant.js'\nimport { getAssetPath, getUsrData } from './Tools' \nimport Loaders from './Loaders'\nimport getMaterial from './materials/GetMaterial'\nimport process from './process/Process'\nimport  { AsciiArrayToStr, ArrayToint32} from './libs/compute'\nimport { addCarLight, loadFloor, addSpriteCarLight } from './LoadAssets.AfterModel'\n\nconst THREE = require('three')\n\n\nconst isType = val => Object.prototype.toString.call(val).slice(8, -1).toLowerCase();\n\nlet count = 0\n\nconst addModels = async ({ Models, Materials }) => {\n  \n\n  if (!Models || !Materials)  {\n    throw Error('usrData Models || Materials is error(Function: addModels)')\n  }\n  \n  let materials = {};\n\n  for ( const item of Materials ) {\n    materials[item.name] = await getMaterial(item)\n  }\n\n  const modelPath = `${getAssetPath()}models/`\n\n  for ( const model of Models ) {\n\n    let { type, path } = model, requestPath = `${modelPath}${path}`;\n\n    let object = null\n\n    if(type === 'FBX'){\n      object = await Loaders[type](requestPath)\n    }else{\n      object = await Loaders[type](requestPath)\n    }\n    \n    if (isType(object) === 'arraybuffer' ) {\n      await addFtrm(object, materials, Materials)\n    }\n  }\n\n  await loadFloor()\n\n  await addSpriteCarLight()\n}\n\n\nasync function adjustRotate (mesh) {\n  let { Hotspot } = await getUsrData()\n  if ( Hotspot && Hotspot.length > 0 ) {\n    for (const hot of Hotspot) { \n      for ( const item of hot.models ) {\n        if ( item.name === mesh.name ) {\n          const [x, y, z] = item.pivotPoint\n          \n          mesh.geometry.applyMatrix(Matrix4.makeTranslation(x, y, z))\n          mesh.position.x -= x;\n          mesh.position.y -= y;\n          mesh.position.z -= z;\n        } \n      }\n    }\n  }\n}\n\n\n\nasync function addFtrm (blob, materials, Materials) {\n  let modelTotal = ArrayToint32(new Int8Array(blob.slice(68, 72)))\n  let offset = 4 + 64 + 4;\n\n  for ( let i = 0; i < modelTotal; i++ ) {\n    //file_type\n    offset += 1;\n    //byte_offset\n    let byte_offset = ArrayToint32(new Int8Array(blob.slice(offset, offset + 4)));\n    offset += 4;\n    //byte_length\n    let byte_length = ArrayToint32(new Int8Array(blob.slice(offset, offset + 4)));\n    offset += 4;\n    //file_name\n    let file_name_array = new Int8Array(blob.slice(offset, offset + 64));\n\n    let name = AsciiArrayToStr(file_name_array);\n    let drcContent = blob.slice(byte_offset, byte_offset + byte_length);\n    offset += 64;\n\n    let geometry = await Loaders['decoder'](drcContent)\n    let mesh = new THREE.Mesh(geometry)\n    mesh.name = name\n\n    if (typeof mesh.material.materials !== 'undefined') {\n      mesh.material.materials[0] = materials[name];\n    } else {\n      mesh.material = materials[name];\n    }\n\n    mesh.position.set(0, -80, 0)\n\n    // console.log(mesh.name)\n    Scene.add(mesh)\n    await adjustRotate(mesh)\n    \n    count ++\n    let num = Math.floor(count / (Materials.length) * 100)\n    if ( num >= 0 && num <= 100) {\n      process.processNum(num)\n    }\n  }\n}\n\nexport default addModels\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/LoadAssets.Models.js","import addLights from './LoadAssets.Lights.js'\nimport addSprites from './LoadAssets.Sprites'\nimport addModels from './LoadAssets.Models.js'\nimport {\n  cameraAnimation,\n  doorAnimation\n} from './Animation.Action'\nimport State from '../state/state'\nimport { Scene } from './Three.Constant.js';\n\n\n\nconst loadAssets = async usrData => {\n\n  // light\n  await addLights(usrData.Lights)\n\n\n  // model\n  console.time('load model')\n  await addModels(usrData)   \n  console.timeEnd('load model')\n\n    // sprite\n  await addSprites(usrData.Sprites)\n  \n}\n\n\n\n\nexport default loadAssets\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/LoadAssets.js","// Copyright 2016 The Draco Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/* eslint-disable */\n'use strict';\nconst THREE = require('three')\n\nTHREE.FONTRELoader = function(manager) {\n  this.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;\n  this.materials = null;\n  this.verbosity = 0;\n  this.attributeOptions = {};\n  this.dracoDecoderType = {};\n  this.drawMode = THREE.TrianglesDrawMode;\n};\n\nTHREE.FONTRELoader.prototype = {\n  constructor: THREE.FONTRELoader,\n\n  loadFile: function(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new THREE.FileLoader(scope.manager);\n    loader.setPath(this.path);\n    loader.setResponseType('arraybuffer');\n    let request = loader.load(url, function(blob) {\n      onLoad(blob);\n    }, onProgress, onError);\n    return request\n  },\n\n  loadFtrn: async function(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new THREE.FileLoader(scope.manager);\n    loader.setPath(this.path);\n    loader.setResponseType('arraybuffer');\n\n    return new Promise( (resolve, reject) => {\n\n      loader.load(url, (blob)=> {\n        var key = new Uint8Array(blob.slice(20, 40));\n        var key_length = key.length;\n        var buffer = new Uint8Array(blob.slice(69));\n        var buffer_length = buffer.length;\n        for (var i=0; i<buffer_length; i++){\n          buffer[i] = (buffer[i] & 0xff) ^ (key[i % key_length] & 0xff);\n        }\n        blob = buffer.buffer.slice(0);\n        \n        resolve(blob)\n        // onLoad(blob);\n      }, onProgress, err => {\n        reject()\n      });\n    })\n  },\n\n  decodeFtrBlob: function(blob, onLoad, onProgress, onError) {\n    const scope = this;\n    scope.decodeDracoFile(blob, onLoad);\n  },\n  \n  load: function(url, onLoad, onProgress, onError) {\n    var scope = this;\n    var loader = new THREE.FileLoader(scope.manager);\n    loader.setPath(this.path);\n    loader.setResponseType('arraybuffer');\n    if (this.crossOrigin !== undefined) {\n      loader.crossOrigin = this.crossOrigin;\n    }\n    loader.load(url, function(blob) {\n      scope.decodeDracoFile(blob, onLoad);\n    }, onProgress, onError);\n  },\n\n  setPath: function(value) {\n    this.path = value;\n  },\n\n  setCrossOrigin: function(value) {\n    this.crossOrigin = value;\n  },\n\n  setVerbosity: function(level) {\n    this.verbosity = level;\n  },\n\n  setDracoDecoderType: function(dracoDecoderType) {\n    this.dracoDecoderType = dracoDecoderType;\n  },\n\n  /**\n   *  Sets desired mode for generated geometry indices.\n   *  Can be either:\n   *      THREE.TrianglesDrawMode\n   *      THREE.TriangleStripDrawMode\n   */\n  setDrawMode: function(drawMode) {\n    this.drawMode = drawMode;\n  },\n\n  /**\n   * Skips dequantization for a specific attribute.\n   * |attributeName| is the THREE.js name of the given attribute type.\n   * The only currently supported |attributeName| is 'position', more may be\n   * added in future.\n   */\n  setSkipDequantization: function(attributeName, skip) {\n    var skipDequantization = true;\n    if (typeof skip !== 'undefined')\n      skipDequantization = skip;\n    this.getAttributeOptions(attributeName).skipDequantization =\n      skipDequantization;\n  },\n\n  decodeDracoFile: function(rawBuffer, callback) {\n    var scope = this;\n    THREE.FONTRELoader.getDecoder(this.dracoDecoderType,\n      function(dracoDecoder) {\n        scope.decodeDracoFileInternal(rawBuffer, dracoDecoder, callback);\n      });\n  },\n\n  decodeDracoFileInternal : function(rawBuffer, dracoDecoder, callback) {\n    /*\n     * Here is how to use Draco Javascript decoder and get the geometry.\n     */\n    var buffer = new dracoDecoder.DecoderBuffer();\n    buffer.Init(new Int8Array(rawBuffer), rawBuffer.byteLength);\n    var decoder = new dracoDecoder.Decoder();\n\n    /*\n     * Determine what type is this file: mesh or point cloud.\n     */\n    var geometryType = decoder.GetEncodedGeometryType(buffer);\n    if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n      if (this.verbosity > 0) {\n        console.log('Loaded a mesh.');\n      }\n    } else if (geometryType == dracoDecoder.POINT_CLOUD) {\n      if (this.verbosity > 0) {\n        console.log('Loaded a point cloud.');\n      }\n    } else {\n      var errorMsg = 'THREE.FONTRELoader: Unknown geometry type.'\n      console.error(errorMsg);\n      throw new Error(errorMsg);\n    }\n    callback(this.convertDracoGeometryTo3JS(dracoDecoder, decoder,\n      geometryType, buffer));\n  },\n\n  convertDracoGeometryTo3JS: function(dracoDecoder, decoder, geometryType, buffer) {\n    if (this.getAttributeOptions('position').skipDequantization === true) {\n      decoder.SkipAttributeTransform(dracoDecoder.POSITION);\n    }\n    var dracoGeometry;\n    var decodingStatus;\n    const start_time = performance.now();\n    if (geometryType === dracoDecoder.TRIANGULAR_MESH) {\n      dracoGeometry = new dracoDecoder.Mesh();\n      decodingStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n    } else {\n      dracoGeometry = new dracoDecoder.PointCloud();\n      decodingStatus =\n        decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n    }\n    if (!decodingStatus.ok() || dracoGeometry.ptr == 0) {\n      var errorMsg = 'THREE.FONTRELoader: Decoding failed: ';\n      errorMsg += decodingStatus.error_msg();\n      console.error(errorMsg);\n      dracoDecoder.destroy(decoder);\n      dracoDecoder.destroy(dracoGeometry);\n      throw new Error(errorMsg);\n    }\n\n    var decode_end = performance.now();\n    dracoDecoder.destroy(buffer);\n    /*\n     * Example on how to retrieve mesh and attributes.\n     */\n    var numFaces, numPoints;\n    var numVertexCoordinates, numTextureCoordinates, numColorCoordinates;\n    var numAttributes;\n    var numColorCoordinateComponents = 3;\n    // For output basic geometry information.\n    var geometryInfoStr;\n    if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n      numFaces = dracoGeometry.num_faces();\n      if (this.verbosity > 0) {\n        console.log('Number of faces loaded: ' + numFaces.toString());\n      }\n    } else {\n      numFaces = 0;\n    }\n    numPoints = dracoGeometry.num_points();\n    numVertexCoordinates = numPoints * 3;\n    numTextureCoordinates = numPoints * 2;\n    numColorCoordinates = numPoints * 3;\n    numAttributes = dracoGeometry.num_attributes();\n    if (this.verbosity > 0) {\n      console.log('Number of points loaded: ' + numPoints.toString());\n      console.log('Number of attributes loaded: ' +\n        numAttributes.toString());\n    }\n\n    // Get position attribute. Must exists.\n    var posAttId = decoder.GetAttributeId(dracoGeometry,\n      dracoDecoder.POSITION);\n    if (posAttId == -1) {\n      var errorMsg = 'THREE.FONTRELoader: No position attribute found.';\n      console.error(errorMsg);\n      dracoDecoder.destroy(decoder);\n      dracoDecoder.destroy(dracoGeometry);\n      throw new Error(errorMsg);\n    }\n    var posAttribute = decoder.GetAttribute(dracoGeometry, posAttId);\n    var posAttributeData = new dracoDecoder.DracoFloat32Array();\n    decoder.GetAttributeFloatForAllPoints(\n      dracoGeometry, posAttribute, posAttributeData);\n    // Get color attributes if exists.\n    var colorAttId = decoder.GetAttributeId(dracoGeometry,\n      dracoDecoder.COLOR);\n    var colAttributeData;\n    if (colorAttId != -1) {\n      if (this.verbosity > 0) {\n        console.log('Loaded color attribute.');\n      }\n      var colAttribute = decoder.GetAttribute(dracoGeometry, colorAttId);\n      if (colAttribute.num_components() === 4) {\n        numColorCoordinates = numPoints * 4;\n        numColorCoordinateComponents = 4;\n      }\n      colAttributeData = new dracoDecoder.DracoFloat32Array();\n      decoder.GetAttributeFloatForAllPoints(dracoGeometry, colAttribute,\n        colAttributeData);\n    }\n\n    // Get normal attributes if exists.\n    var normalAttId =\n      decoder.GetAttributeId(dracoGeometry, dracoDecoder.NORMAL);\n    var norAttributeData;\n    if (normalAttId != -1) {\n      if (this.verbosity > 0) {\n        console.log('Loaded normal attribute.');\n      }\n      var norAttribute = decoder.GetAttribute(dracoGeometry, normalAttId);\n      norAttributeData = new dracoDecoder.DracoFloat32Array();\n      decoder.GetAttributeFloatForAllPoints(dracoGeometry, norAttribute,\n        norAttributeData);\n    }\n\n    // Get texture coord attributes if exists.\n    var texCoordAttId =\n      decoder.GetAttributeId(dracoGeometry, dracoDecoder.TEX_COORD);\n    var textCoordAttributeData;\n    if (texCoordAttId != -1) {\n      if (this.verbosity > 0) {\n        console.log('Loaded texture coordinate attribute.');\n      }\n      var texCoordAttribute = decoder.GetAttribute(dracoGeometry,\n        texCoordAttId);\n      textCoordAttributeData = new dracoDecoder.DracoFloat32Array();\n      decoder.GetAttributeFloatForAllPoints(dracoGeometry,\n        texCoordAttribute,\n        textCoordAttributeData);\n    }\n\n    // Structure for converting to THREEJS geometry later.\n    var geometryBuffer = {\n      vertices: new Float32Array(numVertexCoordinates),\n      normals: new Float32Array(numVertexCoordinates),\n      uvs: new Float32Array(numTextureCoordinates),\n      colors: new Float32Array(numColorCoordinates)\n    };\n\n    for (var i = 0; i < numVertexCoordinates; i += 3) {\n      geometryBuffer.vertices[i] = posAttributeData.GetValue(i);\n      geometryBuffer.vertices[i + 1] = posAttributeData.GetValue(i + 1);\n      geometryBuffer.vertices[i + 2] = posAttributeData.GetValue(i + 2);\n      // Add normal.\n      if (normalAttId != -1) {\n        geometryBuffer.normals[i] = norAttributeData.GetValue(i);\n        geometryBuffer.normals[i + 1] = norAttributeData.GetValue(i + 1);\n        geometryBuffer.normals[i + 2] = norAttributeData.GetValue(i + 2);\n      }\n    }\n\n    // Add color.\n    for (var i = 0; i < numColorCoordinates; i += 1) {\n      if (colorAttId != -1) {\n        // Draco colors are already normalized.\n        geometryBuffer.colors[i] = colAttributeData.GetValue(i);\n      } else {\n        // Default is white. This is faster than TypedArray.fill().\n        geometryBuffer.colors[i] = 1.0;\n      }\n    }\n\n    // Add texture coordinates.\n    if (texCoordAttId != -1) {\n      for (var i = 0; i < numTextureCoordinates; i += 2) {\n        geometryBuffer.uvs[i] = textCoordAttributeData.GetValue(i);\n        geometryBuffer.uvs[i + 1] = textCoordAttributeData.GetValue(i + 1);\n      }\n    }\n\n    dracoDecoder.destroy(posAttributeData);\n    if (colorAttId != -1)\n      dracoDecoder.destroy(colAttributeData);\n    if (normalAttId != -1)\n      dracoDecoder.destroy(norAttributeData);\n    if (texCoordAttId != -1)\n      dracoDecoder.destroy(textCoordAttributeData);\n\n    // For mesh, we need to generate the faces.\n    if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n      if (this.drawMode === THREE.TriangleStripDrawMode) {\n        var stripsArray = new dracoDecoder.DracoInt32Array();\n        var numStrips = decoder.GetTriangleStripsFromMesh(\n          dracoGeometry, stripsArray);\n        geometryBuffer.indices = new Uint32Array(stripsArray.size());\n        for (var i = 0; i < stripsArray.size(); ++i) {\n          geometryBuffer.indices[i] = stripsArray.GetValue(i);\n        }\n        dracoDecoder.destroy(stripsArray);\n      } else {\n        var numIndices = numFaces * 3;\n        geometryBuffer.indices = new Uint32Array(numIndices);\n        var ia = new dracoDecoder.DracoInt32Array();\n        for (var i = 0; i < numFaces; ++i) {\n          decoder.GetFaceFromMesh(dracoGeometry, i, ia);\n          var index = i * 3;\n          geometryBuffer.indices[index] = ia.GetValue(0);\n          geometryBuffer.indices[index + 1] = ia.GetValue(1);\n          geometryBuffer.indices[index + 2] = ia.GetValue(2);\n        }\n        dracoDecoder.destroy(ia);\n      }\n    }\n\n    // Import data to Three JS geometry.\n    var geometry = new THREE.BufferGeometry();\n    geometry.drawMode = this.drawMode;\n    if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n      geometry.setIndex(new(geometryBuffer.indices.length > 65535 ?\n        THREE.Uint32BufferAttribute : THREE.Uint16BufferAttribute)\n      (geometryBuffer.indices, 1));\n    }\n    geometry.addAttribute('position',\n      new THREE.Float32BufferAttribute(geometryBuffer.vertices, 3));\n    var posTransform = new dracoDecoder.AttributeQuantizationTransform();\n    if (posTransform.InitFromAttribute(posAttribute)) {\n      // Quantized attribute. Store the quantization parameters into the\n      // THREE.js attribute.\n      geometry.attributes['position'].isQuantized = true;\n      geometry.attributes['position'].maxRange = posTransform.range();\n      geometry.attributes['position'].numQuantizationBits =\n        posTransform.quantization_bits();\n      geometry.attributes['position'].minValues = new Float32Array(3);\n      for (var i = 0; i < 3; ++i) {\n        geometry.attributes['position'].minValues[i] =\n          posTransform.min_value(i);\n      }\n    }\n    dracoDecoder.destroy(posTransform);\n    geometry.addAttribute('color',\n      new THREE.Float32BufferAttribute(geometryBuffer.colors,\n        numColorCoordinateComponents));\n    if (normalAttId != -1) {\n      geometry.addAttribute('normal',\n        new THREE.Float32BufferAttribute(geometryBuffer.normals, 3));\n    }\n    if (texCoordAttId != -1) {\n      geometry.addAttribute('uv',\n        new THREE.Float32BufferAttribute(geometryBuffer.uvs, 2));\n    }\n\n    dracoDecoder.destroy(decoder);\n    dracoDecoder.destroy(dracoGeometry);\n\n    this.decode_time = decode_end - start_time;\n    this.import_time = performance.now() - decode_end;\n\n    if (this.verbosity > 0) {\n      console.log('Decode time: ' + this.decode_time);\n      console.log('Import time: ' + this.import_time);\n    }\n    return geometry;\n  },\n\n  isVersionSupported: function(version, callback) {\n    THREE.FONTRELoader.getDecoder(this.dracoDecoderType,\n      function(decoder) {\n        callback(decoder.isVersionSupported(version));\n      });\n  },\n\n  getAttributeOptions: function(attributeName) {\n    if (typeof this.attributeOptions[attributeName] === 'undefined')\n      this.attributeOptions[attributeName] = {};\n    return this.attributeOptions[attributeName];\n  }\n};\n\n/**\n * Creates and returns a singleton instance of the DracoModule decoder.\n * The module loading is done asynchronously for WebAssembly. Initialized module\n * can be accessed through the callback function |onDracoModuleLoadedCallback|.\n */\n\n /*global DracoDecoderModule */\nTHREE.FONTRELoader.getDecoder = (function() {\n  var decoder;\n\n  return function(dracoDecoderType, onDracoDecoderModuleLoadedCallback) {\n    if (typeof DracoDecoderModule === 'undefined') {\n      throw new Error('THREE.FONTRELoader: DracoDecoderModule not found.');\n    }\n    if (typeof decoder !== 'undefined') {\n      // Module already initialized.\n      if (typeof onDracoDecoderModuleLoadedCallback !== 'undefined') {\n        onDracoDecoderModuleLoadedCallback(decoder);\n      }\n    } else {\n      dracoDecoderType['onModuleLoaded'] = function(module) {\n        if (typeof onDracoDecoderModuleLoadedCallback === 'function') {\n          decoder = module;\n          onDracoDecoderModuleLoadedCallback(module);\n        }\n      };\n      DracoDecoderModule(dracoDecoderType);\n    }\n  };\n\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/FontreLoader.js","// Copyright 2016 The Draco Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n//\n/* eslint-disable */\n'use strict';\nconst THREE = require('three')\n\n/**\n * @param {THREE.LoadingManager} manager\n */\nTHREE.DRACOLoader = function(manager) {\n    this.timeLoaded = 0;\n    this.manager = manager || THREE.DefaultLoadingManager;\n    this.materials = null;\n    this.verbosity = 0;\n    this.attributeOptions = {};\n    this.drawMode = THREE.TrianglesDrawMode;\n    // Native Draco attribute type to Three.JS attribute type.\n    this.nativeAttributeMap = {\n      'position' : 'POSITION',\n      'normal' : 'NORMAL',\n      'color' : 'COLOR',\n      'uv' : 'TEX_COORD'\n    };\n};\n\nTHREE.DRACOLoader.prototype = {\n\n    constructor: THREE.DRACOLoader,\n\n    loadFtrm: function(url, onLoad, onProgress, onError) {\n      const scope = this;\n      const loader = new THREE.FileLoader(scope.manager);\n      loader.setPath(this.path);\n      loader.setResponseType('arraybuffer');\n      let request = loader.load(url, function(blob) {\n        onLoad(blob);\n      }, onProgress, onError);\n      return request\n    },\n\n    load: function(url, onLoad, onProgress, onError) {\n        var scope = this;\n        var loader = new THREE.FileLoader(scope.manager);\n        loader.setPath(this.path);\n        loader.setResponseType('arraybuffer');\n        if (this.crossOrigin !== undefined) {\n          loader.crossOrigin = this.crossOrigin;\n        }\n        loader.load(url, function(blob) {\n            scope.decodeDracoFile(blob, onLoad);\n        }, onProgress, onError);\n    },\n\n    setPath: function(value) {\n        this.path = value;\n    },\n\n    setCrossOrigin: function(value) {\n        this.crossOrigin = value;\n    },\n\n    setVerbosity: function(level) {\n        this.verbosity = level;\n    },\n\n    /**\n     *  Sets desired mode for generated geometry indices.\n     *  Can be either:\n     *      THREE.TrianglesDrawMode\n     *      THREE.TriangleStripDrawMode\n     */\n    setDrawMode: function(drawMode) {\n        this.drawMode = drawMode;\n    },\n\n    /**\n     * Skips dequantization for a specific attribute.\n     * |attributeName| is the THREE.js name of the given attribute type.\n     * The only currently supported |attributeName| is 'position', more may be\n     * added in future.\n     */\n    setSkipDequantization: function(attributeName, skip) {\n        var skipDequantization = true;\n        if (typeof skip !== 'undefined')\n          skipDequantization = skip;\n        this.getAttributeOptions(attributeName).skipDequantization =\n            skipDequantization;\n    },\n\n    /**\n     * |attributeUniqueIdMap| specifies attribute unique id for an attribute in\n     * the geometry to be decoded. The name of the attribute must be one of the\n     * supported attribute type in Three.JS, including:\n     *     'position',\n     *     'color',\n     *     'normal',\n     *     'uv',\n     *     'uv2',\n     *     'skinIndex',\n     *     'skinWeight'.\n     * The format is:\n     *     attributeUniqueIdMap[attributeName] = attributeId\n     */\n    decodeDracoFile: function(rawBuffer, callback, attributeUniqueIdMap,\n                              attributeTypeMap) {\n      var scope = this;\n      THREE.DRACOLoader.getDecoderModule()\n          .then( function ( module ) {\n            scope.decodeDracoFileInternal( rawBuffer, module.decoder, callback,\n              attributeUniqueIdMap || {}, attributeTypeMap || {});\n          });\n    },\n\n    decodeDracoFileInternal: function(rawBuffer, dracoDecoder, callback,\n                                      attributeUniqueIdMap, attributeTypeMap) {\n      /*\n       * Here is how to use Draco Javascript decoder and get the geometry.\n       */\n      var buffer = new dracoDecoder.DecoderBuffer();\n      buffer.Init(new Int8Array(rawBuffer), rawBuffer.byteLength);\n      var decoder = new dracoDecoder.Decoder();\n\n      /*\n       * Determine what type is this file: mesh or point cloud.\n       */\n      var geometryType = decoder.GetEncodedGeometryType(buffer);\n      if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n        if (this.verbosity > 0) {\n          console.log('Loaded a mesh.');\n        }\n      } else if (geometryType == dracoDecoder.POINT_CLOUD) {\n        if (this.verbosity > 0) {\n          console.log('Loaded a point cloud.');\n        }\n      } else {\n        var errorMsg = 'THREE.DRACOLoader: Unknown geometry type.'\n        console.error(errorMsg);\n        throw new Error(errorMsg);\n      }\n      callback(this.convertDracoGeometryTo3JS(dracoDecoder, decoder,\n          geometryType, buffer, attributeUniqueIdMap, attributeTypeMap));\n    },\n\n    addAttributeToGeometry: function(dracoDecoder, decoder, dracoGeometry,\n                                     attributeName, attributeType, attribute,\n                                     geometry, geometryBuffer) {\n      if (attribute.ptr === 0) {\n        var errorMsg = 'THREE.DRACOLoader: No attribute ' + attributeName;\n        console.error(errorMsg);\n        throw new Error(errorMsg);\n      }\n\n      var numComponents = attribute.num_components();\n      var numPoints = dracoGeometry.num_points();\n      var numValues = numPoints * numComponents;\n      var attributeData;\n      var TypedBufferAttribute;\n\n      switch ( attributeType ) {\n\n        case Float32Array:\n          attributeData = new dracoDecoder.DracoFloat32Array();\n          decoder.GetAttributeFloatForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Float32Array( numValues );\n          TypedBufferAttribute = THREE.Float32BufferAttribute;\n          break;\n\n        case Int8Array:\n          attributeData = new dracoDecoder.DracoInt8Array();\n          decoder.GetAttributeInt8ForAllPoints(\n            dracoGeometry, attribute, attributeData );\n          geometryBuffer[ attributeName ] = new Int8Array( numValues );\n          TypedBufferAttribute = THREE.Int8BufferAttribute;\n          break;\n\n        case Int16Array:\n          attributeData = new dracoDecoder.DracoInt16Array();\n          decoder.GetAttributeInt16ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Int16Array( numValues );\n          TypedBufferAttribute = THREE.Int16BufferAttribute;\n          break;\n\n        case Int32Array:\n          attributeData = new dracoDecoder.DracoInt32Array();\n          decoder.GetAttributeInt32ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Int32Array( numValues );\n          TypedBufferAttribute = THREE.Int32BufferAttribute;\n          break;\n\n        case Uint8Array:\n          attributeData = new dracoDecoder.DracoUInt8Array();\n          decoder.GetAttributeUInt8ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Uint8Array( numValues );\n          TypedBufferAttribute = THREE.Uint8BufferAttribute;\n          break;\n\n        case Uint16Array:\n          attributeData = new dracoDecoder.DracoUInt16Array();\n          decoder.GetAttributeUInt16ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Uint16Array( numValues );\n          TypedBufferAttribute = THREE.Uint16BufferAttribute;\n          break;\n\n        case Uint32Array:\n          attributeData = new dracoDecoder.DracoUInt32Array();\n          decoder.GetAttributeUInt32ForAllPoints(\n            dracoGeometry, attribute, attributeData);\n          geometryBuffer[ attributeName ] = new Uint32Array( numValues );\n          TypedBufferAttribute = THREE.Uint32BufferAttribute;\n          break;\n\n        default:\n          var errorMsg = 'THREE.DRACOLoader: Unexpected attribute type.';\n          console.error( errorMsg );\n          throw new Error( errorMsg );\n\n      }\n\n      // Copy data from decoder.\n      for (var i = 0; i < numValues; i++) {\n        geometryBuffer[attributeName][i] = attributeData.GetValue(i);\n      }\n      // Add attribute to THREEJS geometry for rendering.\n      geometry.addAttribute(attributeName,\n          new TypedBufferAttribute(geometryBuffer[attributeName],\n            numComponents));\n      dracoDecoder.destroy(attributeData);\n    },\n\n    convertDracoGeometryTo3JS: function(dracoDecoder, decoder, geometryType,\n                                        buffer, attributeUniqueIdMap,\n                                        attributeTypeMap) {\n        if (this.getAttributeOptions('position').skipDequantization === true) {\n          decoder.SkipAttributeTransform(dracoDecoder.POSITION);\n        }\n        var dracoGeometry;\n        var decodingStatus;\n        const start_time = performance.now();\n        if (geometryType === dracoDecoder.TRIANGULAR_MESH) {\n          dracoGeometry = new dracoDecoder.Mesh();\n          decodingStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n        } else {\n          dracoGeometry = new dracoDecoder.PointCloud();\n          decodingStatus =\n              decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n        }\n        if (!decodingStatus.ok() || dracoGeometry.ptr == 0) {\n          var errorMsg = 'THREE.DRACOLoader: Decoding failed: ';\n          errorMsg += decodingStatus.error_msg();\n          console.error(errorMsg);\n          dracoDecoder.destroy(decoder);\n          dracoDecoder.destroy(dracoGeometry);\n          throw new Error(errorMsg);\n        }\n\n        var decode_end = performance.now();\n        dracoDecoder.destroy(buffer);\n        /*\n         * Example on how to retrieve mesh and attributes.\n         */\n        var numFaces;\n        if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n          numFaces = dracoGeometry.num_faces();\n          if (this.verbosity > 0) {\n            console.log('Number of faces loaded: ' + numFaces.toString());\n          }\n        } else {\n          numFaces = 0;\n        }\n\n        var numPoints = dracoGeometry.num_points();\n        var numAttributes = dracoGeometry.num_attributes();\n        if (this.verbosity > 0) {\n          console.log('Number of points loaded: ' + numPoints.toString());\n          console.log('Number of attributes loaded: ' +\n              numAttributes.toString());\n        }\n\n        // Verify if there is position attribute.\n        var posAttId = decoder.GetAttributeId(dracoGeometry,\n                                              dracoDecoder.POSITION);\n        if (posAttId == -1) {\n          var errorMsg = 'THREE.DRACOLoader: No position attribute found.';\n          console.error(errorMsg);\n          dracoDecoder.destroy(decoder);\n          dracoDecoder.destroy(dracoGeometry);\n          throw new Error(errorMsg);\n        }\n        var posAttribute = decoder.GetAttribute(dracoGeometry, posAttId);\n\n        // Structure for converting to THREEJS geometry later.\n        var geometryBuffer = {};\n        // Import data to Three JS geometry.\n        var geometry = new THREE.BufferGeometry();\n\n        // Add native Draco attribute type to geometry.\n        for (var attributeName in this.nativeAttributeMap) {\n          // The native attribute type is only used when no unique Id is\n          // provided. For example, loading .drc files.\n          if (attributeUniqueIdMap[attributeName] === undefined) {\n            var attId = decoder.GetAttributeId(dracoGeometry,\n                dracoDecoder[this.nativeAttributeMap[attributeName]]);\n            if (attId !== -1) {\n              if (this.verbosity > 0) {\n                console.log('Loaded ' + attributeName + ' attribute.');\n              }\n              var attribute = decoder.GetAttribute(dracoGeometry, attId);\n              this.addAttributeToGeometry(dracoDecoder, decoder, dracoGeometry,\n                  attributeName, Float32Array, attribute, geometry, geometryBuffer);\n            }\n          }\n        }\n\n        // Add attributes of user specified unique id. E.g. GLTF models.\n        for (var attributeName in attributeUniqueIdMap) {\n          var attributeType = attributeTypeMap[attributeName] || Float32Array;\n          var attributeId = attributeUniqueIdMap[attributeName];\n          var attribute = decoder.GetAttributeByUniqueId(dracoGeometry,\n                                                         attributeId);\n          this.addAttributeToGeometry(dracoDecoder, decoder, dracoGeometry,\n              attributeName, attributeType, attribute, geometry, geometryBuffer);\n        }\n\n        // For mesh, we need to generate the faces.\n        if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n          if (this.drawMode === THREE.TriangleStripDrawMode) {\n            var stripsArray = new dracoDecoder.DracoInt32Array();\n            var numStrips = decoder.GetTriangleStripsFromMesh(\n                dracoGeometry, stripsArray);\n            geometryBuffer.indices = new Uint32Array(stripsArray.size());\n            for (var i = 0; i < stripsArray.size(); ++i) {\n              geometryBuffer.indices[i] = stripsArray.GetValue(i);\n            }\n            dracoDecoder.destroy(stripsArray);\n          } else {\n            var numIndices = numFaces * 3;\n            geometryBuffer.indices = new Uint32Array(numIndices);\n            var ia = new dracoDecoder.DracoInt32Array();\n            for (var i = 0; i < numFaces; ++i) {\n              decoder.GetFaceFromMesh(dracoGeometry, i, ia);\n              var index = i * 3;\n              geometryBuffer.indices[index] = ia.GetValue(0);\n              geometryBuffer.indices[index + 1] = ia.GetValue(1);\n              geometryBuffer.indices[index + 2] = ia.GetValue(2);\n            }\n            dracoDecoder.destroy(ia);\n         }\n        }\n\n        geometry.drawMode = this.drawMode;\n        if (geometryType == dracoDecoder.TRIANGULAR_MESH) {\n          geometry.setIndex(new(geometryBuffer.indices.length > 65535 ?\n                THREE.Uint32BufferAttribute : THREE.Uint16BufferAttribute)\n              (geometryBuffer.indices, 1));\n        }\n        var posTransform = new dracoDecoder.AttributeQuantizationTransform();\n        if (posTransform.InitFromAttribute(posAttribute)) {\n          // Quantized attribute. Store the quantization parameters into the\n          // THREE.js attribute.\n          geometry.attributes['position'].isQuantized = true;\n          geometry.attributes['position'].maxRange = posTransform.range();\n          geometry.attributes['position'].numQuantizationBits =\n              posTransform.quantization_bits();\n          geometry.attributes['position'].minValues = new Float32Array(3);\n          for (var i = 0; i < 3; ++i) {\n            geometry.attributes['position'].minValues[i] =\n                posTransform.min_value(i);\n          }\n        }\n        dracoDecoder.destroy(posTransform);\n        dracoDecoder.destroy(decoder);\n        dracoDecoder.destroy(dracoGeometry);\n\n        this.decode_time = decode_end - start_time;\n        this.import_time = performance.now() - decode_end;\n\n        if (this.verbosity > 0) {\n          console.log('Decode time: ' + this.decode_time);\n          console.log('Import time: ' + this.import_time);\n        }\n        return geometry;\n    },\n\n    isVersionSupported: function(version, callback) {\n        THREE.DRACOLoader.getDecoderModule()\n            .then( function ( module ) {\n              callback( module.decoder.isVersionSupported( version ) );\n            });\n    },\n\n    getAttributeOptions: function(attributeName) {\n        if (typeof this.attributeOptions[attributeName] === 'undefined')\n          this.attributeOptions[attributeName] = {};\n        return this.attributeOptions[attributeName];\n    }\n};\n\nTHREE.DRACOLoader.decoderPath = './';\nTHREE.DRACOLoader.decoderConfig = {};\nTHREE.DRACOLoader.decoderModulePromise = null;\n\n/**\n * Sets the base path for decoder source files.\n * @param {string} path\n */\nTHREE.DRACOLoader.setDecoderPath = function ( path ) {\n  THREE.DRACOLoader.decoderPath = path;\n};\n\n/**\n * Sets decoder configuration and releases singleton decoder module. Module\n * will be recreated with the next decoding call.\n * @param {Object} config\n */\nTHREE.DRACOLoader.setDecoderConfig = function ( config ) {\n  var wasmBinary = THREE.DRACOLoader.decoderConfig.wasmBinary;\n  THREE.DRACOLoader.decoderConfig = config || {};\n  THREE.DRACOLoader.releaseDecoderModule();\n\n  // Reuse WASM binary.\n  if ( wasmBinary ) THREE.DRACOLoader.decoderConfig.wasmBinary = wasmBinary;\n};\n\n/**\n * Releases the singleton DracoDecoderModule instance. Module will be recreated\n * with the next decoding call.\n */\nTHREE.DRACOLoader.releaseDecoderModule = function () {\n  THREE.DRACOLoader.decoderModulePromise = null;\n};\n\n/**\n * Gets WebAssembly or asm.js singleton instance of DracoDecoderModule\n * after testing for browser support. Returns Promise that resolves when\n * module is available.\n * @return {Promise<{decoder: DracoDecoderModule}>}\n */\nTHREE.DRACOLoader.getDecoderModule = function () {\n  var scope = this;\n  var path = THREE.DRACOLoader.decoderPath;\n  var config = THREE.DRACOLoader.decoderConfig;\n  var promise = THREE.DRACOLoader.decoderModulePromise;\n\n  if ( promise ) return promise;\n\n  // Load source files.\n  if ( typeof DracoDecoderModule !== 'undefined' ) {\n    // Loaded externally.\n    promise = Promise.resolve();\n  } else if ( typeof WebAssembly !== 'object' || config.type === 'js' ) {\n    // Load with asm.js.\n    promise = THREE.DRACOLoader._loadScript( path + 'decoder.v1.0.js' );\n  } else {\n    // Load with WebAssembly.\n    config.wasmBinaryFile = path + 'draco_decoder.wasm';\n    promise = THREE.DRACOLoader._loadScript( path + 'draco_wasm_wrapper.js' )\n        .then( function () {\n          return THREE.DRACOLoader._loadArrayBuffer( config.wasmBinaryFile );\n        } )\n        .then( function ( wasmBinary ) {\n          config.wasmBinary = wasmBinary;\n        } );\n  }\n\n  // Wait for source files, then create and return a decoder.\n  /*global DracoDecoderModule */\n  promise = promise.then( function () {\n    return new Promise( function ( resolve ) {\n      config.onModuleLoaded = function ( decoder ) {\n        scope.timeLoaded = performance.now();\n        // Module is Promise-like. Wrap before resolving to avoid loop.\n        resolve( { decoder: decoder } );\n      };\n      DracoDecoderModule( config );\n    } );\n  } );\n\n  THREE.DRACOLoader.decoderModulePromise = promise;\n  return promise;\n};\n\n/**\n * @param {string} src\n * @return {Promise}\n */\nTHREE.DRACOLoader._loadScript = function ( src ) {\n  var prevScript = document.getElementById( 'decoder_script' );\n  if ( prevScript !== null ) {\n    prevScript.parentNode.removeChild( prevScript );\n  }\n  var head = document.getElementsByTagName( 'head' )[ 0 ];\n  var script = document.createElement( 'script' );\n  script.id = 'decoder_script';\n  script.type = 'text/javascript';\n  script.src = src;\n  return new Promise( function ( resolve ) {\n    script.onload = resolve;\n    head.appendChild( script );\n  });\n};\n\n/**\n * @param {string} src\n * @return {Promise}\n */\nTHREE.DRACOLoader._loadArrayBuffer = function ( src ) {\n  var loader = new THREE.FileLoader();\n  loader.setResponseType( 'arraybuffer' );\n  return new Promise( function( resolve, reject ) {\n    loader.load( src, resolve, undefined, reject );\n  });\n};\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/DRACOLoader.js","/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n/* eslint-disable */ \n\nconst THREE = require('three')\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finger swipe\n\nTHREE.OrbitControls = function(object, domElement, param) {\n  this.object = object;\n\n  this.domElement = domElement !== undefined ? domElement : document;\n\n  // Set to false to disable this control\n  this.enabled = true;\n\n  // \"target\" sets the location of focus, where the object orbits around\n  this.target = new THREE.Vector3();\n\n  // How far you can dolly in and out ( PerspectiveCamera only )\n  this.minDistance = param.minDistance || 0;\n  this.maxDistance = param.maxDistance || Infinity;\n  // 自定义距离\n  this.customDistance = param.customDistance || 610\n\n\n  // How far you can zoom in and out ( OrthographicCamera only )\n  this.minZoom = param.minZoom || 0;\n  this.maxZoom = param.maxZoom || Infinity;\n\n  // How far you can orbit vertically, upper and lower limits.\n  // Range is 0 to Math.PI radians.\n  this.minPolarAngle = param.minPolarAngle || 0; // radians\n  this.maxPolarAngle = param.maxPolarAngle || Math.PI; // radians\n\n\n  // How far you can orbit horizontally, upper and lower limits.\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n  this.minAzimuthAngle = -Infinity; // radians\n  this.maxAzimuthAngle = Infinity; // radians\n\n  // Set to true to enable damping (inertia) //惯性设置\n  // If damping is enabled, you must call controls.update() in your animation loop\n  this.enableDamping = true;\n  this.dampingFactor = 0.3;\n\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n  // Set to false to disable zooming //缩放速度\n  this.enableZoom = true;\n  this.zoomSpeed = 0.2;\n\n  // Set to false to disable rotating\n  this.enableRotate = true;\n  this.rotateSpeed = 0.1\n\n  // Set to false to disable panning\n  this.enablePan = false;\n  this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\n  // Set to true to automatically rotate around the target\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\n  this.autoRotate = false;\n  this.autoRotateSpeed = -0.06; // 30 seconds per round when fps is 60 //旋转速度以及方向\n\n  // Set to false to disable use of the keys\n  this.enableKeys = true;\n\n  // The four arrow keys\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\n  // Mouse buttons\n  this.mouseButtons = {\n    ORBIT: THREE.MOUSE.LEFT,\n    ZOOM: THREE.MOUSE.MIDDLE,\n    PAN: null //禁用鼠标右键拖动\n  };\n\n  // for reset\n  this.target0 = this.target.clone();\n  this.position0 = this.object.position.clone();\n  this.zoom0 = this.object.zoom;\n\n  //trans click event\n  this.onClickCallback = undefined;\n\n  //自定义回调\n  this.onMouseMoveCallBack = undefined\n\n\n  //自定义进入内饰（进入内饰动画）\n  this.isIntoInterior = undefined\n\n  this.fpsTarget = new THREE.Vector3();\n  this.lookSpeed = 0.005;\n  this.lat = 0;\n  this.lon = 0;\n  this.phi = 0;\n  this.theta = 0;\n  this.focalLengthBackup = this.object.getFocalLength();\n  this.focalLength = this.object.getFocalLength();\n\n  this.interactingTimeOut = param.interactingTimeOut || 5000;\n  this.interactingTime = 0;\n\n  //\n  // public methods\n  //\n\n  this.getPolarAngle = function() {\n    return spherical.phi;\n  };\n\n  this.getAzimuthalAngle = function() {\n    return spherical.theta;\n  };\n\n  // 新版本方法\n  this.saveState = function () {\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n  this.reset = function() {\n    scope.target.copy(scope.target0);\n    scope.object.position.copy(scope.position0);\n    scope.object.zoom = scope.zoom0;\n\n    scope.object.updateProjectionMatrix();\n    scope.dispatchEvent(changeEvent);\n\n    scope.update();\n\n    state = STATE.NONE;\n  };\n\n  // this method is exposed, but perhaps it would be better if we can make it private...\n  this.update = function(delta, isOrbit) {\n    var offset = new THREE.Vector3();\n\n    // so camera.up is the orbit axis\n    var quat = new THREE.Quaternion().setFromUnitVectors(\n      object.up,\n      new THREE.Vector3(0, 1, 0)\n    );\n    var quatInverse = quat.clone().inverse();\n\n    var lastPosition = new THREE.Vector3();\n    var lastQuaternion = new THREE.Quaternion();\n\n    // return function update() {\n\n    // var isUserInteracting = false;\n    // if (state !== STATE.NONE) {\n    //   // isUserInteracting = true;\n    //   // scope.interactingTime = Date.now();\n    // } else {\n    //   // var elapsedTime = Date.now() - scope.interactingTime;\n    //   // if (elapsedTime < scope.interactingTimeOut) {\n    //   //   isUserInteracting = true;\n    //   // }\n    // }\n    if (typeof isOrbit !== \"undefined\" && !isOrbit) {\n      if (scale !== 1) {\n        scope.focalLength = Math.max(\n          35,\n          Math.min(80, scope.focalLength / scale)\n        );\n        scope.object.setFocalLength(scope.focalLength);\n      }\n\n      //rotate\n      var actualLookSpeed = delta * this.lookSpeed;\n      if (\n        Math.abs(sphericalDelta.theta) > EPS ||\n        Math.abs(sphericalDelta.phi) > EPS\n      ) {\n        scope.lon += THREE.Math.radToDeg(\n          sphericalDelta.theta * actualLookSpeed\n        );\n        scope.lat -= THREE.Math.radToDeg(sphericalDelta.phi * actualLookSpeed);\n      }\n      if (scope.autoRotate ) {\n        scope.lon += 0.05;\n      }\n      // scope.lat = Math.max(-85, Math.min(85, scope.lat));\n\n      scope.phi = THREE.Math.degToRad(90 - scope.lat);\n      scope.theta = THREE.Math.degToRad(scope.lon);\n\n      var targetPosition = scope.fpsTarget,\n        position = scope.object.position;\n\n      targetPosition.x =\n        position.x + 100 * Math.sin(scope.phi) * Math.cos(scope.theta);\n\n      targetPosition.y = position.y + 100 * Math.cos(scope.phi);\n      targetPosition.z =\n        position.z + 100 * Math.sin(scope.phi) * Math.sin(scope.theta);\n\n      scope.object.lookAt(targetPosition);\n\n      // console.log(\"delta=\" + delta)\n      // console.log(\"cameraPosition: \" + scope.object.position.x + \", \" + scope.object.position.y + \", \" + scope.object.position.z);\n      // console.log(\"targetPosition: \" + targetPosition.x + \", \" + targetPosition.y + \", \" + targetPosition.z);\n\n      sphericalDelta.set(0, 0, 0);\n      scale = 1;\n      panOffset.set(0, 0, 0);\n\n      return true;\n    }\n\n    if (scope.focalLength !== scope.focalLengthBackup) {\n      scope.focalLength = scope.focalLengthBackup;\n      scope.object.setFocalLength(scope.focalLength);\n    }\n\n    var position = scope.object.position;\n\n    offset.copy(position).sub(scope.target);\n\n    // rotate offset to \"y-axis-is-up\" space\n    offset.applyQuaternion(quat);\n\n    // angle from z-axis around y-axis\n    spherical.setFromVector3(offset);\n\n    if (\n      scope.autoRotate &&\n      state === STATE.NONE\n      //  &&\n      // isUserInteracting === false\n    ) {\n      rotateLeft(getAutoRotationAngle());\n    }\n\n    spherical.theta += sphericalDelta.theta;\n    spherical.phi += sphericalDelta.phi;\n\n    // restrict theta to be between desired limits\n    spherical.theta = Math.max(\n      scope.minAzimuthAngle,\n      Math.min(scope.maxAzimuthAngle, spherical.theta)\n    );\n\n    // restrict phi to be between desired limits\n    spherical.phi = Math.max(\n      scope.minPolarAngle,\n      Math.min(scope.maxPolarAngle, spherical.phi)\n    );\n\n    spherical.makeSafe();\n    spherical.radius *= scale;\n\n\n    // 自定义半径距离\n    // spherical.radius = scope.customDistance \n\n    // restrict radius to be between desired limits\n\n    spherical.radius = Math.max(\n      scope.minDistance,\n      Math.min(scope.maxDistance, spherical.radius)\n    );\n    \n    // console.log('scale:' + spherical.radius)\n\n\n    // move target to panned location\n    scope.target.add(panOffset);\n    \n    offset.setFromSpherical(spherical);\n\n    // rotate offset back to \"camera-up-vector-is-up\" space\n    offset.applyQuaternion(quatInverse);\n\n\n    if ( !scope.isIntoInterior ) {\n\n      position.copy(scope.target).add(offset);\n      scope.object.lookAt(scope.object.position.x / 3, 0, scope.object.position.z / 10 )\n    } else {\n\n      scope.object.lookAt(-30, 30, 33 )\n    }\n\n    // console.log(scope.object.position)\n    // console.log(spherical.radius)\n\n \n    if (scope.enableDamping === true) {\n      sphericalDelta.theta *= 1 - scope.dampingFactor;\n      sphericalDelta.phi *= 1 - scope.dampingFactor;\n    } else {\n      sphericalDelta.set(0, 0, 0);\n    }\n\n    scale = 1;\n    panOffset.set(0, 0, 0);\n\n    // update condition is:\n    // min(camera displacement, camera rotation in radians)^2 > EPS\n    // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n    if (\n      zoomChanged ||\n      lastPosition.distanceToSquared(scope.object.position) > EPS ||\n      8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS\n    ) {\n      scope.dispatchEvent(changeEvent);\n\n      lastPosition.copy(scope.object.position);\n      lastQuaternion.copy(scope.object.quaternion);\n      zoomChanged = false;\n\n      return true;\n    }\n\n    return false;\n\n    // };\n  };\n\n  this.dispose = function() {\n    scope.domElement.removeEventListener(\"contextmenu\", onContextMenu, false);\n    scope.domElement.removeEventListener(\"mousedown\", onMouseDown, false);\n    scope.domElement.removeEventListener(\"wheel\", onMouseWheel, false);\n\n    scope.domElement.removeEventListener(\"touchstart\", onTouchStart, false);\n    scope.domElement.removeEventListener(\"touchend\", onTouchEnd, false);\n    scope.domElement.removeEventListener(\"touchmove\", onTouchMove, false);\n\n    scope.domElement.removeEventListener(\"click\", onClick, false);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    window.removeEventListener(\"keydown\", onKeyDown, false);\n\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n  };\n\n  // 添加新的外部调用功能\n  this.moveLeft = function(angle) {\n    rotateLeft(angle)\n  };\n  this.moveUp = function(angle) {\n    rotateUp(angle)\n  };\n  this.moveIn = function() {\n    dollyOut(getZoomScale())\n  }\n  this.moveOut = function() {\n    dollyIn(getZoomScale())\n  }\n \n  //\n  // internals\n  //\n\n  var scope = this;\n\n  var changeEvent = { type: \"change\" };\n  var startEvent = { type: \"start\" };\n  var endEvent = { type: \"end\" };\n\n  // 新增自定的分发事件\n  var cusMouseDownMove = { type: 'cus_mouse_down_move' };\n  var cusMouseUp = { type: 'cus_mouse_up' };\n\n  var STATE = {\n    NONE: -1,\n    ROTATE: 0,\n    DOLLY: 1,\n    PAN: 2,\n    TOUCH_ROTATE: 3,\n    TOUCH_DOLLY: 4,\n    TOUCH_PAN: 5\n  };\n\n  var state = STATE.NONE;\n\n  var EPS = 0.000001;\n\n  // current position in spherical coordinates\n  var spherical = new THREE.Spherical();\n  var sphericalDelta = new THREE.Spherical();\n\n  var scale = 1;\n  var panOffset = new THREE.Vector3();\n  var zoomChanged = false;\n\n  var rotateStart = new THREE.Vector2();\n  var rotateEnd = new THREE.Vector2();\n  var rotateDelta = new THREE.Vector2();\n\n  var panStart = new THREE.Vector2();\n  var panEnd = new THREE.Vector2();\n  var panDelta = new THREE.Vector2();\n\n  var dollyStart = new THREE.Vector2();\n  var dollyEnd = new THREE.Vector2();\n  var dollyDelta = new THREE.Vector2();\n\n  function getAutoRotationAngle() {\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n  }\n\n  function getZoomScale() {\n    return Math.pow(0.95, scope.zoomSpeed);\n  }\n\n  function rotateLeft(angle) {\n    sphericalDelta.theta -= angle;\n  }\n\n  function rotateUp(angle) {\n    sphericalDelta.phi -= angle;\n  }\n\n  var panLeft = (function() {\n    var v = new THREE.Vector3();\n\n    return function panLeft(distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n      v.multiplyScalar(-distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  var panUp = (function() {\n    var v = new THREE.Vector3();\n\n    return function panUp(distance, objectMatrix) {\n      v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n      v.multiplyScalar(distance);\n\n      panOffset.add(v);\n    };\n  })();\n\n  // deltaX and deltaY are in pixels; right and down are positive\n  var pan = (function() {\n    var offset = new THREE.Vector3();\n\n    return function pan(deltaX, deltaY) {\n      var element =\n        scope.domElement === document\n          ? scope.domElement.body\n          : scope.domElement;\n\n      if (scope.object instanceof THREE.PerspectiveCamera) {\n        // perspective\n        var position = scope.object.position;\n        offset.copy(position).sub(scope.target);\n        var targetDistance = offset.length();\n\n        // half of the fov is center to top of screen\n        targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0);\n\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\n        panLeft(\n          2 * deltaX * targetDistance / element.clientHeight,\n          scope.object.matrix\n        );\n        panUp(\n          2 * deltaY * targetDistance / element.clientHeight,\n          scope.object.matrix\n        );\n      } else if (scope.object instanceof THREE.OrthographicCamera) {\n        // orthographic\n        panLeft(\n          deltaX *\n            (scope.object.right - scope.object.left) /\n            scope.object.zoom /\n            element.clientWidth,\n          scope.object.matrix\n        );\n        panUp(\n          deltaY *\n            (scope.object.top - scope.object.bottom) /\n            scope.object.zoom /\n            element.clientHeight,\n          scope.object.matrix\n        );\n      } else {\n        // camera neither orthographic nor perspective\n        console.warn(\n          \"WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.\"\n        );\n        scope.enablePan = false;\n      }\n    };\n  })();\n\n  function dollyIn(dollyScale) {\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale /= dollyScale;\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom * dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  function dollyOut(dollyScale) {\n    if (scope.object instanceof THREE.PerspectiveCamera) {\n      scale *= dollyScale;\n    } else if (scope.object instanceof THREE.OrthographicCamera) {\n      scope.object.zoom = Math.max(\n        scope.minZoom,\n        Math.min(scope.maxZoom, scope.object.zoom / dollyScale)\n      );\n      scope.object.updateProjectionMatrix();\n      zoomChanged = true;\n    } else {\n      console.warn(\n        \"WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.\"\n      );\n      scope.enableZoom = false;\n    }\n  }\n\n  //\n  // event callbacks - update the object state\n  //\n\n  function handleMouseDownRotate(event) {\n    //console.log( 'handleMouseDownRotate' );\n    rotateStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownDolly(event) {\n    //console.log( 'handleMouseDownDolly' );\n\n    dollyStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseDownPan(event) {\n    //console.log( 'handleMouseDownPan' );\n\n    panStart.set(event.clientX, event.clientY);\n  }\n\n  function handleMouseMoveRotate(event) {\n    //console.log( 'handleMouseMoveRotate' );\n\n    scope.dispatchEvent(cusMouseDownMove);\n\n    rotateEnd.set(event.clientX, event.clientY);\n    rotateDelta.subVectors(rotateEnd, rotateStart);\n\n    var element =\n      scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    // rotating across whole screen goes 360 degrees around\n    rotateLeft(\n      2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed\n    );\n\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\n    rotateUp(\n      // 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed  // 修改上下移动的速度\n      2 * Math.PI * rotateDelta.y / element.clientHeight * 0.02\n    );\n\n    rotateStart.copy(rotateEnd);\n\n    // scope.update();\n  }\n\n  function handleMouseMoveDolly(event) {\n    //console.log( 'handleMouseMoveDolly' );\n\n    dollyEnd.set(event.clientX, event.clientY);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyIn(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyOut(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    // scope.update();\n  }\n\n  function handleMouseMovePan(event) {\n    //console.log( 'handleMouseMovePan' );\n\n    panEnd.set(event.clientX, event.clientY);\n\n    panDelta.subVectors(panEnd, panStart);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    // scope.update();\n  }\n\n  function handleMouseUp(event) {\n    // 鼠标弹起时\n    scope.dispatchEvent(cusMouseUp);\n    // console.log( 'handleMouseUp' );\n  }\n\n  function handleMouseWheel(event) {\n    // console.log( 'handleMouseWheel' );\n    if (event.deltaY < 0) {\n      dollyOut(getZoomScale());\n    } else if (event.deltaY > 0) {\n      dollyIn(getZoomScale());\n    }\n\n    // scope.update();\n  }\n\n  function handleKeyDown(event) {\n    //console.log( 'handleKeyDown' );\n\n    switch (event.keyCode) {\n      case scope.keys.UP:\n        pan(0, scope.keyPanSpeed);\n        // scope.update();\n        break;\n\n      case scope.keys.BOTTOM:\n        pan(0, -scope.keyPanSpeed);\n        // scope.update();\n        break;\n\n      case scope.keys.LEFT:\n        pan(scope.keyPanSpeed, 0);\n        // scope.update();\n        break;\n\n      case scope.keys.RIGHT:\n        pan(-scope.keyPanSpeed, 0);\n        // scope.update();\n        break;\n    }\n  }\n\n  function handleTouchStartRotate(event) {\n    //console.log( 'handleTouchStartRotate' );\n\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n  }\n\n  function handleTouchStartDolly(event) {\n    //console.log( 'handleTouchStartDolly' );\n\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyStart.set(0, distance);\n  }\n\n  function handleTouchStartPan(event) {\n    //console.log( 'handleTouchStartPan' );\n\n    panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n  }\n\n  function handleTouchMoveRotate(event) {\n    //console.log( 'handleTouchMoveRotate' );\n\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n    rotateDelta.subVectors(rotateEnd, rotateStart);\n\n    var element =\n      scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n    // rotating across whole screen goes 360 degrees around\n    rotateLeft(\n      2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed\n    );\n\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\n    rotateUp(\n      2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed\n    );\n\n    rotateStart.copy(rotateEnd);\n\n    // scope.update();\n  }\n\n  function handleTouchMoveDolly(event) {\n    //console.log( 'handleTouchMoveDolly' );\n\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\n\n    var distance = Math.sqrt(dx * dx + dy * dy);\n\n    dollyEnd.set(0, distance);\n\n    dollyDelta.subVectors(dollyEnd, dollyStart);\n\n    if (dollyDelta.y > 0) {\n      dollyOut(getZoomScale());\n    } else if (dollyDelta.y < 0) {\n      dollyIn(getZoomScale());\n    }\n\n    dollyStart.copy(dollyEnd);\n\n    // scope.update();\n  }\n\n  function handleTouchMovePan(event) {\n    //console.log( 'handleTouchMovePan' );\n\n    panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n\n    panDelta.subVectors(panEnd, panStart);\n\n    pan(panDelta.x, panDelta.y);\n\n    panStart.copy(panEnd);\n\n    // scope.update();\n  }\n\n  function handleTouchEnd(event) {\n    //console.log( 'handleTouchEnd' );\n  }\n\n  //\n  // event handlers - FSM: listen for events and reset state\n  //\n\n  function onMouseDown(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n\n    if (event.button === scope.mouseButtons.ORBIT) {\n      if (scope.enableRotate === false) return;\n\n      handleMouseDownRotate(event);\n\n      state = STATE.ROTATE;\n    } else if (event.button === scope.mouseButtons.ZOOM) {\n      if (scope.enableZoom === false) return;\n\n      handleMouseDownDolly(event);\n\n      state = STATE.DOLLY;\n    } else if (event.button === scope.mouseButtons.PAN) {\n      if (scope.enablePan === false) return;\n\n      handleMouseDownPan(event);\n\n      state = STATE.PAN;\n    }\n\n    if (state !== STATE.NONE) {\n      document.addEventListener(\"mousemove\", onMouseMove, false);\n      document.addEventListener(\"mouseup\", onMouseUp, false);\n\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onMouseMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    \n    // 添加回调\n    if (scope.onMouseMoveCallBack) {\n      scope.onMouseMoveCallBack()\n    }\n\n    if (state === STATE.ROTATE) {\n      if (scope.enableRotate === false) return;\n\n      handleMouseMoveRotate(event);\n    } else if (state === STATE.DOLLY) {\n      if (scope.enableZoom === false) return;\n\n      handleMouseMoveDolly(event);\n    } else if (state === STATE.PAN) {\n      if (scope.enablePan === false) return;\n\n      handleMouseMovePan(event);\n    }\n  }\n\n  function onMouseUp(event) {\n    if (scope.enabled === false) return;\n\n    handleMouseUp(event);\n\n    document.removeEventListener(\"mousemove\", onMouseMove, false);\n    document.removeEventListener(\"mouseup\", onMouseUp, false);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onMouseWheel(event) {\n    if (\n      scope.enabled === false ||\n      scope.enableZoom === false ||\n      (state !== STATE.NONE && state !== STATE.ROTATE)\n    )\n      return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    handleMouseWheel(event);\n\n    scope.dispatchEvent(startEvent); // not sure why these are here...\n    scope.dispatchEvent(endEvent);\n  }\n\n  function onKeyDown(event) {\n    if (\n      scope.enabled === false ||\n      scope.enableKeys === false ||\n      scope.enablePan === false\n    )\n      return;\n\n    handleKeyDown(event);\n  }\n\n  function onTouchStart(event) {\n    if (scope.enabled === false) return;\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n\n        handleTouchStartRotate(event);\n\n        state = STATE.TOUCH_ROTATE;\n\n        break;\n\n      case 2: // two-fingered touch: dolly\n        if (scope.enableZoom === false) return;\n\n        handleTouchStartDolly(event);\n\n        state = STATE.TOUCH_DOLLY;\n\n        break;\n\n      case 3: // three-fingered touch: pan\n        if (scope.enablePan === false) return;\n\n        handleTouchStartPan(event);\n\n        state = STATE.TOUCH_PAN;\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n\n    if (state !== STATE.NONE) {\n      scope.dispatchEvent(startEvent);\n    }\n  }\n\n  function onTouchMove(event) {\n    if (scope.enabled === false) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n     // 添加回调\n    if (scope.onMouseMoveCallBack) {\n      scope.onMouseMoveCallBack()\n    }\n\n    switch (event.touches.length) {\n      case 1: // one-fingered touch: rotate\n        if (scope.enableRotate === false) return;\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\n\n        handleTouchMoveRotate(event);\n\n        break;\n\n      case 2: // two-fingered touch: dolly\n        if (scope.enableZoom === false) return;\n        if (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\n\n        handleTouchMoveDolly(event);\n\n        break;\n\n      case 3: // three-fingered touch: pan\n        if (scope.enablePan === false) return;\n        if (state !== STATE.TOUCH_PAN) return; // is this needed?...\n\n        handleTouchMovePan(event);\n\n        break;\n\n      default:\n        state = STATE.NONE;\n    }\n  }\n\n  function onTouchEnd(event) {\n    if (scope.enabled === false) return;\n\n    handleTouchEnd(event);\n\n    scope.dispatchEvent(endEvent);\n\n    state = STATE.NONE;\n  }\n\n  function onContextMenu(event) {\n    event.preventDefault();\n  }\n\n  function onClick(event) {\n    if (scope.onClickCallback) {\n      scope.onClickCallback(event);\n    }\n  }\n\n  scope.domElement.addEventListener(\"contextmenu\", onContextMenu, false);\n\n  scope.domElement.addEventListener(\"mousedown\", onMouseDown, false);\n  scope.domElement.addEventListener(\"wheel\", onMouseWheel, false);\n\n  scope.domElement.addEventListener(\"touchstart\", onTouchStart, false);\n  scope.domElement.addEventListener(\"touchend\", onTouchEnd, false);\n  scope.domElement.addEventListener(\"touchmove\", onTouchMove, false);\n\n  scope.domElement.addEventListener(\"click\", onClick, false);\n\n  let el = scope.domElement ;\n\n  // include('browser.touch.event.tap').install(el) ;\n\n  el.addEventListener('touch:tap' , onClick) ;\n\n  window.addEventListener(\"keydown\", onKeyDown, false);\n\n\n};\n\nTHREE.OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\nObject.defineProperties(THREE.OrbitControls.prototype, {\n  center: {\n    get: function() {\n      console.warn(\"THREE.OrbitControls: .center has been renamed to .target\");\n      return this.target;\n    }\n  },\n\n  // backward compatibility\n\n  noZoom: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\n      );\n      return !this.enableZoom;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.\"\n      );\n      this.enableZoom = !value;\n    }\n  },\n\n  noRotate: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\n      );\n      return !this.enableRotate;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.\"\n      );\n      this.enableRotate = !value;\n    }\n  },\n\n  noPan: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\n      );\n      return !this.enablePan;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.\"\n      );\n      this.enablePan = !value;\n    }\n  },\n\n  noKeys: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\n      );\n      return !this.enableKeys;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.\"\n      );\n      this.enableKeys = !value;\n    }\n  },\n\n  staticMoving: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\n      );\n      return !this.enableDamping;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.\"\n      );\n      this.enableDamping = !value;\n    }\n  },\n\n  dynamicDampingFactor: {\n    get: function() {\n      console.warn(\n        \"THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\n      );\n      return this.dampingFactor;\n    },\n\n    set: function(value) {\n      console.warn(\n        \"THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.\"\n      );\n      this.dampingFactor = value;\n    }\n  }\n});\n\nexport default THREE.OrbitControls;\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/FontreOrbitControls.js","/**\n * @author Mugen87 / https://github.com/Mugen87\n * @author mrdoob / http://mrdoob.com/\n */\nconst THREE = require('three')\n\nTHREE.Lensflare = function () {\n\n\tTHREE.Mesh.call( this, THREE.Lensflare.Geometry, new THREE.MeshBasicMaterial( { opacity: 0, transparent: true } ) );\n\n\tthis.type = 'Lensflare';\n\tthis.frustumCulled = false;\n\tthis.renderOrder = Infinity;\n\n\t//\n\n\tvar positionScreen = new THREE.Vector3();\n\n\t// textures\n\n\tvar tempMap = new THREE.DataTexture( new Uint8Array( 16 * 16 * 3 ), 16, 16, THREE.RGBFormat );\n\ttempMap.minFilter = THREE.NearestFilter;\n\ttempMap.magFilter = THREE.NearestFilter;\n\ttempMap.wrapS = THREE.ClampToEdgeWrapping;\n\ttempMap.wrapT = THREE.ClampToEdgeWrapping;\n\ttempMap.needsUpdate = true;\n\n\tvar occlusionMap = new THREE.DataTexture( new Uint8Array( 16 * 16 * 3 ), 16, 16, THREE.RGBFormat );\n\tocclusionMap.minFilter = THREE.NearestFilter;\n\tocclusionMap.magFilter = THREE.NearestFilter;\n\tocclusionMap.wrapS = THREE.ClampToEdgeWrapping;\n\tocclusionMap.wrapT = THREE.ClampToEdgeWrapping;\n\tocclusionMap.needsUpdate = true;\n\n\t// material\n\n\tvar geometry = THREE.Lensflare.Geometry;\n\n\tvar material1a = new THREE.RawShaderMaterial( {\n\t\tuniforms: {\n\t\t\t'scale': { value: null },\n\t\t\t'screenPosition': { value: null }\n\t\t},\n\t\tvertexShader: [\n\n\t\t\t'precision highp float;',\n\n\t\t\t'uniform vec3 screenPosition;',\n\t\t\t'uniform vec2 scale;',\n\n\t\t\t'attribute vec3 position;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ),\n\t\tfragmentShader: [\n\n\t\t\t'precision highp float;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ),\n\t\tdepthTest: true,\n\t\tdepthWrite: false,\n\t\ttransparent: false\n\t} );\n\n\tvar material1b = new THREE.RawShaderMaterial( {\n\t\tuniforms: {\n\t\t\t'map': { value: tempMap },\n\t\t\t'scale': { value: null },\n\t\t\t'screenPosition': { value: null }\n\t\t},\n\t\tvertexShader: [\n\n\t\t\t'precision highp float;',\n\n\t\t\t'uniform vec3 screenPosition;',\n\t\t\t'uniform vec2 scale;',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tvUV = uv;',\n\n\t\t\t'\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ),\n\t\tfragmentShader: [\n\n\t\t\t'precision highp float;',\n\n\t\t\t'uniform sampler2D map;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t'\tgl_FragColor = texture2D( map, vUV );',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ),\n\t\tdepthTest: false,\n\t\tdepthWrite: false,\n\t\ttransparent: false\n\t} );\n\n\t// the following object is used for occlusionMap generation\n\n\tvar mesh1 = new THREE.Mesh( geometry, material1a );\n\n\t//\n\n\tvar elements = [];\n\n\tvar shader = THREE.LensflareElement.Shader;\n\n\tvar material2 = new THREE.RawShaderMaterial( {\n\t\tuniforms: {\n\t\t\t'map': { value: null },\n\t\t\t'occlusionMap': { value: occlusionMap },\n\t\t\t'color': { value: new THREE.Color( 0xffffff ) },\n\t\t\t'scale': { value: new THREE.Vector2() },\n\t\t\t'screenPosition': { value: new THREE.Vector3() }\n\t\t},\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader,\n\t\tblending: THREE.AdditiveBlending,\n\t\ttransparent: true,\n\t\tdepthWrite: false\n\t} );\n\n\tvar mesh2 = new THREE.Mesh( geometry, material2 );\n\n\tthis.addElement = function ( element ) {\n\n\t\telements.push( element );\n\n\t};\n\n\t//\n\n\tvar scale = new THREE.Vector2();\n\tvar screenPositionPixels = new THREE.Vector2();\n\tvar validArea = new THREE.Box2();\n\tvar viewport = new THREE.Vector4();\n\n\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\tviewport.copy( renderer.getCurrentViewport() );\n\n\t\tvar invAspect = viewport.w / viewport.z;\n\t\tvar halfViewportWidth = viewport.z / 2.0;\n\t\tvar halfViewportHeight = viewport.w / 2.0;\n\n\t\tvar size = 16 / viewport.w;\n\t\tscale.set( size * invAspect, size );\n\n\t\tvalidArea.min.set( viewport.x, viewport.y );\n\t\tvalidArea.max.set( viewport.x + ( viewport.z - 16 ), viewport.y + ( viewport.w - 16 ) );\n\n\t\t// calculate position in screen space\n\n\t\tpositionScreen.setFromMatrixPosition( this.matrixWorld );\n\n\t\tpositionScreen.applyMatrix4( camera.matrixWorldInverse );\n\t\tpositionScreen.applyMatrix4( camera.projectionMatrix );\n\n\t\t// horizontal and vertical coordinate of the lower left corner of the pixels to copy\n\n\t\tscreenPositionPixels.x = viewport.x + ( positionScreen.x * halfViewportWidth ) + halfViewportWidth - 8;\n\t\tscreenPositionPixels.y = viewport.y + ( positionScreen.y * halfViewportHeight ) + halfViewportHeight - 8;\n\n\t\t// screen cull\n\n\t\tif ( validArea.containsPoint( screenPositionPixels ) ) {\n\n\t\t\t// save current RGB to temp texture\n\n\t\t\trenderer.copyFramebufferToTexture( screenPositionPixels, tempMap );\n\n\t\t\t// render pink quad\n\n\t\t\tvar uniforms = material1a.uniforms;\n\t\t\tuniforms.scale.value = scale;\n\t\t\tuniforms.screenPosition.value = positionScreen;\n\n\t\t\trenderer.renderBufferDirect( camera, null, geometry, material1a, mesh1, null );\n\n\t\t\t// copy result to occlusionMap\n\n\t\t\trenderer.copyFramebufferToTexture( screenPositionPixels, occlusionMap );\n\n\t\t\t// restore graphics\n\n\t\t\tvar uniforms = material1b.uniforms;\n\t\t\tuniforms.scale.value = scale;\n\t\t\tuniforms.screenPosition.value = positionScreen;\n\n\t\t\trenderer.renderBufferDirect( camera, null, geometry, material1b, mesh1, null );\n\n\t\t\t// render elements\n\n\t\t\tvar vecX = - positionScreen.x * 2;\n\t\t\tvar vecY = - positionScreen.y * 2;\n\n\t\t\tfor ( var i = 0, l = elements.length; i < l; i ++ ) {\n\n\t\t\t\tvar element = elements[ i ];\n\n\t\t\t\tvar uniforms = material2.uniforms;\n\n\t\t\t\tuniforms.color.value.copy( element.color );\n\t\t\t\tuniforms.map.value = element.texture;\n\t\t\t\tuniforms.screenPosition.value.x = positionScreen.x + vecX * element.distance;\n\t\t\t\tuniforms.screenPosition.value.y = positionScreen.y + vecY * element.distance;\n\n\t\t\t\tvar size = element.size / viewport.w;\n\t\t\t\tvar invAspect = viewport.w / viewport.z;\n\n\t\t\t\tuniforms.scale.value.set( size * invAspect, size );\n\n\t\t\t\tmaterial2.uniformsNeedUpdate = true;\n\n\t\t\t\trenderer.renderBufferDirect( camera, null, geometry, material2, mesh2, null );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tmaterial1a.dispose();\n\t\tmaterial1b.dispose();\n\t\tmaterial2.dispose();\n\n\t\ttempMap.dispose();\n\t\tocclusionMap.dispose();\n\n\t\tfor ( var i = 0, l = elements.length; i < l; i ++ ) {\n\n\t\t\telements[ i ].texture.dispose();\n\n\t\t}\n\n\t};\n\n};\n\nTHREE.Lensflare.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.Lensflare.prototype.constructor = THREE.Lensflare;\nTHREE.Lensflare.prototype.isLensflare = true;\n\n//\n\nTHREE.LensflareElement = function ( texture, size, distance, color ) {\n\n\tthis.texture = texture;\n\tthis.size = size || 1;\n\tthis.distance = distance || 0;\n\tthis.color = color || new THREE.Color( 0xffffff );\n\n};\n\nTHREE.LensflareElement.Shader = {\n\n\tuniforms: {\n\n\t\t'map': { value: null },\n\t\t'occlusionMap': { value: null },\n\t\t'color': { value: null },\n\t\t'scale': { value: null },\n\t\t'screenPosition': { value: null }\n\n\t},\n\n\tvertexShader: [\n\n\t\t'precision highp float;',\n\n\t\t'uniform vec3 screenPosition;',\n\t\t'uniform vec2 scale;',\n\n\t\t'uniform sampler2D occlusionMap;',\n\n\t\t'attribute vec3 position;',\n\t\t'attribute vec2 uv;',\n\n\t\t'varying vec2 vUV;',\n\t\t'varying float vVisibility;',\n\n\t\t'void main() {',\n\n\t\t'\tvUV = uv;',\n\n\t\t'\tvec2 pos = position.xy;',\n\n\t\t'\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );',\n\t\t'\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );',\n\t\t'\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );',\n\t\t'\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );',\n\t\t'\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );',\n\t\t'\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );',\n\t\t'\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );',\n\t\t'\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );',\n\t\t'\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );',\n\n\t\t'\tvVisibility =        visibility.r / 9.0;',\n\t\t'\tvVisibility *= 1.0 - visibility.g / 9.0;',\n\t\t'\tvVisibility *=       visibility.b / 9.0;',\n\n\t\t'\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );',\n\n\t\t'}'\n\n\t].join( '\\n' ),\n\n\tfragmentShader: [\n\n\t\t'precision highp float;',\n\n\t\t'uniform sampler2D map;',\n\t\t'uniform vec3 color;',\n\n\t\t'varying vec2 vUV;',\n\t\t'varying float vVisibility;',\n\n\t\t'void main() {',\n\n\t\t'\tvec4 texture = texture2D( map, vUV );',\n\t\t'\ttexture.a *= vVisibility;',\n\t\t'\tgl_FragColor = texture;',\n\t\t'\tgl_FragColor.rgb *= color;',\n\n\t\t'}'\n\n\t].join( '\\n' )\n\n};\n\nTHREE.Lensflare.Geometry = ( function () {\n\n\tvar geometry = new THREE.BufferGeometry();\n\n\tvar float32Array = new Float32Array( [\n\t\t- 1, - 1, 0, 0, 0,\n\t\t1, - 1, 0, 1, 0,\n\t\t1, 1, 0, 1, 1,\n\t\t- 1, 1, 0, 0, 1\n\t] );\n\n\tvar interleavedBuffer = new THREE.InterleavedBuffer( float32Array, 5 );\n\n\tgeometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\tgeometry.addAttribute( 'position', new THREE.InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\tgeometry.addAttribute( 'uv', new THREE.InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\treturn geometry;\n\n} )();\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/Lensflare.js","/**\n * @author alteredq / http://alteredqualia.com/\n */\nconst THREE = require('three')\n\nTHREE.EffectComposer = function ( renderer, renderTarget ) {\n\n\tthis.renderer = renderer;\n\n\tif ( renderTarget === undefined ) {\n\n\t\tvar parameters = {\n\t\t\tminFilter: THREE.LinearFilter,\n\t\t\tmagFilter: THREE.LinearFilter,\n\t\t\tformat: THREE.RGBAFormat,\n\t\t\tstencilBuffer: false\n\t\t};\n\n\t\tvar size = renderer.getDrawingBufferSize();\n\t\trenderTarget = new THREE.WebGLRenderTarget( size.width, size.height, parameters );\n\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t}\n\n\tthis.renderTarget1 = renderTarget;\n\tthis.renderTarget2 = renderTarget.clone();\n\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\tthis.writeBuffer = this.renderTarget1;\n\tthis.readBuffer = this.renderTarget2;\n\n\tthis.passes = [];\n\n\t// dependencies\n\n\tif ( THREE.CopyShader === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on THREE.CopyShader' );\n\n\t}\n\n\tif ( THREE.ShaderPass === undefined ) {\n\n\t\tconsole.error( 'THREE.EffectComposer relies on THREE.ShaderPass' );\n\n\t}\n\n\tthis.copyPass = new THREE.ShaderPass( THREE.CopyShader );\n\n};\n\nObject.assign( THREE.EffectComposer.prototype, {\n\n\tswapBuffers: function () {\n\n\t\tvar tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t},\n\n\taddPass: function ( pass ) {\n\n\t\tthis.passes.push( pass );\n\n\t\tvar size = this.renderer.getDrawingBufferSize();\n\t\tpass.setSize( size.width, size.height );\n\n\t},\n\n\tinsertPass: function ( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\n\t},\n\n\trender: function ( delta ) {\n\n\t\tvar maskActive = false;\n\n\t\tvar pass, i, il = this.passes.length;\n\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tpass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, delta, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tvar context = this.renderer.context;\n\n\t\t\t\t\tcontext.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, delta );\n\n\t\t\t\t\tcontext.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( THREE.MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof THREE.MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof THREE.ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\treset: function ( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tvar size = this.renderer.getDrawingBufferSize();\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( size.width, size.height );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis.renderTarget1.setSize( width, height );\n\t\tthis.renderTarget2.setSize( width, height );\n\n\t\tfor ( var i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( width, height );\n\n\t\t}\n\n\t}\n\n} );\n\n\nTHREE.Pass = function () {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen\n\tthis.renderToScreen = false;\n\n};\n\nObject.assign( THREE.Pass.prototype, {\n\n\tsetSize: function ( width, height ) {},\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/postprocessing/EffectComposer.js","/**\n*\n* Supersample Anti-Aliasing Render Pass\n*\n* @author bhouston / http://clara.io/\n*\n* This manual approach to SSAA re-renders the scene ones for each sample with camera jitter and accumulates the results.\n*\n* References: https://en.wikipedia.org/wiki/Supersampling\n*\n*/\nconst THREE = require('three')\n\nTHREE.SSAARenderPass = function ( scene, camera, clearColor, clearAlpha ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.sampleLevel = 4; // specified as n, where the number of samples is 2^n, so sampleLevel = 4, is 2^4 samples, 16.\n\tthis.unbiased = true;\n\n\t// as we need to clear the buffer in this pass, clearColor must be set to something, defaults to black.\n\tthis.clearColor = ( clearColor !== undefined ) ? clearColor : 0x000000;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\tif ( THREE.CopyShader === undefined ) console.error( \"THREE.SSAARenderPass relies on THREE.CopyShader\" );\n\n\tvar copyShader = THREE.CopyShader;\n\tthis.copyUniforms = THREE.UniformsUtils.clone( copyShader.uniforms );\n\n\tthis.copyMaterial = new THREE.ShaderMaterial(\t{\n\t\tuniforms: this.copyUniforms,\n\t\tvertexShader: copyShader.vertexShader,\n\t\tfragmentShader: copyShader.fragmentShader,\n\t\tpremultipliedAlpha: true,\n\t\ttransparent: true,\n\t\tblending: THREE.AdditiveBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\t} );\n\n\tthis.camera2 = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tthis.scene2\t= new THREE.Scene();\n\tthis.quad2 = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), this.copyMaterial );\n\tthis.quad2.frustumCulled = false; // Avoid getting clipped\n\tthis.scene2.add( this.quad2 );\n\n};\n\nTHREE.SSAARenderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.SSAARenderPass,\n\n\tdispose: function () {\n\n\t\tif ( this.sampleRenderTarget ) {\n\n\t\t\tthis.sampleRenderTarget.dispose();\n\t\t\tthis.sampleRenderTarget = null;\n\n\t\t}\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.sampleRenderTarget )\tthis.sampleRenderTarget.setSize( width, height );\n\n\t},\n\n\trender: function ( renderer, writeBuffer, readBuffer ) {\n\n\t\tif ( ! this.sampleRenderTarget ) {\n\n\t\t\tthis.sampleRenderTarget = new THREE.WebGLRenderTarget( readBuffer.width, readBuffer.height, { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\t\t\tthis.sampleRenderTarget.texture.name = \"SSAARenderPass.sample\";\n\n\t\t}\n\n\t\tvar jitterOffsets = THREE.SSAARenderPass.JitterVectors[ Math.max( 0, Math.min( this.sampleLevel, 5 ) ) ];\n\n\t\tvar autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tvar oldClearColor = renderer.getClearColor().getHex();\n\t\tvar oldClearAlpha = renderer.getClearAlpha();\n\n\t\tvar baseSampleWeight = 1.0 / jitterOffsets.length;\n\t\tvar roundingRange = 1 / 32;\n\t\tthis.copyUniforms[ \"tDiffuse\" ].value = this.sampleRenderTarget.texture;\n\n\t\tvar width = readBuffer.width, height = readBuffer.height;\n\n\t\t// render the scene multiple times, each slightly jitter offset from the last and accumulate the results.\n\t\tfor ( var i = 0; i < jitterOffsets.length; i ++ ) {\n\n\t\t\tvar jitterOffset = jitterOffsets[ i ];\n\n\t\t\tif ( this.camera.setViewOffset ) {\n\n\t\t\t\tthis.camera.setViewOffset( width, height,\n\t\t\t\t\tjitterOffset[ 0 ] * 0.0625, jitterOffset[ 1 ] * 0.0625,   // 0.0625 = 1 / 16\n\t\t\t\t\twidth, height );\n\n\t\t\t}\n\n\t\t\tvar sampleWeight = baseSampleWeight;\n\n\t\t\tif ( this.unbiased ) {\n\n\t\t\t\t// the theory is that equal weights for each sample lead to an accumulation of rounding errors.\n\t\t\t\t// The following equation varies the sampleWeight per sample so that it is uniformly distributed\n\t\t\t\t// across a range of values whose rounding errors cancel each other out.\n\n\t\t\t\tvar uniformCenteredDistribution = ( - 0.5 + ( i + 0.5 ) / jitterOffsets.length );\n\t\t\t\tsampleWeight += roundingRange * uniformCenteredDistribution;\n\n\t\t\t}\n\n\t\t\tthis.copyUniforms[ \"opacity\" ].value = sampleWeight;\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\t\t\trenderer.render( this.scene, this.camera, this.sampleRenderTarget, true );\n\n\t\t\tif ( i === 0 ) {\n\n\t\t\t\trenderer.setClearColor( 0x000000, 0.0 );\n\n\t\t\t}\n\n\t\t\trenderer.render( this.scene2, this.camera2, this.renderToScreen ? null : writeBuffer, ( i === 0 ) );\n\n\t\t}\n\n\t\tif ( this.camera.clearViewOffset ) this.camera.clearViewOffset();\n\n\t\trenderer.autoClear = autoClear;\n\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t}\n\n} );\n\n\n// These jitter vectors are specified in integers because it is easier.\n// I am assuming a [-8,8) integer grid, but it needs to be mapped onto [-0.5,0.5)\n// before being used, thus these integers need to be scaled by 1/16.\n//\n// Sample patterns reference: https://msdn.microsoft.com/en-us/library/windows/desktop/ff476218%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396\nTHREE.SSAARenderPass.JitterVectors = [\n\t[\n\t\t[ 0, 0 ]\n\t],\n\t[\n\t\t[ 4, 4 ], [ - 4, - 4 ]\n\t],\n\t[\n\t\t[ - 2, - 6 ], [ 6, - 2 ], [ - 6, 2 ], [ 2, 6 ]\n\t],\n\t[\n\t\t[ 1, - 3 ], [ - 1, 3 ], [ 5, 1 ], [ - 3, - 5 ],\n\t\t[ - 5, 5 ], [ - 7, - 1 ], [ 3, 7 ], [ 7, - 7 ]\n\t],\n\t[\n\t\t[ 1, 1 ], [ - 1, - 3 ], [ - 3, 2 ], [ 4, - 1 ],\n\t\t[ - 5, - 2 ], [ 2, 5 ], [ 5, 3 ], [ 3, - 5 ],\n\t\t[ - 2, 6 ], [ 0, - 7 ], [ - 4, - 6 ], [ - 6, 4 ],\n\t\t[ - 8, 0 ], [ 7, - 4 ], [ 6, 7 ], [ - 7, - 8 ]\n\t],\n\t[\n\t\t[ - 4, - 7 ], [ - 7, - 5 ], [ - 3, - 5 ], [ - 5, - 4 ],\n\t\t[ - 1, - 4 ], [ - 2, - 2 ], [ - 6, - 1 ], [ - 4, 0 ],\n\t\t[ - 7, 1 ], [ - 1, 2 ], [ - 6, 3 ], [ - 3, 3 ],\n\t\t[ - 7, 6 ], [ - 3, 6 ], [ - 5, 7 ], [ - 1, 7 ],\n\t\t[ 5, - 7 ], [ 1, - 6 ], [ 6, - 5 ], [ 4, - 4 ],\n\t\t[ 2, - 3 ], [ 7, - 2 ], [ 1, - 1 ], [ 4, - 1 ],\n\t\t[ 2, 1 ], [ 6, 2 ], [ 0, 4 ], [ 4, 4 ],\n\t\t[ 2, 5 ], [ 7, 5 ], [ 5, 6 ], [ 3, 7 ]\n\t]\n];\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/postprocessing/SSAARenderPass.js","/**\n *\n * Temporal Anti-Aliasing Render Pass\n *\n * @author bhouston / http://clara.io/\n *\n * When there is no motion in the scene, the TAA render pass accumulates jittered camera samples across frames to create a high quality anti-aliased result.\n *\n * References:\n *\n * TODO: Add support for motion vector pas so that accumulation of samples across frames can occur on dynamics scenes.\n *\n */\n\nconst THREE = require('three')\n\n\nTHREE.TAARenderPass = function ( scene, camera, params ) {\n\n\tif ( THREE.SSAARenderPass === undefined ) {\n\n\t\tconsole.error( \"THREE.TAARenderPass relies on THREE.SSAARenderPass\" );\n\n\t}\n\n\tTHREE.SSAARenderPass.call( this, scene, camera, params );\n\n\tthis.sampleLevel = 0;\n\tthis.accumulate = false;\n\n};\n\nTHREE.TAARenderPass.JitterVectors = THREE.SSAARenderPass.JitterVectors;\n\nTHREE.TAARenderPass.prototype = Object.assign( Object.create( THREE.SSAARenderPass.prototype ), {\n\n\tconstructor: THREE.TAARenderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta ) {\n\n\t\tif ( ! this.accumulate ) {\n\n\t\t\tTHREE.SSAARenderPass.prototype.render.call( this, renderer, writeBuffer, readBuffer, delta );\n\n\t\t\tthis.accumulateIndex = - 1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar jitterOffsets = THREE.TAARenderPass.JitterVectors[ 5 ];\n\n\t\tif ( ! this.sampleRenderTarget ) {\n\n\t\t\tthis.sampleRenderTarget = new THREE.WebGLRenderTarget( readBuffer.width, readBuffer.height, this.params );\n\t\t\tthis.sampleRenderTarget.texture.name = \"TAARenderPass.sample\";\n\n\t\t}\n\n\t\tif ( ! this.holdRenderTarget ) {\n\n\t\t\tthis.holdRenderTarget = new THREE.WebGLRenderTarget( readBuffer.width, readBuffer.height, this.params );\n\t\t\tthis.holdRenderTarget.texture.name = \"TAARenderPass.hold\";\n\n\t\t}\n\n\t\tif ( this.accumulate && this.accumulateIndex === - 1 ) {\n\n\t\t\tTHREE.SSAARenderPass.prototype.render.call( this, renderer, this.holdRenderTarget, readBuffer, delta );\n\n\t\t\tthis.accumulateIndex = 0;\n\n\t\t}\n\n\t\tvar autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tvar sampleWeight = 1.0 / ( jitterOffsets.length );\n\n\t\tif ( this.accumulateIndex >= 0 && this.accumulateIndex < jitterOffsets.length ) {\n\n\t\t\tthis.copyUniforms[ \"opacity\" ].value = sampleWeight;\n\t\t\tthis.copyUniforms[ \"tDiffuse\" ].value = writeBuffer.texture;\n\n\t\t\t// render the scene multiple times, each slightly jitter offset from the last and accumulate the results.\n\t\t\tvar numSamplesPerFrame = Math.pow( 2, this.sampleLevel );\n\t\t\tfor ( var i = 0; i < numSamplesPerFrame; i ++ ) {\n\n\t\t\t\tvar j = this.accumulateIndex;\n\t\t\t\tvar jitterOffset = jitterOffsets[ j ];\n\n\t\t\t\tif ( this.camera.setViewOffset ) {\n\n\t\t\t\t\tthis.camera.setViewOffset( readBuffer.width, readBuffer.height,\n\t\t\t\t\t\tjitterOffset[ 0 ] * 0.0625, jitterOffset[ 1 ] * 0.0625,   // 0.0625 = 1 / 16\n\t\t\t\t\t\treadBuffer.width, readBuffer.height );\n\n\t\t\t\t}\n\n\t\t\t\trenderer.render( this.scene, this.camera, writeBuffer, true );\n\t\t\t\trenderer.render( this.scene2, this.camera2, this.sampleRenderTarget, ( this.accumulateIndex === 0 ) );\n\n\t\t\t\tthis.accumulateIndex ++;\n\n\t\t\t\tif ( this.accumulateIndex >= jitterOffsets.length ) break;\n\n\t\t\t}\n\n\t\t\tif ( this.camera.clearViewOffset ) this.camera.clearViewOffset();\n\n\t\t}\n\n\t\tvar accumulationWeight = this.accumulateIndex * sampleWeight;\n\n\t\tif ( accumulationWeight > 0 ) {\n\n\t\t\tthis.copyUniforms[ \"opacity\" ].value = 1.0;\n\t\t\tthis.copyUniforms[ \"tDiffuse\" ].value = this.sampleRenderTarget.texture;\n\t\t\trenderer.render( this.scene2, this.camera2, writeBuffer, true );\n\n\t\t}\n\n\t\tif ( accumulationWeight < 1.0 ) {\n\n\t\t\tthis.copyUniforms[ \"opacity\" ].value = 1.0 - accumulationWeight;\n\t\t\tthis.copyUniforms[ \"tDiffuse\" ].value = this.holdRenderTarget.texture;\n\t\t\trenderer.render( this.scene2, this.camera2, writeBuffer, ( accumulationWeight === 0 ) );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n} );\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/postprocessing/TAARenderPass.js","\n/**\n * @author alteredq / http://alteredqualia.com/\n */\nconst THREE = require('three')\n\nTHREE.RenderPass = function ( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.overrideMaterial = overrideMaterial;\n\n\tthis.clearColor = clearColor;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\tthis.clear = true;\n\tthis.clearDepth = false;\n\tthis.needsSwap = false;\n\n};\n\nTHREE.RenderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.RenderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\tvar oldClearColor, oldClearAlpha;\n\n\t\tif ( this.clearColor ) {\n\n\t\t\toldClearColor = renderer.getClearColor().getHex();\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.render( this.scene, this.camera, this.renderToScreen ? null : readBuffer, this.clear );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tthis.scene.overrideMaterial = null;\n\t\trenderer.autoClear = oldAutoClear;\n\t}\n\n} );\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/postprocessing/RenderPass.js","/**\n * @author alteredq / http://alteredqualia.com/\n */\nconst THREE = require('three')\n\nTHREE.MaskPass = function ( scene, camera ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.clear = true;\n\tthis.needsSwap = false;\n\n\tthis.inverse = false;\n\n};\n\nTHREE.MaskPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.MaskPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar context = renderer.context;\n\t\tvar state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tvar writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.render( this.scene, this.camera, readBuffer, this.clear );\n\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\n\n\t\t// unlock color and depth buffer for subsequent rendering\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff );  // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\n\t}\n\n} );\n\n\nTHREE.ClearMaskPass = function () {\n\n\tTHREE.Pass.call( this );\n\n\tthis.needsSwap = false;\n\n};\n\nTHREE.ClearMaskPass.prototype = Object.create( THREE.Pass.prototype );\n\nObject.assign( THREE.ClearMaskPass.prototype, {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n} );\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/postprocessing/MaskPass.js","\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nconst THREE = require('three')\n\nTHREE.ShaderPass = function ( shader, textureID ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.textureID = ( textureID !== undefined ) ? textureID : \"tDiffuse\";\n\n\tif ( shader instanceof THREE.ShaderMaterial ) {\n\n\t\tthis.uniforms = shader.uniforms;\n\n\t\tthis.material = shader;\n\n\t} else if ( shader ) {\n\n\t\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\t\tthis.material = new THREE.ShaderMaterial( {\n\n\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t} );\n\n\t}\n\n\tthis.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tthis.scene = new THREE.Scene();\n\n\tthis.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );\n\tthis.quad.frustumCulled = false; // Avoid getting clipped\n\tthis.scene.add( this.quad );\n\n};\n\nTHREE.ShaderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.ShaderPass,\n\n\trender: function( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.quad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.render( this.scene, this.camera );\n\n\t\t} else {\n\n\t\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\n\n\t\t}\n\n\t}\n\n} );\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/postprocessing/ShaderPass.js","\nimport './libs/FontreLoader'\nimport './libs/DRACOLoader'\nimport './libs/FontreOrbitControls'\nimport './libs/Lensflare'\n\nimport './libs/CopyShader'\nimport './libs/postprocessing/EffectComposer'\nimport './libs/postprocessing/SSAARenderPass'\nimport './libs/postprocessing/TAARenderPass'\nimport './libs/postprocessing/RenderPass'\nimport './libs/postprocessing/MaskPass'\nimport './libs/postprocessing/ShaderPass'\n\nimport State from '../state/state'\nimport Detector from './Detector.js'\n\n\nconst THREE = require('three')\n\nTHREE.DRACOLoader.setDecoderPath( window.FONTRE_PATH + '/js/libs/' );\nTHREE.DRACOLoader.setDecoderConfig( { type: 'js' } );\n\n// fps 调试\nlet FPS\nif ( State.debug ) {\n  const Staus = require('./libs/Stats')\n  FPS = new Staus()\n  FPS.showPanel(0)\n  document.body.appendChild(FPS.dom)\n}\n\n\n// THREE \nconst Scene = new THREE.Scene()\n\nScene.background = new THREE.Color('#000')\n// Scene.fog = new THREE.FogExp2(0xF8F8FF, 0.0008)\nScene.fog = new THREE.Fog('#B2B2B2', 400, 1500)\n\n\nconst Camera = new THREE.PerspectiveCamera()\n\n// const Renderer = new THREE.WebGLRenderer({\n//   antialias: true, // antialias:true/false是否开启反锯齿\n//   precision: \"highp\", // precision:highp/mediump/lowp着色精度选择\n//   alpha: true, // alpha:true/false是否可以设置背景色透明\n//   powerPreference:'low-power', // 设置低功耗性能  high-performance/low-power\n//   preserveDrawingBuffer: false, //do not set true\n// })\n\nlet rderer = new THREE.CanvasRenderer();\nif (Detector.webgl) {\n  rderer = new THREE.WebGLRenderer({\n     antialias: true, // antialias:true/false是否开启反锯齿\n     precision: \"highp\", // precision:highp/mediump/lowp着色精度选择\n      alpha: true, // alpha:true/false是否可以设置背景色透明\n      powerPreference:'low-power', // 设置低功耗性能  high-performance/low-power\n      preserveDrawingBuffer: false, //do not set true\n    })\n}\nconst Renderer = rderer\n// const Renderer = new THREE.WebGLRenderer({\n//   antialias: true, // antialias:true/false是否开启反锯齿\n//   precision: \"mediump\", // precision:highp/mediump/lowp着色精度选择\n//   alpha: true, // alpha:true/false是否可以设置背景色透明\n//   powerPreference:'low-power', // 设置低功耗性能  high-performance/low-power\n//   preserveDrawingBuffer: false, //do not set true\n// })\n\n\nconst Orbit = new THREE.OrbitControls(Camera, Renderer.domElement, {\n  minDistance: 500, \n  maxDistance: 900,  //400\n  customDistance: 550,\n  minPolarAngle: Math.PI / 4,\n  maxPolarAngle: Math.PI / 2\n})\n\n\nconst Color = new THREE.Color()\nconst Mouse = new THREE.Vector2()\nconst Matrix4 = new THREE.Matrix4()\nconst Raycaster = new THREE.Raycaster()\nconst Sprite = new THREE.Sprite()\n\nconst Fileloader = new THREE.FileLoader()\nconst FontreLoader = new THREE.FONTRELoader()\nconst dracoLoader = new THREE.DRACOLoader();\n\nconst TextureLoader = new THREE.TextureLoader()\nconst CubeLoader = new THREE.CubeTextureLoader()\n\nconst Clock = new THREE.Clock();\n\nTextureLoader.setCrossOrigin('anonymous')\nCubeLoader.setCrossOrigin('anonymous')\n\n// ---------------- 调试测试代码 ---------------\n\n// var helper = new THREE.CameraHelper( Camera );\n// Scene.add( helper );\n// THREE.Cache.enabled = true  // 缓存开启\n\nexport { Scene, Camera, Sprite, Orbit, Mouse, Matrix4, Raycaster, Renderer, Fileloader, FontreLoader, TextureLoader, CubeLoader, Color, FPS, dracoLoader, AnimateObjs, Helper, Clock}\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Three.Constant.js","import { Scene, Camera, Renderer } from './Three.Constant.js'\nconst THREE = require('three')\n\n\nconst Postprocessing = {\n\n  'null': () => {},\n\n  'taa': () => {\n\n    const Composer = new THREE.EffectComposer(Renderer)\n\n    const LEVEL = 2\n    const taaRenderPass = new THREE.TAARenderPass( Scene, Camera )\n\n    taaRenderPass.unbiased = false;\n    taaRenderPass.sampleLevel = LEVEL\n    Composer.addPass( taaRenderPass );\n\n    const renderPass = new THREE.RenderPass( Scene, Camera );\n    renderPass.enabled = false;\n    Composer.addPass( renderPass );\n\n    const copyPass = new THREE.ShaderPass( THREE.CopyShader );\n    copyPass.renderToScreen = true;\n    Composer.addPass( copyPass )\n\n    return Composer\n  }\n\n}\n\n\n\nexport default Postprocessing \n\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Postprocessing.js","/**\r\n * @author Rich Tibbett / https://github.com/richtr\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Tony Parisi / http://www.tonyparisi.com/\r\n * @author Takahiro / https://github.com/takahirox\r\n * @author Don McCurdy / https://www.donmccurdy.com\r\n */\r\nconst THREE = require('three')\r\n\r\nTHREE.GLTFLoader = ( function () {\r\n\r\n\tfunction GLTFLoader( manager ) {\r\n\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\tthis.dracoLoader = null;\r\n\r\n\t}\r\n\r\n\tGLTFLoader.prototype = {\r\n\r\n\t\tconstructor: GLTFLoader,\r\n\r\n\t\tcrossOrigin: 'anonymous',\r\n\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tvar path = this.path !== undefined ? this.path : THREE.LoaderUtils.extractUrlBase( url );\r\n\r\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\r\n\t\t\t// the model is fully loaded. This means the count of items loaded will\r\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tvar _onError = function ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar loader = new THREE.FileLoader( scope.manager );\r\n\r\n\t\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\t\tloader.load( url, function ( data ) {\r\n\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\tscope.parse( data, path, function ( gltf ) {\r\n\r\n\t\t\t\t\t\tonLoad( gltf );\r\n\r\n\t\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t\t}, _onError );\r\n\r\n\t\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\t\t_onError( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, _onError );\r\n\r\n\t\t},\r\n\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\t\tthis.crossOrigin = value;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetPath: function ( value ) {\r\n\r\n\t\t\tthis.path = value;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tsetDRACOLoader: function ( dracoLoader ) {\r\n\r\n\t\t\tthis.dracoLoader = dracoLoader;\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t\tparse: function ( data, path, onLoad, onError ) {\r\n\r\n\t\t\tvar content;\r\n\t\t\tvar extensions = {};\r\n\r\n\t\t\tif ( typeof data === 'string' ) {\r\n\r\n\t\t\t\tcontent = data;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar magic = THREE.LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\r\n\r\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\t\t\ttry {\r\n\r\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\r\n\r\n\t\t\t\t\t} catch ( error ) {\r\n\r\n\t\t\t\t\t\tif ( onError ) onError( error );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcontent = THREE.LoaderUtils.decodeText( new Uint8Array( data ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar json = JSON.parse( content );\r\n\r\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\r\n\r\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead.' ) );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.extensionsUsed ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\r\n\r\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\r\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\r\n\r\n\t\t\t\t\tswitch ( extensionName ) {\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFLightsExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension( json );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\r\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\r\n\t\t\t\t\t\t\textensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] = new GLTFTextureDDSExtension();\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 ) {\r\n\r\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar parser = new GLTFParser( json, extensions, {\r\n\r\n\t\t\t\tpath: path || this.path || '',\r\n\t\t\t\tcrossOrigin: this.crossOrigin,\r\n\t\t\t\tmanager: this.manager\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tparser.parse( function ( scene, scenes, cameras, animations, json ) {\r\n\r\n\t\t\t\tvar glTF = {\r\n\t\t\t\t\tscene: scene,\r\n\t\t\t\t\tscenes: scenes,\r\n\t\t\t\t\tcameras: cameras,\r\n\t\t\t\t\tanimations: animations,\r\n\t\t\t\t\tasset: json.asset,\r\n\t\t\t\t\tparser: parser,\r\n\t\t\t\t\tuserData: {}\r\n\t\t\t\t};\r\n\r\n\t\t\t\taddUnknownExtensionsToUserData( extensions, glTF, json );\r\n\r\n\t\t\t\tonLoad( glTF );\r\n\r\n\t\t\t}, onError );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t/* GLTFREGISTRY */\r\n\r\n\tfunction GLTFRegistry() {\r\n\r\n\t\tvar objects = {};\r\n\r\n\t\treturn\t{\r\n\r\n\t\t\tget: function ( key ) {\r\n\r\n\t\t\t\treturn objects[ key ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tadd: function ( key, object ) {\r\n\r\n\t\t\t\tobjects[ key ] = object;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tremove: function ( key ) {\r\n\r\n\t\t\t\tdelete objects[ key ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tremoveAll: function () {\r\n\r\n\t\t\t\tobjects = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*********************************/\r\n\t/********** EXTENSIONS ***********/\r\n\t/*********************************/\r\n\r\n\tvar EXTENSIONS = {\r\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\r\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\r\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\r\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\r\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\r\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\r\n\t};\r\n\r\n\t/**\r\n\t * DDS Texture Extension\r\n\t *\r\n\t * Specification:\r\n\t * https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\r\n\t *\r\n\t */\r\n\tfunction GLTFTextureDDSExtension() {\r\n\r\n\t\tif ( ! THREE.DDSLoader ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\r\n\t\tthis.ddsLoader = new THREE.DDSLoader();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Lights Extension\r\n\t *\r\n\t * Specification: PENDING\r\n\t */\r\n\tfunction GLTFLightsExtension( json ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\r\n\r\n\t\tthis.lights = [];\r\n\r\n\t\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ] ) || {};\r\n\t\tvar lightDefs = extension.lights || [];\r\n\r\n\t\tfor ( var i = 0; i < lightDefs.length; i ++ ) {\r\n\r\n\t\t\tvar lightDef = lightDefs[ i ];\r\n\t\t\tvar lightNode;\r\n\r\n\t\t\tvar color = new THREE.Color( 0xffffff );\r\n\t\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\r\n\r\n\t\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\r\n\r\n\t\t\tswitch ( lightDef.type ) {\r\n\r\n\t\t\t\tcase 'directional':\r\n\t\t\t\t\tlightNode = new THREE.DirectionalLight( color );\r\n\t\t\t\t\tlightNode.target.position.set( 0, 0, 1 );\r\n\t\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'point':\r\n\t\t\t\t\tlightNode = new THREE.PointLight( color );\r\n\t\t\t\t\tlightNode.distance = range;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'spot':\r\n\t\t\t\t\tlightNode = new THREE.SpotLight( color );\r\n\t\t\t\t\tlightNode.distance = range;\r\n\t\t\t\t\t// Handle spotlight properties.\r\n\t\t\t\t\tlightDef.spot = lightDef.spot || {};\r\n\t\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\r\n\t\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\r\n\t\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\r\n\t\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\r\n\t\t\t\t\tlightNode.target.position.set( 0, 0, 1 );\r\n\t\t\t\t\tlightNode.add( lightNode.target );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlightNode.decay = 2;\r\n\r\n\t\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\r\n\r\n\t\t\tlightNode.name = lightDef.name || ( 'light_' + i );\r\n\r\n\t\t\tthis.lights.push( lightNode );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Unlit Materials Extension (pending)\r\n\t *\r\n\t * PR: https://github.com/KhronosGroup/glTF/pull/1163\r\n\t */\r\n\tfunction GLTFMaterialsUnlitExtension( json ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\r\n\r\n\t}\r\n\r\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function ( material ) {\r\n\r\n\t\treturn THREE.MeshBasicMaterial;\r\n\r\n\t};\r\n\r\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, material, parser ) {\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tmaterialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\tvar metallicRoughness = material.pbrMetallicRoughness;\r\n\r\n\t\tif ( metallicRoughness ) {\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.fromArray( array );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending );\r\n\r\n\t};\r\n\r\n\t/* BINARY EXTENSION */\r\n\r\n\tvar BINARY_EXTENSION_BUFFER_NAME = 'binary_glTF';\r\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\r\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\r\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\r\n\r\n\tfunction GLTFBinaryExtension( data ) {\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\r\n\t\tthis.content = null;\r\n\t\tthis.body = null;\r\n\r\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\r\n\r\n\t\tthis.header = {\r\n\t\t\tmagic: THREE.LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\r\n\t\t\tversion: headerView.getUint32( 4, true ),\r\n\t\t\tlength: headerView.getUint32( 8, true )\r\n\t\t};\r\n\r\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\r\n\r\n\t\t} else if ( this.header.version < 2.0 ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\r\n\t\tvar chunkIndex = 0;\r\n\r\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\r\n\r\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\r\n\t\t\tchunkIndex += 4;\r\n\r\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\r\n\r\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\r\n\t\t\t\tthis.content = THREE.LoaderUtils.decodeText( contentArray );\r\n\r\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\r\n\r\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\r\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Clients must ignore chunks with unknown types.\r\n\r\n\t\t\tchunkIndex += chunkLength;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.content === null ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * DRACO Mesh Compression Extension\r\n\t *\r\n\t * Specification: https://github.com/KhronosGroup/glTF/pull/874\r\n\t */\r\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\r\n\r\n\t\tif ( ! dracoLoader ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\r\n\t\tthis.json = json;\r\n\t\tthis.dracoLoader = dracoLoader;\r\n\r\n\t}\r\n\r\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\r\n\r\n\t\tvar json = this.json;\r\n\t\tvar dracoLoader = this.dracoLoader;\r\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\r\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\r\n\t\tvar threeAttributeMap = {};\r\n\t\tvar attributeNormalizedMap = {};\r\n\t\tvar attributeTypeMap = {};\r\n\r\n\t\tfor ( var attributeName in gltfAttributeMap ) {\r\n\r\n\t\t\tif ( ! ( attributeName in ATTRIBUTES ) ) continue;\r\n\r\n\t\t\tthreeAttributeMap[ ATTRIBUTES[ attributeName ] ] = gltfAttributeMap[ attributeName ];\r\n\r\n\t\t}\r\n\r\n\t\tfor ( attributeName in primitive.attributes ) {\r\n\r\n\t\t\tif ( ATTRIBUTES[ attributeName ] !== undefined && gltfAttributeMap[ attributeName ] !== undefined ) {\r\n\r\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\r\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t\tattributeTypeMap[ ATTRIBUTES[ attributeName ] ] = componentType;\r\n\t\t\t\tattributeNormalizedMap[ ATTRIBUTES[ attributeName ] ] = accessorDef.normalized === true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\r\n\r\n\t\t\treturn new Promise( function ( resolve ) {\r\n\r\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\r\n\r\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\r\n\r\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\r\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\r\n\r\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tresolve( geometry );\r\n\r\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specular-Glossiness Extension\r\n\t *\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\r\n\t */\r\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\r\n\r\n\t\treturn {\r\n\r\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\r\n\r\n\t\t\tspecularGlossinessParams: [\r\n\t\t\t\t'color',\r\n\t\t\t\t'map',\r\n\t\t\t\t'lightMap',\r\n\t\t\t\t'lightMapIntensity',\r\n\t\t\t\t'aoMap',\r\n\t\t\t\t'aoMapIntensity',\r\n\t\t\t\t'emissive',\r\n\t\t\t\t'emissiveIntensity',\r\n\t\t\t\t'emissiveMap',\r\n\t\t\t\t'bumpMap',\r\n\t\t\t\t'bumpScale',\r\n\t\t\t\t'normalMap',\r\n\t\t\t\t'displacementMap',\r\n\t\t\t\t'displacementScale',\r\n\t\t\t\t'displacementBias',\r\n\t\t\t\t'specularMap',\r\n\t\t\t\t'specular',\r\n\t\t\t\t'glossinessMap',\r\n\t\t\t\t'glossiness',\r\n\t\t\t\t'alphaMap',\r\n\t\t\t\t'envMap',\r\n\t\t\t\t'envMapIntensity',\r\n\t\t\t\t'refractionRatio',\r\n\t\t\t],\r\n\r\n\t\t\tgetMaterialType: function () {\r\n\r\n\t\t\t\treturn THREE.ShaderMaterial;\r\n\r\n\t\t\t},\r\n\r\n\t\t\textendParams: function ( params, material, parser ) {\r\n\r\n\t\t\t\tvar pbrSpecularGlossiness = material.extensions[ this.name ];\r\n\r\n\t\t\t\tvar shader = THREE.ShaderLib[ 'standard' ];\r\n\r\n\t\t\t\tvar uniforms = THREE.UniformsUtils.clone( shader.uniforms );\r\n\r\n\t\t\t\tvar specularMapParsFragmentChunk = [\r\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\r\n\t\t\t\t\t'\tuniform sampler2D specularMap;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar glossinessMapParsFragmentChunk = [\r\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\r\n\t\t\t\t\t'\tuniform sampler2D glossinessMap;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar specularMapFragmentChunk = [\r\n\t\t\t\t\t'vec3 specularFactor = specular;',\r\n\t\t\t\t\t'#ifdef USE_SPECULARMAP',\r\n\t\t\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\r\n\t\t\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\r\n\t\t\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t\t\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar glossinessMapFragmentChunk = [\r\n\t\t\t\t\t'float glossinessFactor = glossiness;',\r\n\t\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\r\n\t\t\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\r\n\t\t\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\r\n\t\t\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\r\n\t\t\t\t\t'#endif'\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar lightPhysicalFragmentChunk = [\r\n\t\t\t\t\t'PhysicalMaterial material;',\r\n\t\t\t\t\t'material.diffuseColor = diffuseColor.rgb;',\r\n\t\t\t\t\t'material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );',\r\n\t\t\t\t\t'material.specularColor = specularFactor.rgb;',\r\n\t\t\t\t].join( '\\n' );\r\n\r\n\t\t\t\tvar fragmentShader = shader.fragmentShader\r\n\t\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\r\n\t\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\r\n\t\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\r\n\t\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\r\n\r\n\t\t\t\tdelete uniforms.roughness;\r\n\t\t\t\tdelete uniforms.metalness;\r\n\t\t\t\tdelete uniforms.roughnessMap;\r\n\t\t\t\tdelete uniforms.metalnessMap;\r\n\r\n\t\t\t\tuniforms.specular = { value: new THREE.Color().setHex( 0x111111 ) };\r\n\t\t\t\tuniforms.glossiness = { value: 0.5 };\r\n\t\t\t\tuniforms.specularMap = { value: null };\r\n\t\t\t\tuniforms.glossinessMap = { value: null };\r\n\r\n\t\t\t\tparams.vertexShader = shader.vertexShader;\r\n\t\t\t\tparams.fragmentShader = fragmentShader;\r\n\t\t\t\tparams.uniforms = uniforms;\r\n\t\t\t\tparams.defines = { 'STANDARD': '' };\r\n\r\n\t\t\t\tparams.color = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\t\t\t\tparams.opacity = 1.0;\r\n\r\n\t\t\t\tvar pending = [];\r\n\r\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\r\n\r\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\r\n\r\n\t\t\t\t\tparams.color.fromArray( array );\r\n\t\t\t\t\tparams.opacity = array[ 3 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\r\n\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'map', pbrSpecularGlossiness.diffuseTexture.index ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparams.emissive = new THREE.Color( 0.0, 0.0, 0.0 );\r\n\t\t\t\tparams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\r\n\t\t\t\tparams.specular = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\r\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\r\n\r\n\t\t\t\t\tparams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\r\n\r\n\t\t\t\t\tvar specGlossIndex = pbrSpecularGlossiness.specularGlossinessTexture.index;\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'glossinessMap', specGlossIndex ) );\r\n\t\t\t\t\tpending.push( parser.assignTexture( params, 'specularMap', specGlossIndex ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn Promise.all( pending );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tcreateMaterial: function ( params ) {\r\n\r\n\t\t\t\t// setup material properties based on MeshStandardMaterial for Specular-Glossiness\r\n\r\n\t\t\t\tvar material = new THREE.ShaderMaterial( {\r\n\t\t\t\t\tdefines: params.defines,\r\n\t\t\t\t\tvertexShader: params.vertexShader,\r\n\t\t\t\t\tfragmentShader: params.fragmentShader,\r\n\t\t\t\t\tuniforms: params.uniforms,\r\n\t\t\t\t\tfog: true,\r\n\t\t\t\t\tlights: true,\r\n\t\t\t\t\topacity: params.opacity,\r\n\t\t\t\t\ttransparent: params.transparent\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tmaterial.isGLTFSpecularGlossinessMaterial = true;\r\n\r\n\t\t\t\tmaterial.color = params.color;\r\n\r\n\t\t\t\tmaterial.map = params.map === undefined ? null : params.map;\r\n\r\n\t\t\t\tmaterial.lightMap = null;\r\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.aoMap = params.aoMap === undefined ? null : params.aoMap;\r\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.emissive = params.emissive;\r\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\r\n\t\t\t\tmaterial.emissiveMap = params.emissiveMap === undefined ? null : params.emissiveMap;\r\n\r\n\t\t\t\tmaterial.bumpMap = params.bumpMap === undefined ? null : params.bumpMap;\r\n\t\t\t\tmaterial.bumpScale = 1;\r\n\r\n\t\t\t\tmaterial.normalMap = params.normalMap === undefined ? null : params.normalMap;\r\n\t\t\t\tif ( params.normalScale ) material.normalScale = params.normalScale;\r\n\r\n\t\t\t\tmaterial.displacementMap = null;\r\n\t\t\t\tmaterial.displacementScale = 1;\r\n\t\t\t\tmaterial.displacementBias = 0;\r\n\r\n\t\t\t\tmaterial.specularMap = params.specularMap === undefined ? null : params.specularMap;\r\n\t\t\t\tmaterial.specular = params.specular;\r\n\r\n\t\t\t\tmaterial.glossinessMap = params.glossinessMap === undefined ? null : params.glossinessMap;\r\n\t\t\t\tmaterial.glossiness = params.glossiness;\r\n\r\n\t\t\t\tmaterial.alphaMap = null;\r\n\r\n\t\t\t\tmaterial.envMap = params.envMap === undefined ? null : params.envMap;\r\n\t\t\t\tmaterial.envMapIntensity = 1.0;\r\n\r\n\t\t\t\tmaterial.refractionRatio = 0.98;\r\n\r\n\t\t\t\tmaterial.extensions.derivatives = true;\r\n\r\n\t\t\t\treturn material;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * Clones a GLTFSpecularGlossinessMaterial instance. The ShaderMaterial.copy() method can\r\n\t\t\t * copy only properties it knows about or inherits, and misses many properties that would\r\n\t\t\t * normally be defined by MeshStandardMaterial.\r\n\t\t\t *\r\n\t\t\t * This method allows GLTFSpecularGlossinessMaterials to be cloned in the process of\r\n\t\t\t * loading a glTF model, but cloning later (e.g. by the user) would require these changes\r\n\t\t\t * AND also updating `.onBeforeRender` on the parent mesh.\r\n\t\t\t *\r\n\t\t\t * @param  {THREE.ShaderMaterial} source\r\n\t\t\t * @return {THREE.ShaderMaterial}\r\n\t\t\t */\r\n\t\t\tcloneMaterial: function ( source ) {\r\n\r\n\t\t\t\tvar target = source.clone();\r\n\r\n\t\t\t\ttarget.isGLTFSpecularGlossinessMaterial = true;\r\n\r\n\t\t\t\tvar params = this.specularGlossinessParams;\r\n\r\n\t\t\t\tfor ( var i = 0, il = params.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\ttarget[ params[ i ] ] = source[ params[ i ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn target;\r\n\r\n\t\t\t},\r\n\r\n\t\t\t// Here's based on refreshUniformsCommon() and refreshUniformsStandard() in WebGLRenderer.\r\n\t\t\trefreshUniforms: function ( renderer, scene, camera, geometry, material, group ) {\r\n\r\n\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial !== true ) {\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uniforms = material.uniforms;\r\n\t\t\t\tvar defines = material.defines;\r\n\r\n\t\t\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t\tuniforms.diffuse.value.copy( material.color );\r\n\t\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t\t\tuniforms.map.value = material.map;\r\n\t\t\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t\t\t// uv repeat and offset setting priorities\r\n\t\t\t\t// 1. color map\r\n\t\t\t\t// 2. specular map\r\n\t\t\t\t// 3. normal map\r\n\t\t\t\t// 4. bump map\r\n\t\t\t\t// 5. alpha map\r\n\t\t\t\t// 6. emissive map\r\n\r\n\t\t\t\tvar uvScaleMap;\r\n\r\n\t\t\t\tif ( material.map ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t\t\t} else if ( material.glossinessMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.glossinessMap;\r\n\r\n\t\t\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\t\t\t// backwards compatibility\r\n\t\t\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\r\n\r\n\t\t\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n\t\t\t\t\t\tuvScaleMap.updateMatrix();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuniforms.envMap.value = material.envMap;\r\n\t\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\t\t\t\tuniforms.flipEnvMap.value = ( material.envMap && material.envMap.isCubeTexture ) ? - 1 : 1;\r\n\r\n\t\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t\t\t\tuniforms.specular.value.copy( material.specular );\r\n\t\t\t\tuniforms.glossiness.value = material.glossiness;\r\n\r\n\t\t\t\tuniforms.glossinessMap.value = material.glossinessMap;\r\n\r\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\r\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t\t\tif ( uniforms.glossinessMap.value !== null && defines.USE_GLOSSINESSMAP === undefined ) {\r\n\r\n\t\t\t\t\tdefines.USE_GLOSSINESSMAP = '';\r\n\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\r\n\t\t\t\t\tdefines.USE_ROUGHNESSMAP = '';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( uniforms.glossinessMap.value === null && defines.USE_GLOSSINESSMAP !== undefined ) {\r\n\r\n\t\t\t\t\tdelete defines.USE_GLOSSINESSMAP;\r\n\t\t\t\t\tdelete defines.USE_ROUGHNESSMAP;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*********************************/\r\n\t/********** INTERPOLATION ********/\r\n\t/*********************************/\r\n\r\n\t// Spline Interpolation\r\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\r\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\t\tTHREE.Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\t}\r\n\r\n\tGLTFCubicSplineInterpolant.prototype = Object.create( THREE.Interpolant.prototype );\r\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\r\n\r\n\t\t// Copies a sample value to the result buffer. See description of glTF\r\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tvalueSize = this.valueSize,\r\n\t\t\toffset = index * valueSize * 3 + valueSize;\r\n\r\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\r\n\r\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer;\r\n\t\tvar values = this.sampleValues;\r\n\t\tvar stride = this.valueSize;\r\n\r\n\t\tvar stride2 = stride * 2;\r\n\t\tvar stride3 = stride * 3;\r\n\r\n\t\tvar td = t1 - t0;\r\n\r\n\t\tvar p = ( t - t0 ) / td;\r\n\t\tvar pp = p * p;\r\n\t\tvar ppp = pp * p;\r\n\r\n\t\tvar offset1 = i1 * stride3;\r\n\t\tvar offset0 = offset1 - stride3;\r\n\r\n\t\tvar s0 = 2 * ppp - 3 * pp + 1;\r\n\t\tvar s1 = ppp - 2 * pp + p;\r\n\t\tvar s2 = - 2 * ppp + 3 * pp;\r\n\t\tvar s3 = ppp - pp;\r\n\r\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\r\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\r\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\r\n\r\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\r\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\r\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\r\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\r\n\r\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\t/*********************************/\r\n\t/********** INTERNALS ************/\r\n\t/*********************************/\r\n\r\n\t/* CONSTANTS */\r\n\r\n\tvar WEBGL_CONSTANTS = {\r\n\t\tFLOAT: 5126,\r\n\t\t//FLOAT_MAT2: 35674,\r\n\t\tFLOAT_MAT3: 35675,\r\n\t\tFLOAT_MAT4: 35676,\r\n\t\tFLOAT_VEC2: 35664,\r\n\t\tFLOAT_VEC3: 35665,\r\n\t\tFLOAT_VEC4: 35666,\r\n\t\tLINEAR: 9729,\r\n\t\tREPEAT: 10497,\r\n\t\tSAMPLER_2D: 35678,\r\n\t\tPOINTS: 0,\r\n\t\tLINES: 1,\r\n\t\tLINE_LOOP: 2,\r\n\t\tLINE_STRIP: 3,\r\n\t\tTRIANGLES: 4,\r\n\t\tTRIANGLE_STRIP: 5,\r\n\t\tTRIANGLE_FAN: 6,\r\n\t\tUNSIGNED_BYTE: 5121,\r\n\t\tUNSIGNED_SHORT: 5123\r\n\t};\r\n\r\n\tvar WEBGL_TYPE = {\r\n\t\t5126: Number,\r\n\t\t//35674: THREE.Matrix2,\r\n\t\t35675: THREE.Matrix3,\r\n\t\t35676: THREE.Matrix4,\r\n\t\t35664: THREE.Vector2,\r\n\t\t35665: THREE.Vector3,\r\n\t\t35666: THREE.Vector4,\r\n\t\t35678: THREE.Texture\r\n\t};\r\n\r\n\tvar WEBGL_COMPONENT_TYPES = {\r\n\t\t5120: Int8Array,\r\n\t\t5121: Uint8Array,\r\n\t\t5122: Int16Array,\r\n\t\t5123: Uint16Array,\r\n\t\t5125: Uint32Array,\r\n\t\t5126: Float32Array\r\n\t};\r\n\r\n\tvar WEBGL_FILTERS = {\r\n\t\t9728: THREE.NearestFilter,\r\n\t\t9729: THREE.LinearFilter,\r\n\t\t9984: THREE.NearestMipMapNearestFilter,\r\n\t\t9985: THREE.LinearMipMapNearestFilter,\r\n\t\t9986: THREE.NearestMipMapLinearFilter,\r\n\t\t9987: THREE.LinearMipMapLinearFilter\r\n\t};\r\n\r\n\tvar WEBGL_WRAPPINGS = {\r\n\t\t33071: THREE.ClampToEdgeWrapping,\r\n\t\t33648: THREE.MirroredRepeatWrapping,\r\n\t\t10497: THREE.RepeatWrapping\r\n\t};\r\n\r\n\tvar WEBGL_SIDES = {\r\n\t\t1028: THREE.BackSide, // Culling front\r\n\t\t1029: THREE.FrontSide // Culling back\r\n\t\t//1032: THREE.NoSide   // Culling front and back, what to do?\r\n\t};\r\n\r\n\tvar WEBGL_DEPTH_FUNCS = {\r\n\t\t512: THREE.NeverDepth,\r\n\t\t513: THREE.LessDepth,\r\n\t\t514: THREE.EqualDepth,\r\n\t\t515: THREE.LessEqualDepth,\r\n\t\t516: THREE.GreaterEqualDepth,\r\n\t\t517: THREE.NotEqualDepth,\r\n\t\t518: THREE.GreaterEqualDepth,\r\n\t\t519: THREE.AlwaysDepth\r\n\t};\r\n\r\n\tvar WEBGL_BLEND_EQUATIONS = {\r\n\t\t32774: THREE.AddEquation,\r\n\t\t32778: THREE.SubtractEquation,\r\n\t\t32779: THREE.ReverseSubtractEquation\r\n\t};\r\n\r\n\tvar WEBGL_BLEND_FUNCS = {\r\n\t\t0: THREE.ZeroFactor,\r\n\t\t1: THREE.OneFactor,\r\n\t\t768: THREE.SrcColorFactor,\r\n\t\t769: THREE.OneMinusSrcColorFactor,\r\n\t\t770: THREE.SrcAlphaFactor,\r\n\t\t771: THREE.OneMinusSrcAlphaFactor,\r\n\t\t772: THREE.DstAlphaFactor,\r\n\t\t773: THREE.OneMinusDstAlphaFactor,\r\n\t\t774: THREE.DstColorFactor,\r\n\t\t775: THREE.OneMinusDstColorFactor,\r\n\t\t776: THREE.SrcAlphaSaturateFactor\r\n\t\t// The followings are not supported by Three.js yet\r\n\t\t//32769: CONSTANT_COLOR,\r\n\t\t//32770: ONE_MINUS_CONSTANT_COLOR,\r\n\t\t//32771: CONSTANT_ALPHA,\r\n\t\t//32772: ONE_MINUS_CONSTANT_COLOR\r\n\t};\r\n\r\n\tvar WEBGL_TYPE_SIZES = {\r\n\t\t'SCALAR': 1,\r\n\t\t'VEC2': 2,\r\n\t\t'VEC3': 3,\r\n\t\t'VEC4': 4,\r\n\t\t'MAT2': 4,\r\n\t\t'MAT3': 9,\r\n\t\t'MAT4': 16\r\n\t};\r\n\r\n\tvar ATTRIBUTES = {\r\n\t\tPOSITION: 'position',\r\n\t\tNORMAL: 'normal',\r\n\t\tTEXCOORD_0: 'uv',\r\n\t\tTEXCOORD0: 'uv', // deprecated\r\n\t\tTEXCOORD: 'uv', // deprecated\r\n\t\tTEXCOORD_1: 'uv2',\r\n\t\tCOLOR_0: 'color',\r\n\t\tCOLOR0: 'color', // deprecated\r\n\t\tCOLOR: 'color', // deprecated\r\n\t\tWEIGHTS_0: 'skinWeight',\r\n\t\tWEIGHT: 'skinWeight', // deprecated\r\n\t\tJOINTS_0: 'skinIndex',\r\n\t\tJOINT: 'skinIndex' // deprecated\r\n\t};\r\n\r\n\tvar PATH_PROPERTIES = {\r\n\t\tscale: 'scale',\r\n\t\ttranslation: 'position',\r\n\t\trotation: 'quaternion',\r\n\t\tweights: 'morphTargetInfluences'\r\n\t};\r\n\r\n\tvar INTERPOLATION = {\r\n\t\tCUBICSPLINE: THREE.InterpolateSmooth, // We use custom interpolation GLTFCubicSplineInterpolation for CUBICSPLINE.\r\n\t\t                                      // KeyframeTrack.optimize() can't handle glTF Cubic Spline output values layout,\r\n\t\t                                      // using THREE.InterpolateSmooth for KeyframeTrack instantiation to prevent optimization.\r\n\t\t                                      // See KeyframeTrack.optimize() for the detail.\r\n\t\tLINEAR: THREE.InterpolateLinear,\r\n\t\tSTEP: THREE.InterpolateDiscrete\r\n\t};\r\n\r\n\tvar STATES_ENABLES = {\r\n\t\t2884: 'CULL_FACE',\r\n\t\t2929: 'DEPTH_TEST',\r\n\t\t3042: 'BLEND',\r\n\t\t3089: 'SCISSOR_TEST',\r\n\t\t32823: 'POLYGON_OFFSET_FILL',\r\n\t\t32926: 'SAMPLE_ALPHA_TO_COVERAGE'\r\n\t};\r\n\r\n\tvar ALPHA_MODES = {\r\n\t\tOPAQUE: 'OPAQUE',\r\n\t\tMASK: 'MASK',\r\n\t\tBLEND: 'BLEND'\r\n\t};\r\n\r\n\tvar MIME_TYPE_FORMATS = {\r\n\t\t'image/png': THREE.RGBAFormat,\r\n\t\t'image/jpeg': THREE.RGBFormat\r\n\t};\r\n\r\n\t/* UTILITY FUNCTIONS */\r\n\r\n\tfunction resolveURL( url, path ) {\r\n\r\n\t\t// Invalid URL\r\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\r\n\r\n\t\t// Absolute URL http://,https://,//\r\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\r\n\r\n\t\t// Data URI\r\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\r\n\r\n\t\t// Blob URL\r\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\r\n\r\n\t\t// Relative URL\r\n\t\treturn path + url;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\r\n\t */\r\n\tfunction createDefaultMaterial() {\r\n\r\n\t\treturn new THREE.MeshStandardMaterial( {\r\n\t\t\tcolor: 0xFFFFFF,\r\n\t\t\temissive: 0x000000,\r\n\t\t\tmetalness: 1,\r\n\t\t\troughness: 1,\r\n\t\t\ttransparent: false,\r\n\t\t\tdepthTest: true,\r\n\t\t\tside: THREE.FrontSide\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\r\n\r\n\t\t// Add unknown glTF extensions to an object's userData.\r\n\r\n\t\tfor ( var name in objectDef.extensions ) {\r\n\r\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\r\n\r\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\r\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param {THREE.Object3D|THREE.Material|THREE.BufferGeometry} object\r\n\t * @param {GLTF.definition} def\r\n\t */\r\n\tfunction assignExtrasToUserData( object, gltfDef ) {\r\n\r\n\t\tif ( gltfDef.extras !== undefined ) {\r\n\r\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\r\n\r\n\t\t\t\tobject.userData = gltfDef.extras;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\r\n\t *\r\n\t * @param {THREE.BufferGeometry} geometry\r\n\t * @param {Array<GLTF.Target>} targets\r\n\t * @param {Array<THREE.BufferAttribute>} accessors\r\n\t */\r\n\tfunction addMorphTargets( geometry, targets, accessors ) {\r\n\r\n\t\tvar hasMorphPosition = false;\r\n\t\tvar hasMorphNormal = false;\r\n\r\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar target = targets[ i ];\r\n\r\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\r\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\r\n\r\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return;\r\n\r\n\t\tvar morphPositions = [];\r\n\t\tvar morphNormals = [];\r\n\r\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar target = targets[ i ];\r\n\t\t\tvar attributeName = 'morphTarget' + i;\r\n\r\n\t\t\tif ( hasMorphPosition ) {\r\n\r\n\t\t\t\t// Three.js morph position is absolute value. The formula is\r\n\t\t\t\t//   basePosition\r\n\t\t\t\t//     + weight0 * ( morphPosition0 - basePosition )\r\n\t\t\t\t//     + weight1 * ( morphPosition1 - basePosition )\r\n\t\t\t\t//     ...\r\n\t\t\t\t// while the glTF one is relative\r\n\t\t\t\t//   basePosition\r\n\t\t\t\t//     + weight0 * glTFmorphPosition0\r\n\t\t\t\t//     + weight1 * glTFmorphPosition1\r\n\t\t\t\t//     ...\r\n\t\t\t\t// then we need to convert from relative to absolute here.\r\n\r\n\t\t\t\tif ( target.POSITION !== undefined ) {\r\n\r\n\t\t\t\t\t// Cloning not to pollute original accessor\r\n\t\t\t\t\tvar positionAttribute = cloneBufferAttribute( accessors[ target.POSITION ] );\r\n\t\t\t\t\tpositionAttribute.name = attributeName;\r\n\r\n\t\t\t\t\tvar position = geometry.attributes.position;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = positionAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tpositionAttribute.setXYZ(\r\n\t\t\t\t\t\t\tj,\r\n\t\t\t\t\t\t\tpositionAttribute.getX( j ) + position.getX( j ),\r\n\t\t\t\t\t\t\tpositionAttribute.getY( j ) + position.getY( j ),\r\n\t\t\t\t\t\t\tpositionAttribute.getZ( j ) + position.getZ( j )\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tpositionAttribute = geometry.attributes.position;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphPositions.push( positionAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasMorphNormal ) {\r\n\r\n\t\t\t\t// see target.POSITION's comment\r\n\r\n\t\t\t\tvar normalAttribute;\r\n\r\n\t\t\t\tif ( target.NORMAL !== undefined ) {\r\n\r\n\t\t\t\t\tvar normalAttribute = cloneBufferAttribute( accessors[ target.NORMAL ] );\r\n\t\t\t\t\tnormalAttribute.name = attributeName;\r\n\r\n\t\t\t\t\tvar normal = geometry.attributes.normal;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = normalAttribute.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tnormalAttribute.setXYZ(\r\n\t\t\t\t\t\t\tj,\r\n\t\t\t\t\t\t\tnormalAttribute.getX( j ) + normal.getX( j ),\r\n\t\t\t\t\t\t\tnormalAttribute.getY( j ) + normal.getY( j ),\r\n\t\t\t\t\t\t\tnormalAttribute.getZ( j ) + normal.getZ( j )\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tnormalAttribute = geometry.attributes.normal;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmorphNormals.push( normalAttribute );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\r\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @param {THREE.Mesh} mesh\r\n\t * @param {GLTF.Mesh} meshDef\r\n\t */\r\n\tfunction updateMorphTargets( mesh, meshDef ) {\r\n\r\n\t\tmesh.updateMorphTargets();\r\n\r\n\t\tif ( meshDef.weights !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\r\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\r\n\r\n\t\t\tvar targetNames = meshDef.extras.targetNames;\r\n\r\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\r\n\r\n\t\t\t\tmesh.morphTargetDictionary = {};\r\n\r\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction isPrimitiveEqual( a, b ) {\r\n\r\n\t\tif ( a.indices !== b.indices ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn isObjectEqual( a.attributes, b.attributes );\r\n\r\n\t}\r\n\r\n\tfunction isObjectEqual( a, b ) {\r\n\r\n\t\tif ( Object.keys( a ).length !== Object.keys( b ).length ) return false;\r\n\r\n\t\tfor ( var key in a ) {\r\n\r\n\t\t\tif ( a[ key ] !== b[ key ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction isArrayEqual( a, b ) {\r\n\r\n\t\tif ( a.length !== b.length ) return false;\r\n\r\n\t\tfor ( var i = 0, il = a.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( a[ i ] !== b[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction getCachedGeometry( cache, newPrimitive ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( isPrimitiveEqual( cached.primitive, newPrimitive ) ) return cached.promise;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction getCachedCombinedGeometry( cache, geometries ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( isArrayEqual( geometries, cached.baseGeometries ) ) return cached.geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction getCachedMultiPassGeometry( cache, geometry, primitives ) {\r\n\r\n\t\tfor ( var i = 0, il = cache.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar cached = cache[ i ];\r\n\r\n\t\t\tif ( geometry === cached.baseGeometry && isArrayEqual( primitives, cached.primitives ) ) return cached.geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tfunction cloneBufferAttribute( attribute ) {\r\n\r\n\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tvar count = attribute.count;\r\n\t\t\tvar itemSize = attribute.itemSize;\r\n\t\t\tvar array = attribute.array.slice( 0, count * itemSize );\r\n\r\n\t\t\tfor ( var i = 0; i < count; ++ i ) {\r\n\r\n\t\t\t\tarray[ i ] = attribute.getX( i );\r\n\t\t\t\tif ( itemSize >= 2 ) array[ i + 1 ] = attribute.getY( i );\r\n\t\t\t\tif ( itemSize >= 3 ) array[ i + 2 ] = attribute.getZ( i );\r\n\t\t\t\tif ( itemSize >= 4 ) array[ i + 3 ] = attribute.getW( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new THREE.BufferAttribute( array, itemSize, attribute.normalized );\r\n\r\n\t\t}\r\n\r\n\t\treturn attribute.clone();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if we can build a single Mesh with MultiMaterial from multiple primitives.\r\n\t * Returns true if all primitives use the same attributes/morphAttributes/mode\r\n\t * and also have index. Otherwise returns false.\r\n\t *\r\n\t * @param {Array<GLTF.Primitive>} primitives\r\n\t * @return {Boolean}\r\n\t */\r\n\tfunction isMultiPassGeometry( primitives ) {\r\n\r\n\t\tif ( primitives.length < 2 ) return false;\r\n\r\n\t\tvar primitive0 = primitives[ 0 ];\r\n\t\tvar targets0 = primitive0.targets || [];\r\n\r\n\t\tif ( primitive0.indices === undefined ) return false;\r\n\r\n\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\tif ( primitive0.mode !== primitive.mode ) return false;\r\n\t\t\tif ( primitive.indices === undefined ) return false;\r\n\t\t\tif ( ! isObjectEqual( primitive0.attributes, primitive.attributes ) ) return false;\r\n\r\n\t\t\tvar targets = primitive.targets || [];\r\n\r\n\t\t\tif ( targets0.length !== targets.length ) return false;\r\n\r\n\t\t\tfor ( var j = 0, jl = targets0.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tif ( ! isObjectEqual( targets0[ j ], targets[ j ] ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\t/* GLTF PARSER */\r\n\r\n\tfunction GLTFParser( json, extensions, options ) {\r\n\r\n\t\tthis.json = json || {};\r\n\t\tthis.extensions = extensions || {};\r\n\t\tthis.options = options || {};\r\n\r\n\t\t// loader object cache\r\n\t\tthis.cache = new GLTFRegistry();\r\n\r\n\t\t// BufferGeometry caching\r\n\t\tthis.primitiveCache = [];\r\n\t\tthis.multiplePrimitivesCache = [];\r\n\t\tthis.multiPassGeometryCache = [];\r\n\r\n\t\tthis.textureLoader = new THREE.TextureLoader( this.options.manager );\r\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\r\n\r\n\t\tthis.fileLoader = new THREE.FileLoader( this.options.manager );\r\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\r\n\r\n\t}\r\n\r\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\r\n\r\n\t\tvar json = this.json;\r\n\r\n\t\t// Clear the loader cache\r\n\t\tthis.cache.removeAll();\r\n\r\n\t\t// Mark the special nodes/meshes in json for efficient parse\r\n\t\tthis.markDefs();\r\n\r\n\t\t// Fire the callback on complete\r\n\t\tthis.getMultiDependencies( [\r\n\r\n\t\t\t'scene',\r\n\t\t\t'animation',\r\n\t\t\t'camera'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar scenes = dependencies.scenes || [];\r\n\t\t\tvar scene = scenes[ json.scene || 0 ];\r\n\t\t\tvar animations = dependencies.animations || [];\r\n\t\t\tvar cameras = dependencies.cameras || [];\r\n\r\n\t\t\tonLoad( scene, scenes, cameras, animations, json );\r\n\r\n\t\t} ).catch( onError );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Marks the special nodes/meshes in json for efficient parse.\r\n\t */\r\n\tGLTFParser.prototype.markDefs = function () {\r\n\r\n\t\tvar nodeDefs = this.json.nodes || [];\r\n\t\tvar skinDefs = this.json.skins || [];\r\n\t\tvar meshDefs = this.json.meshes || [];\r\n\r\n\t\tvar meshReferences = {};\r\n\t\tvar meshUses = {};\r\n\r\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\r\n\t\t// Object3D. Use the skins' joint references to mark bones.\r\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\r\n\r\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\r\n\r\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\r\n\t\t// avoid having more than one THREE.Mesh with the same name, count\r\n\t\t// references and rename instances below.\r\n\t\t//\r\n\t\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\r\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\r\n\r\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\r\n\r\n\t\t\tif ( nodeDef.mesh !== undefined ) {\r\n\r\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] === undefined ) {\r\n\r\n\t\t\t\t\tmeshReferences[ nodeDef.mesh ] = meshUses[ nodeDef.mesh ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmeshReferences[ nodeDef.mesh ] ++;\r\n\r\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\r\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\r\n\t\t\t\t// to mark SkinnedMesh if node has skin.\r\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\r\n\r\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.json.meshReferences = meshReferences;\r\n\t\tthis.json.meshUses = meshUses;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests the specified dependency asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @param {number} index\r\n\t * @return {Promise<Object>}\r\n\t */\r\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\r\n\r\n\t\tvar cacheKey = type + ':' + index;\r\n\t\tvar dependency = this.cache.get( cacheKey );\r\n\r\n\t\tif ( ! dependency ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 'scene':\r\n\t\t\t\t\tdependency = this.loadScene( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'node':\r\n\t\t\t\t\tdependency = this.loadNode( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'mesh':\r\n\t\t\t\t\tdependency = this.loadMesh( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'accessor':\r\n\t\t\t\t\tdependency = this.loadAccessor( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bufferView':\r\n\t\t\t\t\tdependency = this.loadBufferView( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'buffer':\r\n\t\t\t\t\tdependency = this.loadBuffer( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'material':\r\n\t\t\t\t\tdependency = this.loadMaterial( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'texture':\r\n\t\t\t\t\tdependency = this.loadTexture( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'skin':\r\n\t\t\t\t\tdependency = this.loadSkin( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'animation':\r\n\t\t\t\t\tdependency = this.loadAnimation( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'camera':\r\n\t\t\t\t\tdependency = this.loadCamera( index );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.cache.add( cacheKey, dependency );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependency;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests all dependencies of the specified type asynchronously, with caching.\r\n\t * @param {string} type\r\n\t * @return {Promise<Array<Object>>}\r\n\t */\r\n\tGLTFParser.prototype.getDependencies = function ( type ) {\r\n\r\n\t\tvar dependencies = this.cache.get( type );\r\n\r\n\t\tif ( ! dependencies ) {\r\n\r\n\t\t\tvar parser = this;\r\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\r\n\r\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\r\n\r\n\t\t\t\treturn parser.getDependency( type, index );\r\n\r\n\t\t\t} ) );\r\n\r\n\t\t\tthis.cache.add( type, dependencies );\r\n\r\n\t\t}\r\n\r\n\t\treturn dependencies;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Requests all multiple dependencies of the specified types asynchronously, with caching.\r\n\t * @param {Array<string>} types\r\n\t * @return {Promise<Object<Array<Object>>>}\r\n\t */\r\n\tGLTFParser.prototype.getMultiDependencies = function ( types ) {\r\n\r\n\t\tvar results = {};\r\n\t\tvar pendings = [];\r\n\r\n\t\tfor ( var i = 0, il = types.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar type = types[ i ];\r\n\t\t\tvar value = this.getDependencies( type );\r\n\r\n\t\t\tvalue = value.then( function ( key, value ) {\r\n\r\n\t\t\t\tresults[ key ] = value;\r\n\r\n\t\t\t}.bind( this, type + ( type === 'mesh' ? 'es' : 's' ) ) );\r\n\r\n\t\t\tpendings.push( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pendings ).then( function () {\r\n\r\n\t\t\treturn results;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\r\n\r\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\r\n\t\tvar loader = this.fileLoader;\r\n\r\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\t// If present, GLB container is required to be the first buffer.\r\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\r\n\r\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\r\n\r\n\t\t}\r\n\r\n\t\tvar options = this.options;\r\n\r\n\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\r\n\r\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n\t * @param {number} bufferViewIndex\r\n\t * @return {Promise<ArrayBuffer>}\r\n\t */\r\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\r\n\r\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\r\n\r\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\r\n\r\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\r\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\r\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\r\n\t * @param {number} accessorIndex\r\n\t * @return {Promise<THREE.BufferAttribute|THREE.InterleavedBufferAttribute>}\r\n\t */\r\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\r\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\r\n\r\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\r\n\r\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\r\n\t\t\t// information about attributes coming from another source (e.g. Draco\r\n\t\t\t// compression extension).\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar pendingBufferViews = [];\r\n\r\n\t\tif ( accessorDef.bufferView !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpendingBufferViews.push( null );\r\n\r\n\t\t}\r\n\r\n\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\r\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\r\n\r\n\t\t\tvar bufferView = bufferViews[ 0 ];\r\n\r\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\r\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\r\n\r\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\r\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\r\n\t\t\tvar itemBytes = elementBytes * itemSize;\r\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\r\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\r\n\t\t\tvar normalized = accessorDef.normalized === true;\r\n\t\t\tvar array, bufferAttribute;\r\n\r\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\r\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\r\n\r\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType;\r\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\r\n\r\n\t\t\t\tif ( ! ib ) {\r\n\r\n\t\t\t\t\t// Use the full buffer if it's interleaved.\r\n\t\t\t\t\tarray = new TypedArray( bufferView );\r\n\r\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\r\n\t\t\t\t\tib = new THREE.InterleavedBuffer( array, byteStride / elementBytes );\r\n\r\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new THREE.InterleavedBufferAttribute( ib, itemSize, byteOffset / elementBytes, normalized );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( bufferView === null ) {\r\n\r\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbufferAttribute = new THREE.BufferAttribute( array, itemSize, normalized );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\r\n\t\t\tif ( accessorDef.sparse !== undefined ) {\r\n\r\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\r\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\r\n\r\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\r\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\r\n\r\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\r\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\r\n\r\n\t\t\t\tif ( bufferView !== null ) {\r\n\r\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\r\n\t\t\t\t\tbufferAttribute.setArray( bufferAttribute.array.slice() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar index = sparseIndices[ i ];\r\n\r\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\r\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\r\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\r\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\r\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn bufferAttribute;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\r\n\t * @param {number} textureIndex\r\n\t * @return {Promise<THREE.Texture>}\r\n\t */\r\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\t\tvar options = this.options;\r\n\t\tvar textureLoader = this.textureLoader;\r\n\r\n\t\tvar URL = window.URL || window.webkitURL;\r\n\r\n\t\tvar textureDef = json.textures[ textureIndex ];\r\n\r\n\t\tvar textureExtensions = textureDef.extensions || {};\r\n\r\n\t\tvar source;\r\n\r\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\r\n\r\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tsource = json.images[ textureDef.source ];\r\n\r\n\t\t}\r\n\r\n\t\tvar sourceURI = source.uri;\r\n\t\tvar isObjectURL = false;\r\n\r\n\t\tif ( source.bufferView !== undefined ) {\r\n\r\n\t\t\t// Load binary image data from bufferView, if provided.\r\n\r\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\r\n\r\n\t\t\t\tisObjectURL = true;\r\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\r\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\r\n\t\t\t\treturn sourceURI;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\r\n\r\n\t\t\t// Load Texture resource.\r\n\r\n\t\t\tvar loader = THREE.Loader.Handlers.get( sourceURI );\r\n\r\n\t\t\tif ( ! loader ) {\r\n\r\n\t\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\r\n\t\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\r\n\t\t\t\t\t: textureLoader;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn new Promise( function ( resolve, reject ) {\r\n\r\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), resolve, undefined, reject );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} ).then( function ( texture ) {\r\n\r\n\t\t\t// Clean up resources and configure Texture.\r\n\r\n\t\t\tif ( isObjectURL === true ) {\r\n\r\n\t\t\t\tURL.revokeObjectURL( sourceURI );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.flipY = false;\r\n\r\n\t\t\tif ( textureDef.name !== undefined ) texture.name = textureDef.name;\r\n\r\n\t\t\t// Ignore unknown mime types, like DDS files.\r\n\t\t\tif ( source.mimeType in MIME_TYPE_FORMATS ) {\r\n\r\n\t\t\t\ttexture.format = MIME_TYPE_FORMATS[ source.mimeType ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar samplers = json.samplers || {};\r\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\r\n\r\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || THREE.LinearMipMapLinearFilter;\r\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || THREE.RepeatWrapping;\r\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || THREE.RepeatWrapping;\r\n\r\n\t\t\treturn texture;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Asynchronously assigns a texture to the given material parameters.\r\n\t * @param {Object} materialParams\r\n\t * @param {string} textureName\r\n\t * @param {number} textureIndex\r\n\t * @return {Promise}\r\n\t */\r\n\tGLTFParser.prototype.assignTexture = function ( materialParams, textureName, textureIndex ) {\r\n\r\n\t\treturn this.getDependency( 'texture', textureIndex ).then( function ( texture ) {\r\n\r\n\t\t\tmaterialParams[ textureName ] = texture;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\r\n\t * @param {number} materialIndex\r\n\t * @return {Promise<THREE.Material>}\r\n\t */\r\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\t\tvar materialDef = json.materials[ materialIndex ];\r\n\r\n\t\tvar materialType;\r\n\t\tvar materialParams = {};\r\n\t\tvar materialExtensions = materialDef.extensions || {};\r\n\r\n\t\tvar pending = [];\r\n\r\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\r\n\r\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\r\n\t\t\tmaterialType = sgExtension.getMaterialType( materialDef );\r\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\r\n\r\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\r\n\r\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\r\n\t\t\tmaterialType = kmuExtension.getMaterialType( materialDef );\r\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Specification:\r\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\r\n\r\n\t\t\tmaterialType = THREE.MeshStandardMaterial;\r\n\r\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\r\n\r\n\t\t\tmaterialParams.color = new THREE.Color( 1.0, 1.0, 1.0 );\r\n\t\t\tmaterialParams.opacity = 1.0;\r\n\r\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\r\n\r\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\r\n\r\n\t\t\t\tmaterialParams.color.fromArray( array );\r\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\r\n\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture.index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\r\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\r\n\r\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\r\n\r\n\t\t\t\tvar textureIndex = metallicRoughness.metallicRoughnessTexture.index;\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', textureIndex ) );\r\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', textureIndex ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.doubleSided === true ) {\r\n\r\n\t\t\tmaterialParams.side = THREE.DoubleSide;\r\n\r\n\t\t}\r\n\r\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\r\n\r\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\r\n\r\n\t\t\tmaterialParams.transparent = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmaterialParams.transparent = false;\r\n\r\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\r\n\r\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture.index ) );\r\n\r\n\t\t\tmaterialParams.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\r\n\r\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture.index ) );\r\n\r\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\r\n\r\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tmaterialParams.emissive = new THREE.Color().fromArray( materialDef.emissiveFactor );\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== THREE.MeshBasicMaterial ) {\r\n\r\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture.index ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn Promise.all( pending ).then( function () {\r\n\r\n\t\t\tvar material;\r\n\r\n\t\t\tif ( materialType === THREE.ShaderMaterial ) {\r\n\r\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial = new materialType( materialParams );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materialDef.name !== undefined ) material.name = materialDef.name;\r\n\r\n\t\t\t// Normal map textures use OpenGL conventions:\r\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#materialnormaltexture\r\n\t\t\tif ( material.normalScale ) {\r\n\r\n\t\t\t\tmaterial.normalScale.y = - material.normalScale.y;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\r\n\t\t\tif ( material.map ) material.map.encoding = THREE.sRGBEncoding;\r\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = THREE.sRGBEncoding;\r\n\t\t\tif ( material.specularMap ) material.specularMap.encoding = THREE.sRGBEncoding;\r\n\r\n\t\t\tassignExtrasToUserData( material, materialDef );\r\n\r\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * @param  {THREE.BufferGeometry} geometry\r\n\t * @param  {GLTF.Primitive} primitiveDef\r\n\t * @param  {Array<THREE.BufferAttribute>} accessors\r\n\t */\r\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, accessors ) {\r\n\r\n\t\tvar attributes = primitiveDef.attributes;\r\n\r\n\t\tfor ( var gltfAttributeName in attributes ) {\r\n\r\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ];\r\n\t\t\tvar bufferAttribute = accessors[ attributes[ gltfAttributeName ] ];\r\n\r\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\r\n\t\t\tif ( ! threeAttributeName ) continue;\r\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\r\n\r\n\t\t\tgeometry.addAttribute( threeAttributeName, bufferAttribute );\r\n\r\n\t\t}\r\n\r\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\r\n\r\n\t\t\tgeometry.setIndex( accessors[ primitiveDef.indices ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( primitiveDef.targets !== undefined ) {\r\n\r\n\t\t\taddMorphTargets( geometry, primitiveDef.targets, accessors );\r\n\r\n\t\t}\r\n\r\n\t\tassignExtrasToUserData( geometry, primitiveDef );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\r\n\t *\r\n\t * Creates BufferGeometries from primitives.\r\n\t * If we can build a single BufferGeometry with .groups from multiple primitives, returns one BufferGeometry.\r\n\t * Otherwise, returns BufferGeometries without .groups as many as primitives.\r\n\t *\r\n\t * @param {Array<Object>} primitives\r\n\t * @return {Promise<Array<THREE.BufferGeometry>>}\r\n\t */\r\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\r\n\r\n\t\tvar parser = this;\r\n\t\tvar extensions = this.extensions;\r\n\t\tvar cache = this.primitiveCache;\r\n\r\n\t\tvar isMultiPass = isMultiPassGeometry( primitives );\r\n\t\tvar originalPrimitives;\r\n\r\n\t\tif ( isMultiPass ) {\r\n\r\n\t\t\toriginalPrimitives = primitives; // save original primitives and use later\r\n\r\n\t\t\t// We build a single BufferGeometry with .groups from multiple primitives\r\n\t\t\t// because all primitives share the same attributes/morph/mode and have indices.\r\n\r\n\t\t\tprimitives = [ primitives[ 0 ] ];\r\n\r\n\t\t\t// Sets .groups and combined indices to a geometry later in this method.\r\n\r\n\t\t}\r\n\r\n\t\treturn this.getDependencies( 'accessor' ).then( function ( accessors ) {\r\n\r\n\t\t\tvar pending = [];\r\n\r\n\t\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\t\t// See if we've already created this geometry\r\n\t\t\t\tvar cached = getCachedGeometry( cache, primitive );\r\n\r\n\t\t\t\tif ( cached ) {\r\n\r\n\t\t\t\t\t// Use the cached geometry if it exists\r\n\t\t\t\t\tpending.push( cached );\r\n\r\n\t\t\t\t} else if ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\r\n\r\n\t\t\t\t\t// Use DRACO geometry if available\r\n\t\t\t\t\tvar geometryPromise = extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\r\n\t\t\t\t\t\t.decodePrimitive( primitive, parser )\r\n\t\t\t\t\t\t.then( function ( geometry ) {\r\n\r\n\t\t\t\t\t\t\taddPrimitiveAttributes( geometry, primitive, accessors );\r\n\r\n\t\t\t\t\t\t\treturn geometry;\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\tcache.push( { primitive: primitive, promise: geometryPromise } );\r\n\r\n\t\t\t\t\tpending.push( geometryPromise );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Otherwise create a new geometry\r\n\t\t\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\t\t\t\taddPrimitiveAttributes( geometry, primitive, accessors );\r\n\r\n\t\t\t\t\tvar geometryPromise = Promise.resolve( geometry );\r\n\r\n\t\t\t\t\t// Cache this geometry\r\n\t\t\t\t\tcache.push( { primitive: primitive, promise: geometryPromise } );\r\n\r\n\t\t\t\t\tpending.push( geometryPromise );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn Promise.all( pending ).then( function ( geometries ) {\r\n\r\n\t\t\t\tif ( isMultiPass ) {\r\n\r\n\t\t\t\t\tvar baseGeometry = geometries[ 0 ];\r\n\r\n\t\t\t\t\t// See if we've already created this combined geometry\r\n\t\t\t\t\tvar cache = parser.multiPassGeometryCache;\r\n\t\t\t\t\tvar cached = getCachedMultiPassGeometry( cache, baseGeometry, originalPrimitives );\r\n\r\n\t\t\t\t\tif ( cached !== null ) return [ cached.geometry ];\r\n\r\n\t\t\t\t\t// Cloning geometry because of index override.\r\n\t\t\t\t\t// Attributes can be reused so cloning by myself here.\r\n\t\t\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\t\t\t\tgeometry.name = baseGeometry.name;\r\n\t\t\t\t\tgeometry.userData = baseGeometry.userData;\r\n\r\n\t\t\t\t\tfor ( var key in baseGeometry.attributes ) geometry.addAttribute( key, baseGeometry.attributes[ key ] );\r\n\t\t\t\t\tfor ( var key in baseGeometry.morphAttributes ) geometry.morphAttributes[ key ] = baseGeometry.morphAttributes[ key ];\r\n\r\n\t\t\t\t\tvar indices = [];\r\n\t\t\t\t\tvar offset = 0;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = originalPrimitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar accessor = accessors[ originalPrimitives[ i ].indices ];\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = accessor.count; j < jl; j ++ ) indices.push( accessor.array[ j ] );\r\n\r\n\t\t\t\t\t\tgeometry.addGroup( offset, accessor.count, i );\r\n\r\n\t\t\t\t\t\toffset += accessor.count;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.setIndex( indices );\r\n\r\n\t\t\t\t\tcache.push( { geometry: geometry, baseGeometry: baseGeometry, primitives: originalPrimitives } );\r\n\r\n\t\t\t\t\treturn [ geometry ];\r\n\r\n\t\t\t\t} else if ( geometries.length > 1 && THREE.BufferGeometryUtils !== undefined ) {\r\n\r\n\t\t\t\t\t// Tries to merge geometries with BufferGeometryUtils if possible\r\n\r\n\t\t\t\t\tfor ( var i = 1, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t// can't merge if draw mode is different\r\n\t\t\t\t\t\tif ( primitives[ 0 ].mode !== primitives[ i ].mode ) return geometries;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// See if we've already created this combined geometry\r\n\t\t\t\t\tvar cache = parser.multiplePrimitivesCache;\r\n\t\t\t\t\tvar cached = getCachedCombinedGeometry( cache, geometries );\r\n\r\n\t\t\t\t\tif ( cached ) {\r\n\r\n\t\t\t\t\t\tif ( cached.geometry !== null ) return [ cached.geometry ];\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar geometry = THREE.BufferGeometryUtils.mergeBufferGeometries( geometries, true );\r\n\r\n\t\t\t\t\t\tcache.push( { geometry: geometry, baseGeometries: geometries } );\r\n\r\n\t\t\t\t\t\tif ( geometry !== null ) return [ geometry ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometries;\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\r\n\t * @param {number} meshIndex\r\n\t * @return {Promise<THREE.Group|THREE.Mesh|THREE.SkinnedMesh>}\r\n\t */\r\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\r\n\r\n\t\tvar scope = this;\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\r\n\t\tvar meshDef = json.meshes[ meshIndex ];\r\n\r\n\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t'accessor',\r\n\t\t\t'material'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar primitives = meshDef.primitives;\r\n\t\t\tvar originalMaterials = [];\r\n\r\n\t\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\r\n\r\n\t\t\t\toriginalMaterials[ i ] = primitives[ i ].material === undefined\r\n\t\t\t\t\t? createDefaultMaterial()\r\n\t\t\t\t\t: dependencies.materials[ primitives[ i ].material ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn scope.loadGeometries( primitives ).then( function ( geometries ) {\r\n\r\n\t\t\t\tvar isMultiMaterial = geometries.length === 1 && geometries[ 0 ].groups.length > 0;\r\n\r\n\t\t\t\tvar meshes = [];\r\n\r\n\t\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar geometry = geometries[ i ];\r\n\t\t\t\t\tvar primitive = primitives[ i ];\r\n\r\n\t\t\t\t\t// 1. create Mesh\r\n\r\n\t\t\t\t\tvar mesh;\r\n\r\n\t\t\t\t\tvar material = isMultiMaterial ? originalMaterials : originalMaterials[ i ];\r\n\r\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\r\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\r\n\t\t\t\t\t\tprimitive.mode === undefined ) {\r\n\r\n\t\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See .markDefs()\r\n\t\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\r\n\t\t\t\t\t\t\t? new THREE.SkinnedMesh( geometry, material )\r\n\t\t\t\t\t\t\t: new THREE.Mesh( geometry, material );\r\n\r\n\t\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\r\n\r\n\t\t\t\t\t\t\tmesh.drawMode = THREE.TriangleStripDrawMode;\r\n\r\n\t\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\r\n\r\n\t\t\t\t\t\t\tmesh.drawMode = THREE.TriangleFanDrawMode;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.LineSegments( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Line( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.LineLoop( geometry, material );\r\n\r\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\r\n\r\n\t\t\t\t\t\tmesh = new THREE.Points( geometry, material );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\r\n\r\n\t\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\r\n\r\n\t\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\r\n\r\n\t\t\t\t\tassignExtrasToUserData( mesh, meshDef );\r\n\r\n\t\t\t\t\tmeshes.push( mesh );\r\n\r\n\t\t\t\t\t// 2. update Material depending on Mesh and BufferGeometry\r\n\r\n\t\t\t\t\tvar materials = isMultiMaterial ? mesh.material : [ mesh.material ];\r\n\r\n\t\t\t\t\tvar useVertexColors = geometry.attributes.color !== undefined;\r\n\t\t\t\t\tvar useFlatShading = geometry.attributes.normal === undefined;\r\n\t\t\t\t\tvar useSkinning = mesh.isSkinnedMesh === true;\r\n\t\t\t\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\r\n\t\t\t\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = materials.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar material = materials[ j ];\r\n\r\n\t\t\t\t\t\tif ( mesh.isPoints ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\r\n\r\n\t\t\t\t\t\t\tvar pointsMaterial = scope.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! pointsMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tpointsMaterial = new THREE.PointsMaterial();\r\n\t\t\t\t\t\t\t\tTHREE.Material.prototype.copy.call( pointsMaterial, material );\r\n\t\t\t\t\t\t\t\tpointsMaterial.color.copy( material.color );\r\n\t\t\t\t\t\t\t\tpointsMaterial.map = material.map;\r\n\t\t\t\t\t\t\t\tpointsMaterial.lights = false; // PointsMaterial doesn't support lights yet\r\n\r\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, pointsMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = pointsMaterial;\r\n\r\n\t\t\t\t\t\t} else if ( mesh.isLine ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\r\n\r\n\t\t\t\t\t\t\tvar lineMaterial = scope.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! lineMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tlineMaterial = new THREE.LineBasicMaterial();\r\n\t\t\t\t\t\t\t\tTHREE.Material.prototype.copy.call( lineMaterial, material );\r\n\t\t\t\t\t\t\t\tlineMaterial.color.copy( material.color );\r\n\t\t\t\t\t\t\t\tlineMaterial.lights = false; // LineBasicMaterial doesn't support lights yet\r\n\r\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, lineMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = lineMaterial;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Clone the material if it will be modified\r\n\t\t\t\t\t\tif ( useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\r\n\r\n\t\t\t\t\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\r\n\r\n\t\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\r\n\t\t\t\t\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\r\n\t\t\t\t\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\r\n\t\t\t\t\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\r\n\t\t\t\t\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\r\n\t\t\t\t\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\r\n\r\n\t\t\t\t\t\t\tvar cachedMaterial = scope.cache.get( cacheKey );\r\n\r\n\t\t\t\t\t\t\tif ( ! cachedMaterial ) {\r\n\r\n\t\t\t\t\t\t\t\tcachedMaterial = material.isGLTFSpecularGlossinessMaterial\r\n\t\t\t\t\t\t\t\t\t? extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].cloneMaterial( material )\r\n\t\t\t\t\t\t\t\t\t: material.clone();\r\n\r\n\t\t\t\t\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\r\n\t\t\t\t\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = THREE.VertexColors;\r\n\t\t\t\t\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\r\n\t\t\t\t\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\r\n\t\t\t\t\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\r\n\r\n\t\t\t\t\t\t\t\tscope.cache.add( cacheKey, cachedMaterial );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmaterial = cachedMaterial;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmaterials[ j ] = material;\r\n\r\n\t\t\t\t\t\t// workarounds for mesh and geometry\r\n\r\n\t\t\t\t\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tconsole.log( 'THREE.GLTFLoader: Duplicating UVs to support aoMap.' );\r\n\t\t\t\t\t\t\tgeometry.addAttribute( 'uv2', new THREE.BufferAttribute( geometry.attributes.uv.array, 2 ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\r\n\r\n\t\t\t\t\t\t\t// for GLTFSpecularGlossinessMaterial(ShaderMaterial) uniforms runtime update\r\n\t\t\t\t\t\t\tmesh.onBeforeRender = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].refreshUniforms;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.material = isMultiMaterial ? materials : materials[ 0 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( meshes.length === 1 ) {\r\n\r\n\t\t\t\t\treturn meshes[ 0 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar group = new THREE.Group();\r\n\r\n\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tgroup.add( meshes[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn group;\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\r\n\t * @param {number} cameraIndex\r\n\t * @return {Promise<THREE.Camera>}\r\n\t */\r\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\r\n\r\n\t\tvar camera;\r\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\r\n\t\tvar params = cameraDef[ cameraDef.type ];\r\n\r\n\t\tif ( ! params ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.type === 'perspective' ) {\r\n\r\n\t\t\tcamera = new THREE.PerspectiveCamera( THREE.Math.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\r\n\r\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\r\n\r\n\t\t\tcamera = new THREE.OrthographicCamera( params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cameraDef.name !== undefined ) camera.name = cameraDef.name;\r\n\r\n\t\tassignExtrasToUserData( camera, cameraDef );\r\n\r\n\t\treturn Promise.resolve( camera );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\r\n\t * @param {number} skinIndex\r\n\t * @return {Promise<Object>}\r\n\t */\r\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\r\n\r\n\t\tvar skinDef = this.json.skins[ skinIndex ];\r\n\r\n\t\tvar skinEntry = { joints: skinDef.joints };\r\n\r\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\r\n\r\n\t\t\treturn Promise.resolve( skinEntry );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\r\n\r\n\t\t\tskinEntry.inverseBindMatrices = accessor;\r\n\r\n\t\t\treturn skinEntry;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\r\n\t * @param {number} animationIndex\r\n\t * @return {Promise<THREE.AnimationClip>}\r\n\t */\r\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\r\n\r\n\t\tvar json = this.json;\r\n\r\n\t\tvar animationDef = json.animations[ animationIndex ];\r\n\r\n\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t'accessor',\r\n\t\t\t'node'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar tracks = [];\r\n\r\n\t\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar channel = animationDef.channels[ i ];\r\n\t\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\r\n\r\n\t\t\t\tif ( sampler ) {\r\n\r\n\t\t\t\t\tvar target = channel.target;\r\n\t\t\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\r\n\t\t\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\r\n\t\t\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\r\n\r\n\t\t\t\t\tvar inputAccessor = dependencies.accessors[ input ];\r\n\t\t\t\t\tvar outputAccessor = dependencies.accessors[ output ];\r\n\r\n\t\t\t\t\tvar node = dependencies.nodes[ name ];\r\n\r\n\t\t\t\t\tif ( node ) {\r\n\r\n\t\t\t\t\t\tnode.updateMatrix();\r\n\t\t\t\t\t\tnode.matrixAutoUpdate = true;\r\n\r\n\t\t\t\t\t\tvar TypedKeyframeTrack;\r\n\r\n\t\t\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\r\n\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.weights:\r\n\r\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.NumberKeyframeTrack;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.rotation:\r\n\r\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.QuaternionKeyframeTrack;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.position:\r\n\t\t\t\t\t\t\tcase PATH_PROPERTIES.scale:\r\n\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\tTypedKeyframeTrack = THREE.VectorKeyframeTrack;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\r\n\r\n\t\t\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : THREE.InterpolateLinear;\r\n\r\n\t\t\t\t\t\tvar targetNames = [];\r\n\r\n\t\t\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\r\n\r\n\t\t\t\t\t\t\t// node can be THREE.Group here but\r\n\t\t\t\t\t\t\t// PATH_PROPERTIES.weights(morphTargetInfluences) should be\r\n\t\t\t\t\t\t\t// the property of a mesh object under group.\r\n\r\n\t\t\t\t\t\t\tnode.traverse( function ( object ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\r\n\r\n\t\t\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\ttargetNames.push( targetName );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// KeyframeTrack.optimize() will modify given 'times' and 'values'\r\n\t\t\t\t\t\t// buffers before creating a truncated copy to keep. Because buffers may\r\n\t\t\t\t\t\t// be reused by other tracks, make copies here.\r\n\t\t\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar track = new TypedKeyframeTrack(\r\n\t\t\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\r\n\t\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( inputAccessor.array, 0 ),\r\n\t\t\t\t\t\t\t\tTHREE.AnimationUtils.arraySlice( outputAccessor.array, 0 ),\r\n\t\t\t\t\t\t\t\tinterpolation\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Here is the trick to enable custom interpolation.\r\n\t\t\t\t\t\t\t// Overrides .createInterpolant in a factory method which creates custom interpolation.\r\n\t\t\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\r\n\r\n\t\t\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\r\n\r\n\t\t\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\r\n\t\t\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\r\n\t\t\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\r\n\r\n\t\t\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\r\n\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t// Workaround, provide an alternate way to know if the interpolant type is cubis spline to track.\r\n\t\t\t\t\t\t\t\t// track.getInterpolation() doesn't return valid value for custom interpolant.\r\n\t\t\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ttracks.push( track );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar name = animationDef.name !== undefined ? animationDef.name : 'animation_' + animationIndex;\r\n\r\n\t\t\treturn new THREE.AnimationClip( name, undefined, tracks );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\r\n\t * @param {number} nodeIndex\r\n\t * @return {Promise<THREE.Object3D>}\r\n\t */\r\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\r\n\r\n\t\tvar json = this.json;\r\n\t\tvar extensions = this.extensions;\r\n\r\n\t\tvar meshReferences = json.meshReferences;\r\n\t\tvar meshUses = json.meshUses;\r\n\r\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\r\n\r\n\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t'mesh',\r\n\t\t\t'skin',\r\n\t\t\t'camera',\r\n\t\t\t'light'\r\n\r\n\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\tvar node;\r\n\r\n\t\t\t// .isBone isn't in glTF spec. See .markDefs\r\n\t\t\tif ( nodeDef.isBone === true ) {\r\n\r\n\t\t\t\tnode = new THREE.Bone();\r\n\r\n\t\t\t} else if ( nodeDef.mesh !== undefined ) {\r\n\r\n\t\t\t\tvar mesh = dependencies.meshes[ nodeDef.mesh ];\r\n\r\n\t\t\t\tif ( meshReferences[ nodeDef.mesh ] > 1 ) {\r\n\r\n\t\t\t\t\tvar instanceNum = meshUses[ nodeDef.mesh ] ++;\r\n\r\n\t\t\t\t\tnode = mesh.clone();\r\n\t\t\t\t\tnode.name += '_instance_' + instanceNum;\r\n\r\n\t\t\t\t\t// onBeforeRender copy for Specular-Glossiness\r\n\t\t\t\t\tnode.onBeforeRender = mesh.onBeforeRender;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = node.children.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tnode.children[ i ].name += '_instance_' + instanceNum;\r\n\t\t\t\t\t\tnode.children[ i ].onBeforeRender = mesh.children[ i ].onBeforeRender;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tnode = mesh;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( nodeDef.camera !== undefined ) {\r\n\r\n\t\t\t\tnode = dependencies.cameras[ nodeDef.camera ];\r\n\r\n\t\t\t} else if ( nodeDef.extensions\r\n\t\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ]\r\n\t\t\t\t\t && nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light !== undefined ) {\r\n\r\n\t\t\t\tvar lights = extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].lights;\r\n\t\t\t\tnode = lights[ nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnode = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nodeDef.name !== undefined ) {\r\n\r\n\t\t\t\tnode.name = THREE.PropertyBinding.sanitizeNodeName( nodeDef.name );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tassignExtrasToUserData( node, nodeDef );\r\n\r\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\r\n\r\n\t\t\tif ( nodeDef.matrix !== undefined ) {\r\n\r\n\t\t\t\tvar matrix = new THREE.Matrix4();\r\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\r\n\t\t\t\tnode.applyMatrix( matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\r\n\r\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\r\n\r\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn node;\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\r\n\t * @param {number} sceneIndex\r\n\t * @return {Promise<THREE.Scene>}\r\n\t */\r\n\tGLTFParser.prototype.loadScene = function () {\r\n\r\n\t\t// scene node hierachy builder\r\n\r\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, allNodes, skins ) {\r\n\r\n\t\t\tvar node = allNodes[ nodeId ];\r\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\r\n\r\n\t\t\t// build skeleton here as well\r\n\r\n\t\t\tif ( nodeDef.skin !== undefined ) {\r\n\r\n\t\t\t\tvar meshes = node.isGroup === true ? node.children : [ node ];\r\n\r\n\t\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar mesh = meshes[ i ];\r\n\t\t\t\t\tvar skinEntry = skins[ nodeDef.skin ];\r\n\r\n\t\t\t\t\tvar bones = [];\r\n\t\t\t\t\tvar boneInverses = [];\r\n\r\n\t\t\t\t\tfor ( var j = 0, jl = skinEntry.joints.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\tvar jointId = skinEntry.joints[ j ];\r\n\t\t\t\t\t\tvar jointNode = allNodes[ jointId ];\r\n\r\n\t\t\t\t\t\tif ( jointNode ) {\r\n\r\n\t\t\t\t\t\t\tbones.push( jointNode );\r\n\r\n\t\t\t\t\t\t\tvar mat = new THREE.Matrix4();\r\n\r\n\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tboneInverses.push( mat );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', jointId );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmesh.bind( new THREE.Skeleton( bones, boneInverses ), mesh.matrixWorld );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// build node hierachy\r\n\r\n\t\t\tparentObject.add( node );\r\n\r\n\t\t\tif ( nodeDef.children ) {\r\n\r\n\t\t\t\tvar children = nodeDef.children;\r\n\r\n\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar child = children[ i ];\r\n\t\t\t\t\tbuildNodeHierachy( child, node, json, allNodes, skins );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn function loadScene( sceneIndex ) {\r\n\r\n\t\t\tvar json = this.json;\r\n\t\t\tvar extensions = this.extensions;\r\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\r\n\r\n\t\t\treturn this.getMultiDependencies( [\r\n\r\n\t\t\t\t'node',\r\n\t\t\t\t'skin'\r\n\r\n\t\t\t] ).then( function ( dependencies ) {\r\n\r\n\t\t\t\tvar scene = new THREE.Scene();\r\n\t\t\t\tif ( sceneDef.name !== undefined ) scene.name = sceneDef.name;\r\n\r\n\t\t\t\tassignExtrasToUserData( scene, sceneDef );\r\n\r\n\t\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\r\n\r\n\t\t\t\tvar nodeIds = sceneDef.nodes || [];\r\n\r\n\t\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tbuildNodeHierachy( nodeIds[ i ], scene, json, dependencies.nodes, dependencies.skins );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn scene;\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\treturn GLTFLoader;\r\n\r\n} )();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/GLTFLoader.js","module.exports = {\"O_RDONLY\":0,\"O_WRONLY\":1,\"O_RDWR\":2,\"S_IFMT\":61440,\"S_IFREG\":32768,\"S_IFDIR\":16384,\"S_IFCHR\":8192,\"S_IFBLK\":24576,\"S_IFIFO\":4096,\"S_IFLNK\":40960,\"S_IFSOCK\":49152,\"O_CREAT\":512,\"O_EXCL\":2048,\"O_NOCTTY\":131072,\"O_TRUNC\":1024,\"O_APPEND\":8,\"O_DIRECTORY\":1048576,\"O_NOFOLLOW\":256,\"O_SYNC\":128,\"O_SYMLINK\":2097152,\"O_NONBLOCK\":4,\"S_IRWXU\":448,\"S_IRUSR\":256,\"S_IWUSR\":128,\"S_IXUSR\":64,\"S_IRWXG\":56,\"S_IRGRP\":32,\"S_IWGRP\":16,\"S_IXGRP\":8,\"S_IRWXO\":7,\"S_IROTH\":4,\"S_IWOTH\":2,\"S_IXOTH\":1,\"E2BIG\":7,\"EACCES\":13,\"EADDRINUSE\":48,\"EADDRNOTAVAIL\":49,\"EAFNOSUPPORT\":47,\"EAGAIN\":35,\"EALREADY\":37,\"EBADF\":9,\"EBADMSG\":94,\"EBUSY\":16,\"ECANCELED\":89,\"ECHILD\":10,\"ECONNABORTED\":53,\"ECONNREFUSED\":61,\"ECONNRESET\":54,\"EDEADLK\":11,\"EDESTADDRREQ\":39,\"EDOM\":33,\"EDQUOT\":69,\"EEXIST\":17,\"EFAULT\":14,\"EFBIG\":27,\"EHOSTUNREACH\":65,\"EIDRM\":90,\"EILSEQ\":92,\"EINPROGRESS\":36,\"EINTR\":4,\"EINVAL\":22,\"EIO\":5,\"EISCONN\":56,\"EISDIR\":21,\"ELOOP\":62,\"EMFILE\":24,\"EMLINK\":31,\"EMSGSIZE\":40,\"EMULTIHOP\":95,\"ENAMETOOLONG\":63,\"ENETDOWN\":50,\"ENETRESET\":52,\"ENETUNREACH\":51,\"ENFILE\":23,\"ENOBUFS\":55,\"ENODATA\":96,\"ENODEV\":19,\"ENOENT\":2,\"ENOEXEC\":8,\"ENOLCK\":77,\"ENOLINK\":97,\"ENOMEM\":12,\"ENOMSG\":91,\"ENOPROTOOPT\":42,\"ENOSPC\":28,\"ENOSR\":98,\"ENOSTR\":99,\"ENOSYS\":78,\"ENOTCONN\":57,\"ENOTDIR\":20,\"ENOTEMPTY\":66,\"ENOTSOCK\":38,\"ENOTSUP\":45,\"ENOTTY\":25,\"ENXIO\":6,\"EOPNOTSUPP\":102,\"EOVERFLOW\":84,\"EPERM\":1,\"EPIPE\":32,\"EPROTO\":100,\"EPROTONOSUPPORT\":43,\"EPROTOTYPE\":41,\"ERANGE\":34,\"EROFS\":30,\"ESPIPE\":29,\"ESRCH\":3,\"ESTALE\":70,\"ETIME\":101,\"ETIMEDOUT\":60,\"ETXTBSY\":26,\"EWOULDBLOCK\":35,\"EXDEV\":18,\"SIGHUP\":1,\"SIGINT\":2,\"SIGQUIT\":3,\"SIGILL\":4,\"SIGTRAP\":5,\"SIGABRT\":6,\"SIGIOT\":6,\"SIGBUS\":10,\"SIGFPE\":8,\"SIGKILL\":9,\"SIGUSR1\":30,\"SIGSEGV\":11,\"SIGUSR2\":31,\"SIGPIPE\":13,\"SIGALRM\":14,\"SIGTERM\":15,\"SIGCHLD\":20,\"SIGCONT\":19,\"SIGSTOP\":17,\"SIGTSTP\":18,\"SIGTTIN\":21,\"SIGTTOU\":22,\"SIGURG\":16,\"SIGXCPU\":24,\"SIGXFSZ\":25,\"SIGVTALRM\":26,\"SIGPROF\":27,\"SIGWINCH\":28,\"SIGIO\":23,\"SIGSYS\":12,\"SSL_OP_ALL\":2147486719,\"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION\":262144,\"SSL_OP_CIPHER_SERVER_PREFERENCE\":4194304,\"SSL_OP_CISCO_ANYCONNECT\":32768,\"SSL_OP_COOKIE_EXCHANGE\":8192,\"SSL_OP_CRYPTOPRO_TLSEXT_BUG\":2147483648,\"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS\":2048,\"SSL_OP_EPHEMERAL_RSA\":0,\"SSL_OP_LEGACY_SERVER_CONNECT\":4,\"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER\":32,\"SSL_OP_MICROSOFT_SESS_ID_BUG\":1,\"SSL_OP_MSIE_SSLV2_RSA_PADDING\":0,\"SSL_OP_NETSCAPE_CA_DN_BUG\":536870912,\"SSL_OP_NETSCAPE_CHALLENGE_BUG\":2,\"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG\":1073741824,\"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG\":8,\"SSL_OP_NO_COMPRESSION\":131072,\"SSL_OP_NO_QUERY_MTU\":4096,\"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION\":65536,\"SSL_OP_NO_SSLv2\":16777216,\"SSL_OP_NO_SSLv3\":33554432,\"SSL_OP_NO_TICKET\":16384,\"SSL_OP_NO_TLSv1\":67108864,\"SSL_OP_NO_TLSv1_1\":268435456,\"SSL_OP_NO_TLSv1_2\":134217728,\"SSL_OP_PKCS1_CHECK_1\":0,\"SSL_OP_PKCS1_CHECK_2\":0,\"SSL_OP_SINGLE_DH_USE\":1048576,\"SSL_OP_SINGLE_ECDH_USE\":524288,\"SSL_OP_SSLEAY_080_CLIENT_DH_BUG\":128,\"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG\":0,\"SSL_OP_TLS_BLOCK_PADDING_BUG\":512,\"SSL_OP_TLS_D5_BUG\":256,\"SSL_OP_TLS_ROLLBACK_BUG\":8388608,\"ENGINE_METHOD_DSA\":2,\"ENGINE_METHOD_DH\":4,\"ENGINE_METHOD_RAND\":8,\"ENGINE_METHOD_ECDH\":16,\"ENGINE_METHOD_ECDSA\":32,\"ENGINE_METHOD_CIPHERS\":64,\"ENGINE_METHOD_DIGESTS\":128,\"ENGINE_METHOD_STORE\":256,\"ENGINE_METHOD_PKEY_METHS\":512,\"ENGINE_METHOD_PKEY_ASN1_METHS\":1024,\"ENGINE_METHOD_ALL\":65535,\"ENGINE_METHOD_NONE\":0,\"DH_CHECK_P_NOT_SAFE_PRIME\":2,\"DH_CHECK_P_NOT_PRIME\":1,\"DH_UNABLE_TO_CHECK_GENERATOR\":4,\"DH_NOT_SUITABLE_GENERATOR\":8,\"NPN_ENABLED\":1,\"RSA_PKCS1_PADDING\":1,\"RSA_SSLV23_PADDING\":2,\"RSA_NO_PADDING\":3,\"RSA_PKCS1_OAEP_PADDING\":4,\"RSA_X931_PADDING\":5,\"RSA_PKCS1_PSS_PADDING\":6,\"POINT_CONVERSION_COMPRESSED\":2,\"POINT_CONVERSION_UNCOMPRESSED\":4,\"POINT_CONVERSION_HYBRID\":6,\"F_OK\":0,\"R_OK\":4,\"W_OK\":2,\"X_OK\":1,\"UV_UDP_REUSEADDR\":4}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_constants-browserify@1.0.0@constants-browserify/constants.json\n// module id = JpL0\n// module chunks = 2","import State from '../state/state'\nimport initGL from './Init'\nimport animation from './Animation'\nimport { outInterior, closeDoor, openLFDoor } from './Animation.Action'\nimport carConfig from '../config/carConfig'\nimport { getAssetPath, Ftween, Hex2RGB } from './Tools' \nimport { Scene, Camera, Renderer } from './Three.Constant.js'\nimport Loaders from './Loaders'\nimport getMaterial from './materials/GetMaterial'\nimport loadAssets from './LoadAssets'\nimport { getUsrData } from './Tools'\nimport Postprocessing from './Postprocessing'\nimport { setPileMaterial, switchLightTexture } from './LoadAssets.AfterModel'\nimport { hideShade } from './shade'\nimport texConfig from '../config/texConfig'\nimport { doors, showSize } from './actions'\n\n\nconst fontregl = {\n\n  initGL,\n\n  animation,\n\n  hideShade,\n\n  showSize,\n\n  showModel: async (dom, name) => {\n\n    initGL(dom)\n    animation()\n\n    // State.composer = Postprocessing[State.postprocessing]()  // 抗锯齿\n\n    if ( State.loadedCar === name && State.sceneCache.length > 0 ) {\n      // 加载缓存\n      Scene.children = State.sceneCache\n    } else {\n      await loadAssets(await getUsrData(name))\n    }\n\n  },\n\n\n  changeCarShaderColor: async ( name ) => {\n\n    let path = `${getAssetPath()}${name}`, data;\n    \n    if (process && process.env && process.env.NODE_ENV === 'development') {\n      data = await Loaders['json'](path)\n    } else {\n      data = await Loaders['ftrn'](path)\n    }\n\n    data.forEach( async material => {\n      let mesh = Scene.getObjectByName(material.name)\n      if (mesh) {\n        let { value } = mesh.material.uniforms.paintColor1\n        await Ftween(value, Hex2RGB(material.color1), 200 )\n      }\n    })\n  },\n\n\n  changeMaterials: async name => {\n\n    if ( !State.carCode ) {\n      throw Error('carCode not found! (Function: changeMaterials)')\n    }\n  \n    let color;\n    for (const item of carConfig[State.carCode].interiorColors) {\n      if (item.colorCode === name) {\n        color = item.data\n      }\n    }\n  \n    if (!color) {\n      return console.warn('InteriorColor is not found')\n    }\n  \n    let path = `${getAssetPath()}${color}`, data;\n    \n    if (process && process.env && process.env.NODE_ENV === 'development') {\n      data = await Loaders['json'](path)\n    } else {\n      data = await Loaders['ftrn'](path)\n    }\n  \n    for ( let item of data ) {\n      let material = await getMaterial(item),\n        mesh = Scene.getObjectByName(item.name)\n      if ( mesh ) {\n        mesh.material = material\n      }\n    }\n  },\n\n  async openLFDoor() {\n    return await openLFDoor()\n  },\n\n\n  modelSwitching: async modelName => {\n    let data = await getUsrData()\n    if ( data.hasOwnProperty('ModelSwitching') ) {\n\n      const models = data.ModelSwitching[modelName]\n\n      if (!models) {\n        throw Error(`${modelName} is not found!(Function: fontregl.modelSwitching)`)\n      }\n\n      for ( let item of models ) {\n        let mesh = Scene.getObjectByName(item.name)\n        if ( mesh ) { \n          if ( item.type ) {\n            let material = await getMaterial(item)\n            mesh.material= material\n          } else {\n            mesh.material.visible = item.visible\n          }\n        }\n      }\n    }\n  },\n\n\n  switchWheelAnimation (bool, speed) {\n    \n    State.isRotateWheel = bool\n\n    State.rotateWheelSpeed = speed\n\n    for (let key of Object.keys(State.spriteState)) {\n      let sprite = Scene.getObjectByName(key)\n      sprite.visible = !State.isRotateWheel\n    }\n\n    if ( State.isRotateWheel ) {\n      doors.closeAllDoor()\n    } \n  },\n\n  cancelAnimation () {\n    if ( typeof State.animateId === 'number' ) {\n      cancelAnimationFrame(State.animateId)\n      State.animateId = null\n    }\n  },\n\n\n  resize ( w, h ) {\n    Camera.aspect = w / h\n    Camera.updateProjectionMatrix()\n\t\tRenderer.setSize(w, h)\n  },\n\n\n  dispose () {\n    // cancel animation\n    this.cancelAnimation() \n\n    // freeing memory\n    for ( let i = 0; i < Scene.children.length; i++ ) {\n      console.log('remove')\n      if (Scene.children[i].material) Scene.children[i].material.dispose() \n      if (Scene.children[i].geometry) Scene.children[i].geometry.dispose()\n      Scene.remove(Scene.children[i])\n      i--\n    }\n    console.log(Scene)\n\n\n    // texture\n    for (let i in State.textureCache) {\n      State.textureCache[i].dispose()\n      delete State.textureCache[i]\n    }\n\n    // del hotspot\n    for (let k in State.hotSpotState) {\n      delete State.hotSpotState[k]\n    }\n  },\n\n\n  changeView (name) {\n    this.modelSwitching(name)\n  },\n\n\n  async openLights (bool) {\n    // 炫光方法\n\n    let { SpriteLights } = await getUsrData()\n\n    State.isOpenLight = bool\n\n    // sprite方法\n    for(let i=0, len=SpriteLights.length; i<len; i++) {\n      let leftLight = Scene.getObjectByName(`light_l_${i}`)\n      let rightLight = Scene.getObjectByName(`light_r_${i}`)\n\n      leftLight.visible = State.isOpenLight\n      rightLight.visible = State.isOpenLight\n    }\n    \n    // 切换车灯玻璃\n    let lightGlass = Scene.getObjectByName('12_headlighting_glass.drc')\n    lightGlass.visible = !State.isOpenLight\n\n    // switchLightTexture(State.isOpenLight)\n  },\n\n\n\n  async resetCamera () {\n    await closeDoor(true) // 这里需要主动关门并重置热点状态\n    await outInterior()\n  },\n\n  async showSellPoint (bool) {\n    let { Sprites } = await getUsrData()\n\n    State.isShowSellPoints = bool\n\n    let count = 0\n    for(let i=0, len=Sprites.length; i<len; i++){\n      count++\n      if(count <= 2){\n        let sprite = Scene.getObjectByName(`spark_tip_0${count}`)\n        sprite.visible = State.isShowSellPoints\n      }else{\n        break\n      }\n    }\n  }\n\n}\n\n\n\n\nexport default fontregl\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/InterFace.js","import { Scene, TextureLoader } from './Three.Constant'\nimport { getAssetPath, getUsrData } from './Tools' \nimport State from '../state/state'\nimport getCarPaintShader from './materials/CarPaintShader'\nimport texConfig from '../config/texConfig'\n\nconst THREE  = require('three')\n\n/**\n * 新版车灯\n */\nexport async function  addSpriteCarLight (){\n  let { SpriteLights } = await getUsrData()\n\n  let lightArr = SpriteLights\n\n  // let count = 0\n  for(let i=0, len=lightArr.length; i<len; i++){\n    let obj = lightArr[i]\n    let material = new THREE.SpriteMaterial({ \n      transparent: true,\n      blending: THREE.AdditiveBlending,\n      needsUpdate: true,\n    })\n\n    let sprite = new THREE.Sprite( material )\n    let spriteRight = new THREE.Sprite( material )\n    if(obj.type === 'front'){\n      // test\n      // let size = 38\n      let size = obj.size\n      let texture = TextureLoader.load(`${getAssetPath()}textures/${obj.imgPath}`)\n      sprite.material.map = texture\n      sprite.scale.set(size, size, size)\n      sprite.position.set(obj.pos[0], obj.pos[2] - 81, -obj.pos[1])\n      \n      spriteRight.material.map = texture\n      spriteRight.scale.set(size, size, size)\n      spriteRight.position.set(obj.pos[0], obj.pos[2] - 81, -(-obj.pos[1]))\n    }\n    if(obj.type === 'back'){\n      // test\n      // let size = 18\n      let size = obj.size\n      let texture = TextureLoader.load(`${getAssetPath()}textures/${obj.imgPath}`)\n      sprite.material.map = texture\n      sprite.scale.set(size, size, size)\n      sprite.position.set(obj.pos[0], obj.pos[2] - 80, -obj.pos[1])\n      \n      spriteRight.material.map = texture\n      spriteRight.scale.set(size, size, size)\n      spriteRight.position.set(obj.pos[0], obj.pos[2] - 80, -(-obj.pos[1]))\n    }\n\n    sprite.name = `light_l_${i}`\n    spriteRight.name = `light_r_${i}`\n    sprite.visible = false\n    spriteRight.visible = false\n\n    if(obj.follow){\n      // 车厢尾灯绑定至尾灯面片\n      if(obj.follow === '38_trunk_light_map_c.drc'){\n        let mesh = Scene.getObjectByName('38_trunk_light_map_c.drc')\n        mesh.add(sprite)\n        mesh.add(spriteRight)\n      }\n    }else{\n      Scene.add(sprite)\n      Scene.add(spriteRight)\n    }\n\n  }\n}\n\n/**\n * 切换尾灯亮度\n * @param {*} bool \n */\nexport async function switchLightTexture (bool){\n  let lightPath = 'headlight_map_c.png'\n  let noLightPath = 'headlight_map_c.jpg'\n  let texBackLight = TextureLoader.load(`${getAssetPath()}textures/${lightPath}`)\n  let texNoBackLight = TextureLoader.load(`${getAssetPath()}textures/${noLightPath}`)\n\n  // let { Materials } = await getUsrData()\n\n  let arr = ['61_lighting_map_c.drc', '38_trunk_light_map_c.drc']\n\n  if(bool){\n    for(let obj of arr){\n      let mesh = Scene.getObjectByName(obj)\n      mesh.material.map = texBackLight\n      mesh.material.needsUpdate = true\n    }\n  }else{\n    for(let obj of arr){\n      let mesh = Scene.getObjectByName(obj)\n      mesh.material.map = texNoBackLight\n      mesh.material.needsUpdate = true\n    }\n  }\n}\n\n\n// 添加地板\nexport async function loadFloor () {\n\n  let { Floor } = await getUsrData()\n  let { FogSky } = await getUsrData()\n\n  // 地板\n  if (Floor) {\n\n    let { x, y } = Floor.repeat,\n      { width, height} = Floor.size;\n    // texture\n    let texture = new THREE.TextureLoader().load( `${window.FONTRE_PATH}/project/${State.carCode}/assets/textures/${Floor.name}` );\n    // let normal = new THREE.TextureLoader().load( `${window.FONTRE_PATH}/project/${State.carCode}/assets/textures/${Floor.normal}` );\n    texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n    texture.repeat.set( x, y )\n\n    // geometry\n    let geo = new THREE.PlaneGeometry(width, height)\n\n    let material = new THREE.MeshStandardMaterial({\n      color: Floor.color,\n      map: texture,\n      // normalMap: normal,\n      roughness: 1,\n      side: THREE.DoubleSide\n    })\n\n    let plane = new THREE.Mesh(geo, material)\n    plane.name = Floor.name\n    plane.rotateX(Math.PI/2)\n    plane.position.set(0, -81, 0)\n\n    Scene.add(plane)\n\n    // let skybox = Scene.getObjectByName('scene_02_map_c.drc')\n    // skybox.material.fog = false\n    // skybox.material.needsUpdate = true\n    // skybox.position.set(0, 50, 0)\n\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/LoadAssets.AfterModel.js","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nconst Detector = {\n\n\tcanvas: !! window.CanvasRenderingContext2D,\n\twebgl: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\twebgl2: ( function () {\n\n\t\ttry {\n\n\t\t\tvar canvas = document.createElement( 'canvas' ); return !! ( window.WebGL2RenderingContext && ( canvas.getContext( 'webgl2' ) ) );\n\n\t\t} catch ( e ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t} )(),\n\tworkers: !! window.Worker,\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n\tgetWebGLErrorMessage: function () {\n\n\t\tvar element = document.createElement( 'div' );\n\t\telement.id = 'webgl-error-message';\n\t\telement.style.fontFamily = 'monospace';\n\t\telement.style.fontSize = '13px';\n\t\telement.style.fontWeight = 'normal';\n\t\telement.style.textAlign = 'center';\n\t\telement.style.background = '#fff';\n\t\telement.style.color = '#000';\n\t\telement.style.padding = '1.5em';\n\t\telement.style.width = '400px';\n\t\telement.style.margin = '5em auto 0';\n\n\t\tif ( ! this.webgl ) {\n\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' ) : [\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n\t\t\t].join( '\\n' );\n\n\t\t}\n\n\t\treturn element;\n\n\t},\n\n\taddGetWebGLMessage: function ( parameters ) {\n\n\t\tvar parent, id, element;\n\n\t\tparameters = parameters || {};\n\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\n\n\t\telement = Detector.getWebGLErrorMessage();\n\t\telement.id = id;\n\n\t\tparent.appendChild( element );\n\n\t}\n\n};\n\n\nexport default Detector\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Detector.js","/* eslint-disable */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Stats = factory());\n}(this, (function () { 'use strict';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;bottom:0;left:0;cursor:pointer;opacity:0.9;z-index:10000;';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time > prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nreturn Stats;\n\n})));\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/Stats.js","import { Mouse, Raycaster, Scene, Camera } from './Three.Constant.js'\nimport { getUsrData, Ftween } from './Tools'\nimport State from '../state/state'\nimport { toInterior, outInterior } from './Animation.Action.js'\n\nconst THREE = require('three')\nconst TWEEN = require('@tweenjs/tween.js'),\n  OUT = TWEEN.Easing.Circular.Out,\n  IN = TWEEN.Easing.Circular.In;\n\nlet lock = null\n\n\n\n\nlet actions = {\n\n  // 打开天窗\n  async openSunroof (data) {\n\n    if (lock ) return \n\n    // 隐藏显示热点\n    let spriteMesh = Scene.getObjectByName('00_sunroof_tip')\n    // spriteMesh.visible = !State.hotSpotState[data.name]\n\n    let radian = Math.PI / 180 * 6\n    lock = true\n\n\n    for (let item of data.models) {\n      let mesh = Scene.getObjectByName(item.name)\n\n      if ( State.hotSpotState[data.name]) {\n        await Ftween(mesh.position, { y: mesh.position.y + 1 }, 300 )\n        Ftween(mesh.rotation, { z: -radian }, 1500)\n        Ftween(spriteMesh.position, { x: mesh.position.x + 40 }, 1500 )\n        await Ftween(mesh.position, { x: mesh.position.x + 40 }, 1500 )\n\n      } else {\n        Ftween(mesh.rotation, { z: 0 }, 1500)\n        Ftween(spriteMesh.position, { x: mesh.position.x - 40 }, 1500 )\n        await Ftween(mesh.position, {x: mesh.position.x - 40 }, 1500)\n        await Ftween(mesh.position, { y: mesh.position.y - 1 }, 300 )\n      }\n    }\n    lock = false\n  }\n}\n\n\nexport const bindEvent = function (dom, e) {\n\n  e.preventDefault()\n  let x = e.offsetX / dom.clientWidth * 2 - 1, \n      y = -(e.offsetY / dom.clientHeight) * 2 + 1\n\n  Mouse.set(x, y)\n\n  Raycaster.setFromCamera(Mouse, Camera)\n  let intersects = Raycaster.intersectObjects(Scene.children, true)\n\n  if (intersects.length > 0) {\n    for (let i = 0; i < intersects.length; i++) {\n      onClickMesh(intersects[i].object)\n      return \n    }\n  }\n}\n\n\nexport async function onClickMesh(mesh) {\n  console.log(mesh.name)\n\n  if (State.isRotateWheel) return \n\n  clickSellPoint(mesh.name)\n\n  clickToInteriorPoint(mesh.name)\n  \n  let { Hotspot } = await getUsrData()\n  if ( Hotspot && Hotspot.length > 0 ) {\n    for (const hot of Hotspot) {\n      if (Array.isArray(hot.hotspot)) {\n        for ( const name of hot.hotspot ) {\n          if ( name === mesh.name ) {\n            openDoor(hot)\n          }\n        }\n      } else {\n        throw Error ('HotSpot hotspots are not Array')\n      }\n    }\n  }\n}\n\n/**\n * 点击卖点\n * @param {String} name \n */\nconst clickSellPoint = (name) => {\n  if(name.indexOf('spark_tip_') >= 0){\n    window.FontreGL.activeSellPoint(name)\n  }\n}\n\n/**\n * 点击进入内饰热点\n */\nconst clickToInteriorPoint = (name) => {\n  if(name === 'to_interior_tip'){\n    window.FontreGL.activeToInteriorPoint()\n  }\n}\n\nasync function openDoor ( data ) {\n\n  if (lock) return\n\n  let { models, name, electricDoor } = data, callBack;\n\n  State.hotSpotState[name] = !State.hotSpotState[name] \n  console.log(name)\n  // 天窗\n  if (name === 'open_sunroof') {\n    return await actions[data.function](data)\n  }\n\n  //隐藏车门黑线\n  if ( data.blackLine ) {\n    for (const item of data.blackLine) {\n      Scene.getObjectByName(item).visible = !State.hotSpotState[name]\n    }\n  }\n\n\n  let tweenAll = []\n  lock = true\n  models.forEach( item => {\n    let mesh = Scene.getObjectByName(item.name)\n\n    if (!mesh) return \n    \n    if ( State.spriteState[item.name] instanceof THREE.Sprite ) {\n      State.spriteState[item.name].visible = !State.hotSpotState[name]\n    }\n    \n    let [ x, y, z ] = State.hotSpotState[name] ? item.targetAngle.map( i => - Math.PI * i / 180 ) : [ 0, 0, 0]\n\n    if ( !State.hotSpotState[name] && electricDoor ) {\n      [x , y, z] = item.targetAngle.map( i => -Math.PI * (i / 10) / 180)\n      callBack = () => Ftween(mesh.rotation, {x: 0, y:0, z: 0}, 300, IN)\n    }\n    \n    tweenAll.push(Ftween(mesh.rotation, {x, y, z}, 800, OUT, callBack))\n  })\n\n  await Promise.all(tweenAll)\n  \n \n\n  lock = false  \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Event.js","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\n\nconst THREE = require('three')\n\nTHREE.CopyShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null },\n\t\t\"opacity\":  { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform float opacity;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\t\"gl_FragColor = opacity * texel;\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/CopyShader.js","\n\nconst Utf8ArrayToStr = array => {\n    let len = array.length,\n        out = \"\",\n        i = 0,\n        char2,\n        char3,\n        c;\n\n    while (i < len) {\n      c = array[i++];\n      switch (c >> 4) {\n        case 0:\n        case 1:\n        case 2:\n        case 3:\n        case 4:\n        case 5:\n        case 6:\n        case 7:\n          // 0xxxxxxx\n          out += String.fromCharCode(c);\n          break;\n\n        case 12:\n        case 13:\n          // 110x xxxx   10xx xxxx\n          char2 = array[i++];\n          out += String.fromCharCode(((c & 0x1f) << 6) | (char2 & 0x3f));\n          break;\n\n        case 14:\n          // 1110 xxxx  10xx xxxx  10xx xxxx\n          char2 = array[i++];\n          char3 = array[i++];\n          out += String.fromCharCode(\n            ((c & 0x0f) << 12) | ((char2 & 0x3f) << 6) | ((char3 & 0x3f) << 0)\n          );\n          break;\n        default:\n         break\n      }\n    }\n    return out;\n  }\n\nconst AsciiArrayToStr = array => {\n  let out = \"\",\n    i = 0,\n    len = array.length;\n  let c;\n  while (i < len) {\n    c = array[i++];\n    if (c === 0) {\n      break;\n    }\n    out += String.fromCharCode(c);\n  }\n  return out;\n}\n\nconst ArrayToint32 = function (array) {\n  return (array[0] & 0xff) | ((array[1] & 0xff) << 8) | ((array[2] & 0xff) << 16) | ((array[3] & 0xff) << 24) \n}\n\n\n\nexport { Utf8ArrayToStr, AsciiArrayToStr, ArrayToint32}\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/compute.js","\n/**\n * 加载 js 文件\n * @param {string} path \n */\nconst loadJSFile = function (path) {\n  const head = document.getElementsByTagName(\"head\")[0],\n      element = document.createElement(\"script\")\n\n  element.type = \"text/javascript\"\n  element.src = path\n\n  head.appendChild(element)\n\n  return new Promise( resolve => {\n      element.onload = () => resolve()\n  })\n}\nexport { loadJSFile }\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/utils.js","import carConfig from '../config/carConfig'\nimport State from '../state/state'\nimport { loadJSFile } from '../utils'\n\n\nexport default new class {\n\n  constructor () {\n    this.krpano = null\n    this.carCode = null\n  }\n\n  async init (id, carCode, exterColor, interColor) {\n    checkArguments(arguments) \n    this.carCode = carCode\n\n    const Pano = carConfig[carCode].pano\n  \n    if (!window.embedpano) {\n      await loadJSFile(carConfig[carCode].pano.jsFile)\n    }\n\n    let xml = Pano.xml_file,\n        panoEx = Pano.exteriorHotspot[exterColor],\n        panoIn = Pano.interiorScreen[interColor]\n  \n    return await this.showPano(xml, id, panoEx, panoIn)\n  }\n\n\n  // 显示内饰全景\n  showPano ( xml, id, exteriors, interior ) {\n\n    return new Promise ( res => {\n      window.embedpano({\n        id:\"fontrePano\",\n        xml: xml,\n        target: id,\n        html5: \"only\",\n        mobilescale: 1.0,\n        passQueryParameters: true,\n        vars: { onstart: `set(startscene, ${interior})` },\n        onready: krpanoReady\n      })\n      this.krpano = document.querySelector('#fontrePano')\n      function krpanoReady(krpano) {\n        console.log(\"krpanoReady\")\n        if (exteriors.length > 0) {\n          for (let item of exteriors) {\n            krpano.call(`set_hotspot_display(${item})`)\n          }\n        }\n        res()\n      }\n    })\n  }\n\n\n  // 改变外观颜色\n  changeExterColor (color) {\n    if ( !State.carCode ) return console.warn('pano carCode is null')\n    const hotspots = carConfig[State.carCode].pano.exteriorHotspot[color]\n    if ( this.krpano ) {\n      this.krpano.call(\"set_hotspot_transparent\")\n\n      if (hotspots.length > 0 ) {\n        for (let item of hotspots) {\n          this.krpano.call(`set_hotspot_display(${item})`)\n        }\n      }\n    } \n  }\n\n\n  // 改变内饰颜色\n  changeInterColor(color) {\n    if ( !State.carCode ) return console.warn('pano carCode is null')\n\n    const scene = carConfig[State.carCode].pano.interiorScreen[color]\n\n    if ( !scene ) {\n      throw Error(`get pano interiorScreen [${color}] fail! (Function: pano.changeInterColor)`)\n    }\n    \n    if ( this.krpano ) {\n      this.krpano.call(`fontre_load_scene(${scene})`)\n      // this.krpano.call(color)\n      // this.krpano.set(\"interiorColor\", color)\n    }\n  }\n\n\n  hideHotSpot (bool) {\n    if ( this.krpano ) {\n      if(!bool){\n        this.krpano.call(`hotspot_display_none`)\n      }else{\n        this.krpano.call(`hotspot_display_block`)\n      }\n      \n    }\n  }\n\n  toggleVR () {\n    if ( this.krpano ) {\n      this.krpano.call(`toggleVR`)\n    }\n  }\n\n\n  // remove pano\n  dispose () {\n    if ( window.removepano ) {\n      this.krpano = null\n      window.removepano('fontrePano')\n      return\n    }\n  }\n\n}()\n\n\n\n\n// 检查参数\nfunction checkArguments(arr) {\n  // if (!document.querySelector(`#${arr[0]}`)) {\n  //   throw Error(`element [${arr[0]}] is not exist！(Function:initPano)`)\n  // }\n  if ( !carConfig[arr[1]].pano ) {\n    throw Error(`${arr[1]} config [pano] is not exist！(Function:initPano)`)\n  }\n\n  if ( !carConfig[arr[1]].pano.interiorScreen ||  !carConfig[arr[1]].pano.exteriorHotspot ) {\n    throw Error(`${arr[1]} [pano] config is not exist！(Function:initPano)`)\n  }\n\n  if ( !carConfig[arr[1]].pano.exteriorHotspot[arr[2]] ) {\n    throw Error(`${arr[1]} [pano] exteriorHotspot  [${arr[2]}]  is not found! (Function:initPano)`)\n  }\n\n  if ( !carConfig[arr[1]].pano.interiorScreen[arr[3]] ) {\n    throw Error(`${arr[1]} [pano] interiorScreen [${arr[3]}] is not found! (Function:initPano)`)\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/pano/Init.js","/**\n *  entry \n */\n\nimport State from './state/state'\nimport process from './three/process/Process'\nimport { getAssetPath, getUsrData } from './three/Tools'\nimport { Scene, Orbit } from './three/Three.Constant.js'\nimport pano from './pano/Init'\nimport fontregl from './three/InterFace'\nimport { toInterior, outInterior } from './three/Animation.Action'\nimport { addChargeModelFBX } from './three/LoadAssets.AfterModel'\nimport Loaders from './three/Loaders'\nimport Detector from './three/Detector'\n\nwindow.fontre = new class {\n\n  constructor() {\n    this.debug = State.debug\n    console.log(`svw verison: ${State.version}`)\n  }\n\n  supportWebgl() {\n    return Detector.webgl\n  }\n\n  // 显示外饰 \n  async showExterior (dom, carCode, exteriorColor, interiorColor) {\n\n    // init 状态\n    State.carCode = carCode\n    State.isLoading = true\n\n    process.processShow()\n\n    await fontregl.showModel(dom, carCode)\n\n    if ( State.isCancel ) {\n      State.isCancel = false\n      process.processNum(0) // 进度条归0\n      fontregl.dispose()  // 释放gl内存\n      return \n    }\n    \n    State.isLoading = false\n    State.loadedCar = carCode\n    process.processHide()\n\n    await this.changeExteriorColor(exteriorColor)\n    await this.changeInteriorColor(interiorColor)\n\n  }\n\n\n  //  显示内饰\n  async showInterior(idName, carCode, exteriorColor, interiorColor) {\n\n    State.carCode = carCode\n\n    if ( State.loadedCar === carCode && State.sceneCache.length > 0 ) {\n      Scene.children = State.sceneCache\n    }\n    \n    fontregl.cancelAnimation() \n    await pano.init(...arguments)\n  }\n\n  \n  async changeExteriorColor(colorCode) {\n    await fontregl.changeCarShaderColor(colorCode) \n    await pano.changeExterColor(colorCode)\n  }\n\n\n  async changeInteriorColor(colorCode) {\n    await fontregl.changeMaterials(colorCode) \n    await pano.changeInterColor(colorCode)\n  }\n\n\n  // 切换模型\n  async modelSwitching (modelName) {\n    if (!modelName) {\n      throw Error(`${modelName} is not found!(Function: modelSwitching)`)\n    }\n    return await fontregl.modelSwitching(modelName)\n  }\n\n\n  // process\n  setLoadingProgressCallback (show, hide, num) {\n    process.processShowCallback = show\n    process.processHideCallback = hide\n    process.processNumCallback = num\n  } \n\n  switchWheelAnimation (boole, isFast, isFuel, isComfort) {\n    let speed = 1\n    if(isFast) speed = 5  // 运动模式\n    if(isFuel) speed = 3  // 节油模式\n    if(isComfort) speed = 2 // 舒适模式\n    \n    return fontregl.switchWheelAnimation(boole, speed)\n  }\n  \n  animation () {\n    return fontregl.animation()\n  }\n\n  cancelAnimation () {\n    return fontregl.cancelAnimation()\n  }\n\n  resize( width, height) {\n    console.log(width, height)\n    return fontregl.resize(width, height)\n  }\n\n\n  openLights(bool) {\n    return fontregl.openLights(bool)\n  }\n\n  // 外饰转内饰\n  async outToInside () {\n    return await toInterior(true)\n  }\n\n  // 内饰转外饰动画\n  async insideToOut () {\n    this.animation()\n    return await outInterior()\n  }\n\n  // 开左门\n  async openLFDoor() {\n    return await fontregl.openLFDoor()\n  }\n\n  \n  dispose () {\n\n    if ( State.isLoading ) {\n      State.isCancel = true\n    } else {\n      State.sceneCache = Scene.clone().children\n    }\n\n    fontregl.dispose()  // 释放gl内存\n    pano.dispose()      //remove pano\n  }\n\n  resetCamera () {\n    fontregl.resetCamera()\n  }\n\n  showSize() {\n    return fontregl.showSize\n  }\n\n  changeView (name) {\n    fontregl.changeView(name)\n  }\n\n  \n  hideShade() {\n    return fontregl.hideShade() // 隐藏黑色遮罩\n  }\n\n  switchSellPoint (bool) {\n    pano.hideHotSpot(bool)\n    return fontregl.showSellPoint(bool)\n  }\n \n  toggleVR() {\n    pano.toggleVR()\n  }\n\n}()\n\n\nexport default window.fontre\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/main.js","  \nexport default {\n\n   /**\n   * 比较参数变化项\n   * @param  {[type]} objOld [description]\n   * @param  {[type]} objNew [description]\n   * @return {[type]}        [description]\n   */\n  diffParamsChangeData (objOld, objNew) {\n    let diffObj = {}\n    if( objOld && objNew && typeof objOld === 'object' && typeof objNew === 'object') {\n      for(let pro in objOld){\n        if (objOld.hasOwnProperty(pro) && objNew.hasOwnProperty(pro)) {\n          if (objOld[pro] !== objNew[pro]) {\n            diffObj[pro] = objNew[pro]\n          }\n        }\n      }\n      return diffObj\n    } else {\n       throw new TypeError('params type must be object', \"diffParamsChangeData\")\n    }\n  },\n\n  \n  /**\n   * 验证接口获取的参数格式是否正确\n   * @param  {[type]} param  [description]\n   * @param  {[type]} format [description]\n   * @return {[type]}        [description]\n   */\n  validateApiFormat (param, format) {\n    if(param !== null) {\n      if(param === undefined || typeof param !== format){\n        throw new TypeError('property value must be ' + format, \"validateApiFormat\")\n      }\n    }\n    return true\n  } \n}\n \n\n\n// WEBPACK FOOTER //\n// ./src/FontreCarConfig/utils.js","\n\nimport fontreGL from '../FontreGL/main'\n// import fontreGLConfig from '../FontreGL/config/carConfig'\n// import { toInterior } from '../FontreGL/three/Animation.Action'\nimport common from './utils'\nimport { Z_FIXED } from 'zlib';\n\nconst EventEmitter = require('events')\n\nconst fontre = {\n\n  fontreGL: fontreGL,\n\n  // 事件分发\n  eventsDispatcher: null,\n\n\t// 外观容器\n\texteriorDom: null,\n\t// 内饰容器\n\tinteriorPanoDom: null,\n\t// 是否初始化了外观\n  isShowExterior: false,\n  // 是否初始化了内饰\n  isShowInterior: false,\n  //\n  isShowSpritespin: false,\n  // 是否开启debug\n  debug: fontreGL.debug,\n\n  changeViewLock: false,\n\n  // 当前外观配置\n  exteriorConfig: {\n    carName: '',\n    exteriorColorName: '',\n    interiorColorName: '',\n    configLineName: '',\n    hubName: ''\n  },\n\n  // 当前内饰配置\n  interiorConfig: {\n    carName: '',\n    exteriorColorName: '',\n    interiorColorName: '',\n  },\n\n  isLoadedFrame: false,\n\n  _LOAD_STATUS: {\n    LOADING: 1,\n    FINISHED: 2\n  },\n\n  _tempCurrIsShowEx: true,\n\n  fontreBind () {\n\n    this.eventsDispatcher = new class extends EventEmitter {}()\n    \n    this.isLoadedFrame = true\n\n    this.exteriorDom = document.getElementById('exterior')\n    this.interiorPanoDom = document.getElementById('interior')\n      \n    this.clearConfig()\n\n    window.addEventListener('resize', fontre.resize, false);\n  },\n\n  /**\n   * 清除配置\n   */\n  clearConfig () {\n    // 顺便重置一些记录项\n    this.isShowExterior = false\n\n    for(let key in this.exteriorConfig){\n      this.exteriorConfig[key] = ''\n    }\n    for(let key in this.interiorConfig){\n      this.interiorConfig[key] = ''\n    }\n  },\n\n  /**\n   * 设置加载遮罩\n   * @param {*} rgba \n   */\n  addLoadingShade (rgba) {\n    let loadShade = document.createElement('div')\n    loadShade.style.position = 'absolute'\n    loadShade.style.top = 0\n    loadShade.style.left = 0\n    loadShade.style.width = window.innerWidth + 'px'\n    loadShade.style.height = window.innerHeight + 'px'\n    loadShade.style.backgroundColor = rgba\n  },\n\n  isSupportWebgl () {\n    return this.fontreGL.supportWebgl()\n  },\n\n  getSpritespinSource (exteriorColorName) {\n    const pathMap = [0, 10, 20, 30, 40, 50, 60, 70,80, 90, 100, \n                  110, 120, 130, 140, 150, 160, 170, 180, 190, 200, \n                  210, 220, 230, 240, 250, 260, 270, 280, 290, 300,\n                  310, 320, 330, 340, 350]\n    const source = [];\n    for (let i=0; i<pathMap.length; i++) {\n      let path = 'static/fontre/project/lafesta/exterior/' + exteriorColorName + '/car' + pathMap[i] + '.png'\n      source.push(path)\n    }\n    return source\n  },\n  /**\n   * 显示车辆外观\n   * @param  {[type]} carName           [description]\n   * @param  {[type]} exteriorColorName [description]\n   * @param  {[type]} interiorColorName [description]\n   * @param  {[type]} configLineName    [description]\n   * @param  {[type]} hubName           [description]\n   * @return {[type]}                   [description]\n   */\n  \n  async showExterior ({ carName, exteriorColorName, interiorColorName, configLineName, hubName}) {\n    // 验证所有参数是否为空\n    // if(!carName && !exteriorColorName && !interiorColorName && !configLineName && !hubName) {\n    //   throw new Error('all params must have value')\n    // }\n\n    if(!this.isLoadedFrame){\n      console.error('please wait loaded iframe')\n      return\n    }\n\n    // if ( this.changeViewLock ) return console.log('view lock')\n    // this.changeViewLock = true\n    \n    await this.changeView(true)\n    \n\n    if (!this.isSupportWebgl()) {\n      const imgSource = this.getSpritespinSource(exteriorColorName)\n      if (this.isShowSpritespin) {\n        const api = $('#exterior').spritespin(\"api\");\n        var i=0;\n        imgSource.forEach(function(data) {\n          api.replaceSourceFrame(data, i);\n          i++;\n        });\n        SpriteSpin.Utils.preload({\n            source: api.data.source,\n            preloadCount: api.data.preloadCount,\n            progress: (progress) => {\n                api.data.progress = progress\n            },\n            complete: (images) => {\n                api.data.images = images\n                api.data.loading = false\n                // api.data.frames = data.frames || images.length\n                api.skipFrames(0);\n            }\n        });\n      } else {\n        const self = this\n        const img = new Image();\n        img.src = imgSource[0];\n        img.onload = function(){\n          // self.exteriorDom.style.background = 'url(static/fontre/project/lafesta/exterior/background.png) no-repeat';\n          // self.exteriorDom.style.backgroundSize = '100%';\n          // var sprite = document.createElement( 'div' );\n          // sprite.id = 'spritespin'\n          // self.exteriorDom.appendChild(sprite)\n          // console.log('width:'+img.width+',height:'+img.height);\n          // console.log('window.innerWidth:'+window.innerWidth+',window.innerHeight:'+window.innerHeight);\n          let width = window.innerWidth\n          let height = img.height * width / img.width\n          let data = $('#exterior').spritespin({\n            animate:false,\n            source: imgSource,\n            frameTime: 300,\n            loop: true,\n            width: width,\n            height: 0,//height,\n            sizeMode: \"fit\",\n            detectSubsampling: false,\n            sense: -1\n          }).data(\"spritespin\")\n          SpriteSpin.extendApi({\n            replaceSourceFrame: function(src, frame){\n                this.data.source[frame] = src;\n                this.data.images[frame].src = src;\n            }\n          })\n          self.isShowSpritespin = true\n          self.eventsDispatcher.emit('loading_exterior', self._LOAD_STATUS.FINISHED, 100, '完成加载')\n          // debugger\n        };\n      }\n      return\n    }\n\n    // 验证所有参数是否为字符串类型, 仅允许null\n    if( !common.validateApiFormat(carName, 'string')\n      && !common.validateApiFormat(exteriorColorName, 'string') \n      && !common.validateApiFormat(interiorColorName, 'string')\n      && !common.validateApiFormat(configLineName, 'string') \n      && !common.validateApiFormat(hubName, 'string') ) {\n      throw new TypeError('params type is not support!', \"showExterior\");\n    }\n\n    // 获取不同的数据\n    let diffData = common.diffParamsChangeData(this.exteriorConfig, \n      { carName, exteriorColorName, interiorColorName, configLineName, hubName })\n    // 没有发生数据变化\n  \tif(JSON.stringify(diffData) === '{}') {\n      if(this.isShowExterior){\n        this.fontreGL.animation()\n      }\n      return\n    } \n\n    console.log(diffData)\n    \n    // 保存当前选择的配置\n    for(let key in diffData){\n      if(this.exteriorConfig.hasOwnProperty(key)){\n        this.exteriorConfig[key] = diffData[key]\n      }\n    }\n    \n    console.log('isShowExterior:', this.isShowExterior)\n\n  \t// 初始化判断\n  \tif(!this.isShowExterior) {\n\n      this.fontreGL.setLoadingProgressCallback(\n        () => {},\n        () => {},\n        progress => {\n          if(progress < 100){\n            this.eventsDispatcher.emit('loading_exterior', this._LOAD_STATUS.LOADING, progress, '正在加载')\n          }else{\n            this.eventsDispatcher.emit('loading_exterior', this._LOAD_STATUS.FINISHED, progress, '完成加载')\n          }\n        }\n      )\n\n      this.isShowExterior = true\n      await this.fontreGL.showExterior(this.exteriorDom, carName, exteriorColorName, interiorColorName)\n      if(diffData.configLineName) {\n        await this.fontreGL.modelSwitching(configLineName)\n      }\n      if(diffData.hubName) {\n        await this.fontreGL.modelSwitching(hubName)\n      }\n  \t} else {\n      console.log('ex:单项选择')\n      // 单项选择判断\n      if( diffData.exteriorColorName || diffData.interiorColorName || diffData.configLineName || diffData.hubName ) {\n        if(diffData.exteriorColorName) {\n          await this.fontreGL.changeExteriorColor(exteriorColorName)\n        }\n        if(diffData.interiorColorName) {\n          await this.fontreGL.changeInteriorColor(interiorColorName)\n        }\n        // 这里还差一个配置线处理\n        if(diffData.configLineName) {\n          await this.fontreGL.modelSwitching(configLineName)\n        }\n        if(diffData.hubName) {\n          await this.fontreGL.modelSwitching(hubName)\n        }\n      }\n    }\n\n\n    // this.changeViewLock = false\n  },\n\n  /**\n   * 展示车辆内饰\n   * @param  {[type]} carName           [description]\n   * @param  {[type]} exteriorColorName [description]\n   * @param  {[type]} interiorColorName [description]\n   * @return {[type]}                   [description]\n   */\n\n  async showInterior ({carName, exteriorColorName, interiorColorName}) {\n\n    if(!this.isLoadedFrame){\n\n      console.error('please wait loaded iframe')\n      return\n    }\n\n    // if ( this.changeViewLock ) return console.log('view lock')\n    // this.changeViewLock = true\n    await this.changeView(false)\n\n    // let script = document.createElement('script')\n    // script.src = frameDom.parent.FONTRE_PATH + fontreGLConfig[carName].pano.jsFile\n    // this.frameDom.appendChild(script)\n\n    // 验证所有参数是否为字符串类型, 仅允许null\n    if( !common.validateApiFormat(carName, 'string')\n      && !common.validateApiFormat(exteriorColorName, 'string') \n      && !common.validateApiFormat(interiorColorName, 'string') ) {\n\n      throw new TypeError('params type is not support!', \"showInterior\");\n    }\n\n     // 获取不同的数据\n    let diffData = common.diffParamsChangeData(this.interiorConfig, { exteriorColorName, interiorColorName })\n    // 没有发生数据变化\n    if(JSON.stringify(diffData) === '{}') {\n      if(this.isShowExterior){\n        this.fontreGL.cancelAnimation()\n      }\n      return\n    }\n\n    // 保存当前选择的配置\n    for(let key in diffData){\n      if(this.interiorConfig.hasOwnProperty(key)){\n        this.interiorConfig[key] = diffData[key]\n      }\n    }\n\n    // console.log(exteriorColorName, interiorColorName)\n\n    if(!this.isShowInterior) {\n      console.log('in:初始化车')\n    \tthis.isShowInterior = true\n    \tawait this.fontreGL.showInterior('interior', carName, exteriorColorName, interiorColorName )\n    }else{\n      console.log('in:单项选择')\n    \t// 单项选择判断\n      if( diffData.exteriorColorName || diffData.interiorColorName) {\n        if(diffData.exteriorColorName) {\n          await this.fontreGL.changeExteriorColor(exteriorColorName)\n        }\n        if(diffData.interiorColorName) {\n          await this.fontreGL.changeInteriorColor(interiorColorName)\n        }\n      }\n    }\n    // this.changeViewLock = false\n  },\n\n  /**\n   * 车轮滚动动画\n   */\n  wheelAnimation ({bool, isFast, isFuel, isComfort}) {\n    this.fontreGL.switchWheelAnimation(bool, isFast, isFuel, isComfort)\n  },\n\n  /**\n   * 充电动画\n   */\n  chargeAnimation () {\n    this.fontreGL.chargeAnimation()\n  },\n\n  /**\n   * 改变场景\n   */\n  changeScene (name) {\n    this.fontreGL.changeView(name)\n  },\n\n  /**\n   * 重置窗口大小\n   * @param  {[type]} width  [description]\n   * @param  {[type]} height [description]\n   * @return {[type]}        [description]\n   */\n  resize() {\n  \twindow.FontreGL.fontreGL.resize(window.innerWidth, window.innerHeight)\n  },\n\n  /**\n   * 加载进度事件注册\n   * @param  {[type]} funcName [description]\n   * @param  {[type]} func     [description]\n   * @return {[type]}          [description]\n   */\n  on ( funcName, func ) {\n  \tthis.eventsDispatcher.on(funcName, func)\n  },\n\n  /**\n   * 取消加载\n   * @return {[type]} [description]\n   */\n  leaveAndSaveSnap() {\n    this.fontreGL.leaveAndSaveSnap()\n    this.isShowExterior = false\n  },\n\n  /**\n   * 切换展示容器\n   * @param {Boolean} isEx \n   */\n  switchShowDom (isEx){\n    if(isEx){\n  \n      this.exteriorDom.style.display = 'block'\n      this.interiorPanoDom.style.display = 'none'\n\n    }else{\n\n      this.hideShade()\n      this.exteriorDom.style.display = 'none'\n      this.interiorPanoDom.style.display = 'block'\n    }\n  },\n\n  /**\n   * 内外饰切换控制\n   * @param {Boolean} currIsShowExterior \n   */\n  async changeView (currIsShowExterior) {\n\n    if ( currIsShowExterior !== fontre._tempCurrIsShowEx) {\n\n      fontre._tempCurrIsShowEx = currIsShowExterior\n\n      // if (this.chengViewLock) return console.log('lock')\n\n      this.chengViewLock = true\n      if ( currIsShowExterior ) { \n        // 显示外饰\n        this.switchShowDom(true)\n        if (!this.isShowSpritespin) {\n          await this.fontreGL.insideToOut()\n        }\n\n      } else { \n        // 显示内饰\n        if (!this.isShowSpritespin) {\n          await this.fontreGL.openLFDoor()\n          await this.fontreGL.outToInside()\n        }\n        this.switchShowDom(false)\n      }\n      // this.chengViewLock = false\n    }\n  },\n\n  // 不建议这样使用，否则这个API没意义\n  // changeHub(name) {\n  //   this.fontreGL.modelSwitching(name)\n  // },\n\n  /**\n   * 开关灯\n   * @param {Boolean} param0 \n   */\n  openLights({bool}) {\n    this.fontreGL.openLights(bool)\n  },\n\n  /**\n   * 隐藏遮罩\n   */ \n  hideShade() {\n    return this.fontreGL.hideShade()\n  },\n\n  /**\n   * 车身尺寸展示\n   */\n  showSize() {\n    return this.fontreGL.showSize()    \n  },\n\n  /**\n   * 点击卖点\n   * @param {String} name \n   */\n  activeSellPoint (name) {\n    this.eventsDispatcher.emit('active_sell_point', name)\n  },\n\n  /**\n   * 点击进入内饰的热点\n   */\n  activeToInteriorPoint () {\n    this.eventsDispatcher.emit('active_to_interior_point')\n  },\n\n  /**\n   * 卖点展示切换\n   * @param {Boolean} param0 \n   */\n  switchSellPoint ({bool}){\n    this.fontreGL.switchSellPoint(bool)\n  },\n\n  /**\n   * VR切换\n   */\n  toggleVR () {\n    this.fontreGL.toggleVR()\n  }\n}\n\n// fontre.setShowWatch()\n\nwindow.FontreGL = fontre \n\nwindow.parent.addEventListener('resize', fontre.resize, false);\n\n// 开启debug属性监听\n// fontre.setDebugWatch()\n\n\nexport default fontre;\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreCarConfig/index.js","import setMaterial from './SetMaterial'\nimport getCarPaintShader from './CarPaintShader'\nimport { MaterialEditChildren } from  './SetMaterial.Constant'\nconst THREE = require('three')\n\nconst getMaterial = async (parameter) => {\n  let material = await getMaterialType(parameter)\n\n  if (material.type !== 'ShaderMaterial') {\n    await setMaterial(material, parameter, MaterialEditChildren)\n  }\n  material.fog = false\n  material.name = parameter.name\n  material.needsUpdate = true\n\n  return material\n}\n\n\nasync function getMaterialType (param) {\n  if (param.type === 'CarPaintShader') {\n    let material = new THREE.ShaderMaterial(await getCarPaintShader(param))\n    material.visible = param.visible\n    return material\n  } else {\n    return new THREE[param.type]()\n  }\n}\n\n\nexport default getMaterial\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/materials/GetMaterial.js","import { Orbit } from './Three.Constant'\nimport { Ftween } from './Tools'\n\nconst TWEEN = require('@tweenjs/tween.js')\n\nconst STOP_TIME = 2000, // 停止操作时间\n    MOVE_DISTANCE = 280,   // 相机移动距离\n    CURRENT_DISTANCE = Orbit.customDistance \n\nconst MouseMoveCallback =  (() => {\n  let timer, lock = false\n\n  return () => {\n    if ( lock ) return   // 节流\n    if ( timer ) clearTimeout(timer)  // 防抖\n  \n    setState()\n    lock = true\n  \n    setTimeout(() => { lock = false }, 500)\n    timer = setTimeout(() => resetState() , STOP_TIME)\n  }\n})()\n\n\nfunction setState() {\n  Orbit.autoRotate = false\n  Ftween(Orbit, { customDistance: CURRENT_DISTANCE - MOVE_DISTANCE }, 250, TWEEN.Easing.Quadratic.Out)\n}\n\n\nfunction resetState () {\n  Orbit.autoRotate = true\n  Ftween(Orbit, { customDistance: Orbit.customDistance + MOVE_DISTANCE }, 250, TWEEN.Easing.Quadratic.Out)\n}\n\n\n\nexport default MouseMoveCallback\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Event.MouseMove.js","import { bindEvent } from './Event'\nimport MouseMoveCallBack from './Event.MouseMove'\nimport { Camera, Renderer, Scene, Orbit } from './Three.Constant.js'\nimport State from '../state/state'\nimport Carconfig from '../config/carConfig'\nimport { createEl } from './shade'\nimport Postprocessing from './Postprocessing'\n\nconst init = function (container) {\n\t\n\tif (!State.carCode) {\n    throw Error('carCode not found! (Function: Three.init)')\n\t}\n\t\n\t// container\n\tcontainer.style.setProperty('width', '100%')\n\tcontainer.style.setProperty('height', '100%')\n\n\t// camera\n\ttry {\n\n\t\tif(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)){ // 移动端\n\t\t\tconsole.log('移动端')\n\t\t\tlet { x, y, z } = Carconfig[State.carCode].exteriorViewpoint.mobilePosition\n\t\t\tCamera.position.set(x, y , z)\n\t\t}else{\n\t\t\tconsole.log('PC端')\n\t\t\tlet { x, y, z } = Carconfig[State.carCode].exteriorViewpoint.position\n\t\t\tCamera.position.set(x, y , z)\n\t\t}\n\n\t} catch (err) {\n\t\tconsole.warn(err)\n\t\tCamera.position.set(745, 140, 653) // camera postion\n\t}\n\tCamera.lookAt(Scene.position) \n\tCamera.fov = 45\n\tCamera.far = 100000\n\tCamera.aspect = container.clientWidth / container.clientHeight\n\tCamera.updateProjectionMatrix()\n\n\t// render\n\tRenderer.setSize(container.clientWidth, container.clientHeight)\n\tRenderer.setPixelRatio(window.devicePixelRatio)\n\t// Renderer.setClearColor(0x008000)\n\t// Renderer.autoClear = true  \n\n\n\t// orbit contriol\n\t// Orbit.enableKeys = false\n\tOrbit.autoRotate = true\n\tOrbit.autoRotateSpeed = -0.06\n\t\n\tOrbit.onClickCallback = bindEvent.bind(null, container)\n\t// Orbit.onMouseMoveCallBack = MouseMoveCallBack\n\n\n\twindow.addEventListener('resize', ()=> {\n\t\tCamera.aspect = container.clientWidth / container.clientHeight\n\t\tCamera.updateProjectionMatrix()\n\t\tRenderer.setSize(container.clientWidth, container.clientHeight)\n\n\t\t// var pixelRatio = Renderer.getPixelRatio();\n\t\t// console.log(pixelRatio)\n\t\t// var newWidth  = Math.floor( container.clientWidth  / pixelRatio ) || 1;\n\t\t// var newHeight = Math.floor( container.clientHeight / pixelRatio ) || 1;\n\t\t// console.log('newWidth', newWidth)\n\t\t// console.log('newHeight', newHeight)\n\t\t// State.composer.setSize( container.clientWidth , container.clientHeight );\n\t})\n\n\n\tcontainer.appendChild(Renderer.domElement)\n\tcreateEl(container)\n}\n\nexport default init\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Init.js","window.FONTRE_PATH = \"static/fontre\"\n\nconst config = {\n   \n    lights: [\n        // 前左灯\n        {\n            type: 'front', \n            pos: [-207.889, -60.807, 64.307],\n            imgPath: `${window.FONTRE_PATH}/textures/light_blue3.png`\n        },\n        {\n            type: 'front', \n            pos: [-201.151, -66.904, 65.396],\n            imgPath: `${window.FONTRE_PATH}/textures/light_blue3.png`\n        },\n        {\n            type: 'front', \n            pos: [-193.975, -72.707, 66.594],\n            imgPath: `${window.FONTRE_PATH}/textures/light_blue3.png`\n        },\n        {\n            type: 'front', \n            pos: [-188.945, -78.363, 67.374],\n            imgPath: `${window.FONTRE_PATH}/textures/light_blue3.png`\n        },\n        // 后左灯\n        {\n            type: 'back', \n            pos: [197.137, -77.614, 87.135],\n            imgPath: `${window.FONTRE_PATH}/textures/light_red3.png`\n        },\n        {\n            type: 'back', \n            pos: [200.12, -76.202, 87.135],\n            imgPath: `${window.FONTRE_PATH}/textures/light_red3.png`\n        },\n        {\n            type: 'back', \n            pos: [203.038, -74.124, 87.135],\n            imgPath: `${window.FONTRE_PATH}/textures/light_red3.png`\n        },\n        {\n            type: 'back', \n            pos: [205.729, -71.674, 87.135],\n            imgPath: `${window.FONTRE_PATH}/textures/light_red3.png`\n        },\n        {\n            type: 'back', \n            pos: [207.814, -68.93, 87.135],\n            imgPath: `${window.FONTRE_PATH}/textures/light_red3.png`\n        },\n        {\n            type: 'back', \n            pos: [209.984, -66.023, 87.135],\n            imgPath: `${window.FONTRE_PATH}/textures/light_red3.png`\n        },\n        {\n            type: 'back', \n            pos: [211.825, -62.329, 87.135],\n            imgPath: `${window.FONTRE_PATH}/textures/light_red3.png`\n        },\n    ]\n}\n\nexport default config\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/config/texConfig.js","// import State from '../../../state'\nimport { Scene } from '../../Three.Constant'\nimport { getUsrData, Ftween} from '../../Tools'\n\nconst SUN_ROOF = 'open_sunroof'  // 天窗名字\n\n\n// 关闭所有车门\nexport const closeAllDoor = async () => {\n\n  let { Hotspot } = await getUsrData()\n\n  if (!Hotspot) {\n    throw Error('Hotspot is 不! 存! 在! ')\n  }\n\n  for ( let { name, models} of Hotspot ) {\n\n    if ( name === SUN_ROOF ) break\n\n    for ( let model of models ) {\n        let mesh = Scene.getObjectByName(model.name)\n        Ftween(mesh.rotation, { x: 0, y:0, z: 0 }, 400)\n    }\n  }\n}\n\n\n\n\nexport const closeLFdoor = () => {\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/actions/doors/closeDoor.js","import { Scene } from '../../Three.Constant'\n\nconst THREE = require('three')\nconst FontLoader = new THREE.FontLoader();\n\n\n\nexport const length = function (text) {\n\n  //  line \n  var geometry = new THREE.PlaneBufferGeometry( 500, 2 );\n  var material = new THREE.MeshBasicMaterial( {color: 0xffffff, side: THREE.DoubleSide} );\n  var length  = new THREE.Mesh( geometry, material );\n\n  length.position.set(0, -80, 100)\n  length.rotateX( -Math.PI / 2 )\n  length.name = 'carLength'\n\n  Scene.add(length)\n\n  // text\n  FontLoader.load( `${window.FONTRE_PATH}/font/font.json`,  ( font ) => {\n\n    var shapes = font.generateShapes( text, 18 );\n    var geometry = new THREE.ShapeBufferGeometry( shapes );\n    geometry.computeBoundingBox();\n\n    let mesh = new THREE.Mesh(geometry, material )\n    mesh.position.set(0, -79, 120)\n    mesh.rotateX( -Math.PI / 2 )\n    mesh.name = 'carLengthText'\n\n    Scene.add(mesh)\n  })\n}\n\n\n\n\nexport const width = function (text) {\n\n  //  line \n  var geometry = new THREE.PlaneBufferGeometry( 200, 2 );\n  var material = new THREE.MeshBasicMaterial( {color: 0xffffff, side: THREE.DoubleSide} );\n  var length  = new THREE.Mesh( geometry, material );\n\n  length.position.set(-250, -80, 0)\n  length.rotateX(-Math.PI/2)\n  length.rotateZ(-Math.PI/2)\n  length.name = 'carWidth'\n\n  Scene.add(length)\n\n  // text\n  FontLoader.load( `${window.FONTRE_PATH}/font/font.json`,  ( font ) => {\n\n    var shapes = font.generateShapes( text, 18 );\n    var geometry = new THREE.ShapeBufferGeometry( shapes );\n    geometry.computeBoundingBox();\n\n    let mesh = new THREE.Mesh(geometry, material )\n    mesh.position.set(-270, -79, -40)\n    mesh.rotateX( -Math.PI / 2 )\n    mesh.rotateZ(-Math.PI/2)\n    mesh.name = 'carWidthText'\n\n    Scene.add(mesh)\n  })\n}\n\n\n\n\nexport const height = function (text) {\n\n  //  line \n  var geometry = new THREE.PlaneBufferGeometry( 300, 2 );\n  var material = new THREE.MeshBasicMaterial( {color: 0xffffff, side: THREE.DoubleSide} );\n  var length  = new THREE.Mesh( geometry, material );\n\n  length.position.set(250, -80, 100)\n  length.rotateZ(-Math.PI/2)\n  length.rotateX(-Math.PI/2)\n  length.name = 'carHeight'\n\n\n  Scene.add(length)\n\n  // text\n  FontLoader.load( `${window.FONTRE_PATH}/font/font.json`,  ( font ) => {\n\n    var shapes = font.generateShapes( text, 18 );\n    var geometry = new THREE.ShapeBufferGeometry( shapes );\n    geometry.computeBoundingBox();\n\n    let mesh = new THREE.Mesh(geometry, material )\n    mesh.position.set(250, 0, 100)\n    mesh.rotateY( -Math.PI / 2 )\n    mesh.name = 'carHeightText'\n\n    Scene.add(mesh)\n  })\n}\n\n\n\nlet sizeNameList = [ 'carLength', 'carLengthText', 'carHeight', 'carHeightText', 'carWidth', 'carWidthText' ]\n\nexport const removeSize = function () {\n\n  for (let item of sizeNameList) {\n\n    let mesh = Scene.getObjectByName(item)\n\n    Scene.remove(mesh)\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/actions/showSize/index.js","import * as showSize from './showSize'\nimport * as doors from './doors'\n\n\nexport { \n  showSize,\n  doors\n}\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/actions/index.js","\nimport carConfig from '../config/carConfig'\nimport Loaders from './Loaders'\nimport State from '../state/state'\nimport { TextureLoader, CubeLoader } from './Three.Constant.js'\nimport { Color } from './Three.Constant'\nconst THREE = require('three')\nconst TWEEN = require('@tweenjs/tween.js')\n\n\n/**\n *  获取配置文件\n * @param {*} carCode 汽车名字\n */\nconst getUsrData = (()=> {\n  let cache = {} \n  return async () => {\n    let { carCode }  = State\n    if (!carCode) {\n      throw Error('carCode not found! (Function: getUsrData)')\n    } \n\n    if (cache[carCode]) return cache[carCode]\n\n    let path = `${carConfig[carCode].assets}/${carCode}`\n  \n    let data;\n    if (process && process.env && process.env.NODE_ENV === 'development') {\n      data = await Loaders['json'](path)\n    } else {\n      data = await Loaders['ftrn'](path)\n    }\n  \n    cache[carCode] = data\n    return data\n  }\n})()\n\n\n\n/**\n *  获取模型资源路径\n * @param {String} folderName  文件夹名字\n * @param {String} name  文件名字\n */\nconst getAssetPath = function () {\n\n  if (!State.carCode) {\n    throw Error('carCode not found! (Function: getAssetPath)')\n  }\n\n  return `${carConfig[State.carCode].assets}/`\n}\n\n\n\n\n/**\n * 获取环境贴图\n * @param {*} name    \n */\nconst getEnvMap = async function (name) {\n\n  if (name === 'undefined') return \n\n  if (!State.carCode) {\n    throw Error('carCode not found! (Function: getEnvMap)')\n  }\n \n  let usrData = await getUsrData(), assetPath = getAssetPath();\n\n  if ( !usrData || !usrData.Cubes || !assetPath ) {\n    throw Error(`usrData.Cubes || assetPath not found! (Function: getEnvMap)`)\n  }\n\n\n  const path = `${assetPath}cubes/${name}`\n\n  // 从缓存拿\n  if ( State.textureCache[path] ) {\n    return State.textureCache[path]\n  }\n  \n  let { PX, PY, PZ, NX, NY, NZ } = _findData(name, usrData.Cubes)\n\n  if ( PX && PY && PZ && NX && NY && NZ ) {\n\n    const cube = CubeLoader.setPath(`${path}/`).load([ PX, NX, PY, NY, PZ,  NZ ]);\n    State.textureCache[path] = cube\n    return cube\n  }\n}\n\n\n\n\n/**\n * 获取贴图\n * @param {*} name \n */ \nconst getTexture = async function (name) {\n  \n  if (name === 'undefined') return \n  if (!State.carCode) {\n    throw Error('carCode not found! (Function: getEnvMap)')\n  }\n\n  let usrData = await getUsrData(State.carCode), assetPath = getAssetPath();\n\n  if ( !usrData || !usrData.Textures || !assetPath ) {\n    throw Error(`usrData.Textures || assetPath not found! (Function: getTexture)`)\n  }\n\n  const path = `${assetPath}textures/${name}`\n\n  if ( State.textureCache[path] ) {\n    return State.textureCache[path]\n  }\n\n  let { repeat }= _findData(name, usrData.Textures)\n\n  if ( repeat && repeat.x && repeat.y ) {\n\n    const texture = TextureLoader.load(path)\n    texture.matrixAutoUpdate = false;\n\n    \n    texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n    texture.repeat.x = repeat.x;\n    texture.repeat.y = repeat.y;\n\n    State.textureCache[path] = texture\n\n    return texture\n  } \n}\n\n\n  // 查找贴图和天空盒数据\n  function _findData(name, arr) {\n    \n    if ( Array.isArray(arr) && arr.length > 0 ) {\n      for ( let item of arr) {\n        if( item.name === name) {\n          return item\n        }\n      }\n    }  else {\n      console.log(`param arr is warn(Function: _findData)`)\n    }\n  }\n\n\n\n/**\n * 基于tween过渡的封装\n * @param {*} start   开始状态\n * @param {*} to      结束状态\n * @param {number} time    持续时间\n * @param {Function} easing  动画函数  (可选)\n * @param {Function} endFunc 结束回调   (可选)\n */\nconst Ftween = (start, end, time, easing, endFunc=Function) => {\n  return new Promise( resolve => {\n    const tween = new TWEEN.Tween(start).to(end, time).start()\n      .onComplete(async () => {\n        await endFunc()\n        resolve()\n      })\n    if (easing) tween.easing(easing)\n  })\n}\n\n\n/**\n * 十六进制转换 rgb\n * @param {*} color 要转换的颜色\n */\nconst Hex2RGB = function (color) {\n  Color.setHex(color) \n  return {\n    r: Color.r,\n    g: Color.g,\n    b: Color.b\n  }\n}\n\n\n\n\nexport { getUsrData, getAssetPath, getEnvMap, getTexture, Ftween, Hex2RGB }\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Tools.js","import state from '../state/state'\nimport { Orbit, Renderer, Scene, Camera, FPS, AnimateObjs} from './Three.Constant'\nimport fontregl from './InterFace'\nimport { getUsrData, Ftween } from './Tools'\nimport { stat } from 'fs';\nimport  { onClickMesh } from './Event'\n\nconst THREE = require('three')\n\nconst TWEEN = require('@tweenjs/tween.js'),\nOUT = TWEEN.Easing.Circular.Out,\nIN = TWEEN.Easing.Circular.In;\n\n\nconst cameraPath = [\n  new THREE.Vector3(30, 50, 320),\n  new THREE.Vector3(75, 40, 220),\n  new THREE.Vector3(50, 20, 120),\n  new THREE.Vector3(30, 10, 100)\n] \n\n// 热点动画\nconst spriteAnimation = function (num) {\n  let scale  = Math.abs(Math.sin( num / 25 ) * 16) + 2\n\n  for (let value of Object.values(state.spriteState)) {\n    if (value instanceof THREE.Sprite) {\n      value.scale.set(scale, scale, scale)\n    }\n  }\n}\n\n// 车轮滚滚\nconst toRotateWheel = async ( num, speed = 1 ) => {\n\n  let { Hotspot, Floor } = await getUsrData()\n  for ( let i of Hotspot ) {\n    if ( i.name === 'rotate_wheel' ) {\n      for ( let j of i.models) {\n        let mesh = Scene.getObjectByName(j.name)\n        if ( mesh ) {\n          mesh.rotateZ( Math.PI / 60 * speed)\n        }\n      }\n    }\n  }\n\n  // 移动地板\n  if (Floor) {\n    let floorMesh = Scene.getObjectByName(Floor.name)\n    if(floorMesh) {\n      floorMesh.material.map.offset.set(-num/150 * speed, 0)\n    }\n  }\n}\n\n\n/**\n * 车门动画\n */\nconst doorAnimation = () => {\n  const updateMove = async () => {\n    await openDoor()\n    await closeDoor()\n    await openDoor()\n    await closeDoor()\n    state.autoAnimateObjs.doorAnimateTimer =\n      setTimeout(updateMove, 20000)\n  }\n  updateMove()\n}\n\n/**\n * 开车门动画\n */\nconst openDoor = async () => {\n  let data = await getUsrData()\n  let leftDoorData = data.Hotspot[0]\n\n  let callBack\n\n  let { models, hotspot } = leftDoorData\n\n  let tweenAll = []\n  models.forEach( item => {\n    let mesh = Scene.getObjectByName(item.name)\n    if (!mesh) return \n    \n    if ( state.spriteState[item.name] instanceof THREE.Sprite ) {\n      state.spriteState[item.name].visible = !state.hotSpotState[name]\n    }\n    \n    tweenAll.push(Ftween(mesh.rotation, {x: 0, y: -Math.PI * 0.08, z: 0}, 300, OUT, callBack))\n  })\n  await Promise.all(tweenAll)\n\n}\n\n/**\n * 关闭车门动画\n */\nconst closeDoor = async (isChange) => {\n  let data = await getUsrData()\n  let leftDoorData = data.Hotspot[0]\n\n  let callBack\n\n  let { models, hotspot } = leftDoorData\n\n  if(isChange){ // 这里是针对热点状态的处理\n    state.hotSpotState['lf_door'] = false\n  }\n\n  let tweenAll = []\n  models.forEach( item => {\n    let mesh = Scene.getObjectByName(item.name)\n    if (!mesh) return \n\n    if ( state.spriteState[item.name] instanceof THREE.Sprite ) {\n      state.spriteState[item.name].visible = !state.hotSpotState[name]\n    }\n    \n    tweenAll.push(Ftween(mesh.rotation, {x: 0, y: 0, z: 0}, 300, IN, callBack))\n  })\n  await Promise.all(tweenAll)\n}\n\n/**\n * 检测视线是否处于车头或车尾部\n * @param {*} Camera \n */\nconst checkViewDirToAnimate = (Camera) => {\n  let cameraDir = new THREE.Vector3()\n  Camera.getWorldDirection(cameraDir)\n  let carDir = new THREE.Vector3(1, 0, 0)\n  let dotValue = carDir.dot(cameraDir.negate().normalize())\n  if(dotValue > 0.95 || dotValue < -0.95){\n    return true\n  }\n  return false\n}\n\n/**\n * 进入内饰时的动画\n * @param {*} targetName \n */\n\nconst toInterior = async (targetName) => {\n\n    Orbit.autoRotate = false\n    Orbit.isIntoInterior = true\n    console.log('进入内饰')\n\n    for ( let i of cameraPath ) {\n      console.log(cameraPath)\n\n      await Ftween(Camera.position, i , 200)\n    }\n\n    // window.FontreGL.showInterior({\n    //   carName: 'lafesta', \n    //   exteriorColorName: 'red',\n    //   interiorColorName: 'inter_black'\n    // })\n    \n}\n\n\n\n// 开左门\nconst openLFDoor = async () => {\n  let mesh = Scene.getObjectByName('02_car_body_lf_door.drc')\n  if (!state.hotSpotState.lf_door) {\n    await onClickMesh(mesh)\n  }\n}\n\n/**\n * 切出内饰时的动画\n */\nconst outInterior = async () => {\n\n  // console.log('内饰 to 外饰')\n  // console.log(cameraPath)\n\n  // new THREE.Vector3(10, 40, 33)\n  let path = cameraPath.slice()\n\n  for ( let i of path.reverse() ) {\n    await Ftween(Camera.position, i , 200)\n  }\n\n  Orbit.autoRotate = true\n  Orbit.isIntoInterior = false\n\n  closeDoor(true)\n}\n\nconst cameraMoveIn = () => {\n  Orbit.autoRotate = false\n  if(state.isCanAutoAnimation == false) {\n    return\n  }\n  // 获取camera位置\n  let cameraPos = new THREE.Vector3()\n  cameraPos.copy(Camera.position)\n  state.storeCameraDistance = cameraPos.distanceTo(new THREE.Vector3())\n  cameraPos.normalize()\n  cameraPos.multiplyScalar(100)\n  let tweenIn = new TWEEN.Tween( Camera.position ).to( {\n    x: cameraPos.x,\n    y: cameraPos.y,\n    z: cameraPos.z\n  }, 1000 ).easing(TWEEN.Easing.Quadratic.Out)\n  tweenIn.onComplete(function(){\n    state.isCanAutoAnimation = false\n  })\n  tweenIn.start()\n}\n\n\n\n\n\n\nexport { \n  spriteAnimation, \n  openLFDoor,\n  cameraAnimation, \n  toRotateWheel, \n  doorAnimation, \n  checkViewDirToAnimate,\n  toInterior,\n  outInterior,\n  cameraMoveIn,\n  cameraMoveOut,\n  closeDoor,\n  moveClip,\n  transBreakOutAnimation\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Animation.Action.js","\n\n\nconst process = {\n\n  processShowCallback: null,\n  processHideCallback: null,\n  processNumCallback: null,\n\n  processShow () {\n    console.log('show')\n    if ( this.processShowCallback ) {\n      this.processShowCallback()\n    }\n  },\n\n  processHide () {\n    console.log('hide')\n    if ( this.processHideCallback ) {\n      this.processHideCallback()\n    }\n  },\n\n  processNum ( num ) {\n    if ( this.processNumCallback ) {\n      this.processNumCallback(num)\n    }\n  }\n\n}\n\n\nexport default process\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/process/Process.js","/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function() {'use strict';var l=void 0,aa=this;function r(c,d){var a=c.split(\".\"),b=aa;!(a[0]in b)&&b.execScript&&b.execScript(\"var \"+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==l?b[e]=d:b=b[e]?b[e]:b[e]={}};var t=\"undefined\"!==typeof Uint8Array&&\"undefined\"!==typeof Uint16Array&&\"undefined\"!==typeof Uint32Array&&\"undefined\"!==typeof DataView;function v(c){var d=c.length,a=0,b=Number.POSITIVE_INFINITY,e,f,g,h,k,m,n,p,s,x;for(p=0;p<d;++p)c[p]>a&&(a=c[p]),c[p]<b&&(b=c[p]);e=1<<a;f=new (t?Uint32Array:Array)(e);g=1;h=0;for(k=2;g<=a;){for(p=0;p<d;++p)if(c[p]===g){m=0;n=h;for(s=0;s<g;++s)m=m<<1|n&1,n>>=1;x=g<<16|p;for(s=m;s<e;s+=k)f[s]=x;++h}++g;h<<=1;k<<=1}return[f,a,b]};function w(c,d){this.g=[];this.h=32768;this.d=this.f=this.a=this.l=0;this.input=t?new Uint8Array(c):c;this.m=!1;this.i=y;this.r=!1;if(d||!(d={}))d.index&&(this.a=d.index),d.bufferSize&&(this.h=d.bufferSize),d.bufferType&&(this.i=d.bufferType),d.resize&&(this.r=d.resize);switch(this.i){case A:this.b=32768;this.c=new (t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0;this.c=new (t?Uint8Array:Array)(this.h);this.e=this.z;this.n=this.v;this.j=this.w;break;default:throw Error(\"invalid inflate mode\");\n}}var A=0,y=1,B={t:A,s:y};\nw.prototype.k=function(){for(;!this.m;){var c=C(this,3);c&1&&(this.m=!0);c>>>=1;switch(c){case 0:var d=this.input,a=this.a,b=this.c,e=this.b,f=d.length,g=l,h=l,k=b.length,m=l;this.d=this.f=0;if(a+1>=f)throw Error(\"invalid uncompressed block header: LEN\");g=d[a++]|d[a++]<<8;if(a+1>=f)throw Error(\"invalid uncompressed block header: NLEN\");h=d[a++]|d[a++]<<8;if(g===~h)throw Error(\"invalid uncompressed block header: length verify\");if(a+g>d.length)throw Error(\"input buffer is broken\");switch(this.i){case A:for(;e+\ng>b.length;){m=k-e;g-=m;if(t)b.set(d.subarray(a,a+m),e),e+=m,a+=m;else for(;m--;)b[e++]=d[a++];this.b=e;b=this.e();e=this.b}break;case y:for(;e+g>b.length;)b=this.e({p:2});break;default:throw Error(\"invalid inflate mode\");}if(t)b.set(d.subarray(a,a+g),e),e+=g,a+=g;else for(;g--;)b[e++]=d[a++];this.a=a;this.b=e;this.c=b;break;case 1:this.j(ba,ca);break;case 2:for(var n=C(this,5)+257,p=C(this,5)+1,s=C(this,4)+4,x=new (t?Uint8Array:Array)(D.length),S=l,T=l,U=l,u=l,M=l,F=l,z=l,q=l,V=l,q=0;q<s;++q)x[D[q]]=\nC(this,3);if(!t){q=s;for(s=x.length;q<s;++q)x[D[q]]=0}S=v(x);u=new (t?Uint8Array:Array)(n+p);q=0;for(V=n+p;q<V;)switch(M=E(this,S),M){case 16:for(z=3+C(this,2);z--;)u[q++]=F;break;case 17:for(z=3+C(this,3);z--;)u[q++]=0;F=0;break;case 18:for(z=11+C(this,7);z--;)u[q++]=0;F=0;break;default:F=u[q++]=M}T=t?v(u.subarray(0,n)):v(u.slice(0,n));U=t?v(u.subarray(n)):v(u.slice(n));this.j(T,U);break;default:throw Error(\"unknown BTYPE: \"+c);}}return this.n()};\nvar G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H):H,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,\n13,13],N=t?new Uint8Array(ea):ea,O=new (t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q=new (t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q.length;R<ga;++R)Q[R]=5;var ca=v(Q);function C(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h;b<d;){if(f>=g)throw Error(\"input buffer is broken\");a|=e[f++]<<b;b+=8}h=a&(1<<d)-1;c.f=a>>>d;c.d=b-d;c.a=f;return h}\nfunction E(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h=d[0],k=d[1],m,n;b<k&&!(f>=g);)a|=e[f++]<<b,b+=8;m=h[a&(1<<k)-1];n=m>>>16;if(n>b)throw Error(\"invalid code length: \"+n);c.f=a>>n;c.d=b-n;c.a=f;return m&65535}\nw.prototype.j=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length-258,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(this.b=b,a=this.e(),b=this.b),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b>=e&&(this.b=b,a=this.e(),b=this.b);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};\nw.prototype.w=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(a=this.e(),e=a.length),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b+k>e&&(a=this.e(),e=a.length);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};\nw.prototype.e=function(){var c=new (t?Uint8Array:Array)(this.b-32768),d=this.b-32768,a,b,e=this.c;if(t)c.set(e.subarray(32768,c.length));else{a=0;for(b=c.length;a<b;++a)c[a]=e[a+32768]}this.g.push(c);this.l+=c.length;if(t)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];this.b=32768;return e};\nw.prototype.z=function(c){var d,a=this.input.length/this.a+1|0,b,e,f,g=this.input,h=this.c;c&&(\"number\"===typeof c.p&&(a=c.p),\"number\"===typeof c.u&&(a+=c.u));2>a?(b=(g.length-this.a)/this.o[2],f=258*(b/2)|0,e=f<h.length?h.length+f:h.length<<1):e=h.length*a;t?(d=new Uint8Array(e),d.set(h)):d=h;return this.c=d};\nw.prototype.n=function(){var c=0,d=this.c,a=this.g,b,e=new (t?Uint8Array:Array)(this.l+(this.b-32768)),f,g,h,k;if(0===a.length)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);f=0;for(g=a.length;f<g;++f){b=a[f];h=0;for(k=b.length;h<k;++h)e[c++]=b[h]}f=32768;for(g=this.b;f<g;++f)e[c++]=d[f];this.g=[];return this.buffer=e};\nw.prototype.v=function(){var c,d=this.b;t?this.r?(c=new Uint8Array(d),c.set(this.c.subarray(0,d))):c=this.c.subarray(0,d):(this.c.length>d&&(this.c.length=d),c=this.c);return this.buffer=c};function W(c,d){var a,b;this.input=c;this.a=0;if(d||!(d={}))d.index&&(this.a=d.index),d.verify&&(this.A=d.verify);a=c[this.a++];b=c[this.a++];switch(a&15){case ha:this.method=ha;break;default:throw Error(\"unsupported compression method\");}if(0!==((a<<8)+b)%31)throw Error(\"invalid fcheck flag:\"+((a<<8)+b)%31);if(b&32)throw Error(\"fdict flag is not supported\");this.q=new w(c,{index:this.a,bufferSize:d.bufferSize,bufferType:d.bufferType,resize:d.resize})}\nW.prototype.k=function(){var c=this.input,d,a;d=this.q.k();this.a=this.q.a;if(this.A){a=(c[this.a++]<<24|c[this.a++]<<16|c[this.a++]<<8|c[this.a++])>>>0;var b=d;if(\"string\"===typeof b){var e=b.split(\"\"),f,g;f=0;for(g=e.length;f<g;f++)e[f]=(e[f].charCodeAt(0)&255)>>>0;b=e}for(var h=1,k=0,m=b.length,n,p=0;0<m;){n=1024<m?1024:m;m-=n;do h+=b[p++],k+=h;while(--n);h%=65521;k%=65521}if(a!==(k<<16|h)>>>0)throw Error(\"invalid adler-32 checksum\");}return d};var ha=8;r(\"Zlib.Inflate\",W);r(\"Zlib.Inflate.prototype.decompress\",W.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r(\"Zlib.Inflate.BufferType.\"+Z,X[Z]);}).call(this);\n\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/libs/inflate.min.js","/**\n *  materials config data\n * \n *  @ JiuyiZhang\n */\n\nconst THREE = require('three')\n\nconst ValueType = {\n  Number: 0,\n  Bool: 1,\n  Color: 2,\n  Texture: 3,\n  EnvCub: 4,\n  Select: 5,\n  Vector2: 6,\n  Vector3: 7,\n  ColorRGB: 8\n}\n\n\nconst LightEditChildren = [\n  {name: 'color', type: ValueType.ColorRGB},\n  {name: 'groundColor', type: ValueType.ColorRGB},\n  {name: 'intensity', type: ValueType.Number, value: [0, 2]},\n  {name: 'distance', type: ValueType.Number, value: [0, 1000]},\n  {name: 'angle', type: ValueType.Number, value: [0, Math.PI / 2]},\n  {name: 'decay', type: ValueType.Number, value: [0, 10]},\n  {name: 'penumbra', type: ValueType.Number, value: [0, 2]},\n  {name: 'position', type: ValueType.Vector3, value: [-5000, 5000]}\n]\n\n\nconst MaterialEditChildren = [\n  {name: 'visible', type: ValueType.Bool, value: true},\n  {name: 'blending', type: ValueType.Select, value: {NoBlending: THREE.NoBlending, NormalBlending: THREE.NormalBlending, AdditiveBlending: THREE.AdditiveBlending, SubtractiveBlending: THREE.SubtractiveBlending, MultiplyBlending: THREE.MultiplyBlending, CustomBlending: THREE.CustomBlending}},\n  {name: 'blendSrc', type: ValueType.Select, value: {ZeroFactor: THREE.ZeroFactor, OneFactor: THREE.OneFactor, SrcColorFactor: THREE.SrcColorFactor, OneMinusSrcColorFactor: THREE.OneMinusSrcColorFactor, SrcAlphaFactor: THREE.SrcAlphaFactor, OneMinusSrcAlphaFactor: THREE.OneMinusSrcAlphaFactor, DstAlphaFactor: THREE.DstAlphaFactor, OneMinusDstAlphaFactor: THREE.OneMinusDstAlphaFactor, DstColorFactor: THREE.DstColorFactor, OneMinusDstColorFactor: THREE.OneMinusDstColorFactor, SrcAlphaSaturateFactor: THREE.SrcAlphaSaturateFactor}},\n  {name: 'blendDst', type: ValueType.Select, value: {ZeroFactor: THREE.ZeroFactor, OneFactor: THREE.OneFactor, SrcColorFactor: THREE.SrcColorFactor, OneMinusSrcColorFactor: THREE.OneMinusSrcColorFactor, SrcAlphaFactor: THREE.SrcAlphaFactor, OneMinusSrcAlphaFactor: THREE.OneMinusSrcAlphaFactor, DstAlphaFactor: THREE.DstAlphaFactor, OneMinusDstAlphaFactor: THREE.OneMinusDstAlphaFactor, DstColorFactor: THREE.DstColorFactor, OneMinusDstColorFactor: THREE.OneMinusDstColorFactor, SrcAlphaSaturateFactor: THREE.SrcAlphaSaturateFactor}},\n  {name: 'blendEquation', type: ValueType.Select, value: {AddEquation: THREE.AddEquation, SubtractEquation: THREE.SubtractEquation, ReverseSubtractEquation: THREE.ReverseSubtractEquation, MinEquation: THREE.MinEquation, MaxEquation: THREE.MaxEquation}},\n  {name: 'shading', type: ValueType.Select, value: {FlatShading: THREE.FlatShading, SmoothShading: THREE.SmoothShading}},\n  {name: 'combine', type: ValueType.Select, value: {MultiplyOperation: THREE.MultiplyOperation, MixOperation: THREE.MixOperation, AddOperation: THREE.AddOperation}},\n  {name: 'side', type: ValueType.Select, value: {FrontSide: THREE.FrontSide, BackSide: THREE.BackSide, DoubleSide: THREE.DoubleSide}},\n  {name: 'opacity', type: ValueType.Number, value: [0, 1]},\n  {name: 'alphaTest', type: ValueType.Number, value: [0, 1]},\n  {name: 'transparent', type: ValueType.Bool, value: false},\n  {name: 'color', type: ValueType.Color},\n  {name: 'map', type: ValueType.Texture},\n  {name: 'specular', type: ValueType.Color},\n  {name: 'specularMap', type: ValueType.Texture},\n  {name: 'shininess', type: ValueType.Number, value: [0, 1000]},\n  {name: 'roughness', type: ValueType.Number, value: [0, 1]},\n  {name: 'metalness', type: ValueType.Number, value: [0, 1]},\n  {name: 'lightMap', type: ValueType.Texture},\n  {name: 'lightMapIntensity', type: ValueType.Number, value: [0, 1]},\n  {name: 'aoMap', type: ValueType.Texture},\n  {name: 'aoMapIntensity', type: ValueType.Number, value: [0, 1]},\n  {name: 'emissive', type: ValueType.Color},\n  {name: 'emissiveIntensity', type: ValueType.Number, value: [0, 1]},\n  {name: 'emissiveMap', type: ValueType.Texture},\n  {name: 'bumpMap', type: ValueType.Texture},\n  {name: 'bumpScale', type: ValueType.Number, value: [-100, 100]},\n  {name: 'normalMap', type: ValueType.Texture},\n  {name: 'normalScale', type: ValueType.Vector2, value: [-100, 100]},\n  {name: 'displacementMap', type: ValueType.Texture},\n  {name: 'displacementScale', type: ValueType.Number, value: [-100, 100]},\n  {name: 'displacementBias', type: ValueType.Number, value: [-1, 1]},\n  {name: 'roughnessMap', type: ValueType.Texture},\n  {name: 'metalnessMap', type: ValueType.Texture},\n  {name: 'alphaMap', type: ValueType.Texture},\n  {name: 'envMap', type: ValueType.EnvCub},\n  {name: 'envMapIntensity', type: ValueType.Number, value: [0, 1]},\n  {name: 'refractionRatio', type: ValueType.Number, value: [0, 10]},\n  {name: 'reflectivity', type: ValueType.Number, value: [0, 1]},\n  {name: 'clearCoat', type: ValueType.Number, value: [0, 1]},\n  {name: 'clearCoatRoughness', type: ValueType.Number, value: [0, 1]},\n  {name: 'morphTargets', type: ValueType.Bool, value: true},\n  {name: 'morphNormals', type: ValueType.Bool, value: true},\n  {name: 'wireframe', type: ValueType.Bool, value: false},\n  {name: 'skinning', type: ValueType.Bool, value: false}\n]\n\n\n\nexport { ValueType, LightEditChildren, MaterialEditChildren }\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/materials/SetMaterial.Constant.js","\nimport { Fileloader, FontreLoader, dracoLoader } from './Three.Constant.js'\nimport  { Utf8ArrayToStr } from './libs/compute'\nimport State from '../state/state'\nconst OBJLoader = require('three-obj-loader')\nconst THREE = require('three')\n// require('./libs/inflate.min.js')\nrequire('./libs/FBXLoader')\nrequire('./libs/GLTFLoader')\n\nconst FBXLoader = new THREE.FBXLoader()\nOBJLoader(THREE)\n\nconst Loaders = {\n\n  'json': (() => {\n    let caChe = {}\n    return async path => {\n      if ( caChe[path] ) return caChe[path]\n      return new Promise( resolve => {\n        Fileloader.load(`${path}.json`, data => {\n          caChe[path] = JSON.parse(data)\n          resolve(JSON.parse(data))\n        })\n      })\n    }\n  })(),\n\n  'ftrn': (() => {\n    let caChe = {}\n    return async path => {\n      if ( caChe[path] ) return  caChe[path] \n      let blob  = await FontreLoader.loadFtrn(`${path}.ftrn`)\n      caChe[path] = JSON.parse(Utf8ArrayToStr(new Uint8Array(blob)))\n      return caChe[path]\n    }\n  })(),\n\n\n  'ftrm': path => {\n    // cache\n    if ( State.ftrmCache[path] ) {\n      return State.ftrmCache[path] \n    }\n    return new Promise( resolve => {\n      let req = dracoLoader.loadFtrm( path, async blob => {\n        State.ftrmCache[path] = blob\n        resolve(blob)\n      })\n      State.requestList.push(req)\n    })\n  },\n\n\n  'drc': async (path) => {\n    return new Promise( res => {\n      dracoLoader.load( path, function ( geometry ) {\n        geometry.computeVertexNormals();\n        let mesh = new THREE.Mesh(geometry);\n        res(mesh)\n      })\n    })\n  },\n\n\n  decoder: (blob) => {\n    return new Promise( resolve => {\n      dracoLoader.decodeDracoFile(blob, geometry => {\n        if (geometry.attributes.uv) {\n          let uvs = geometry.attributes.uv.array \n          geometry.addAttribute(\"uv2\", new THREE.BufferAttribute(uvs, 2));\n        } else {\n          console.log(`error: ${blob}`)\n        }\n        setTimeout(()=> { \n          resolve(geometry) \n        }, 0)\n      })\n    })\n  },\n\n  'obj': function(path) {\n\n    return new Promise (res => {\n      new THREE.OBJLoader().load( path, obj => {\n        console.log(obj)\n        const mesh = obj.children[0]\n        res( mesh )\n      })\n    })\n\n  },\n\n\n  'FBX': function(path) {\n\n    return new Promise (res => {  \n      FBXLoader.load( path, obj => {\n\n        // console.log(obj)\n        res( obj )\n      })\n    })\n  },\n\n  'gltf': function(path) {\n    return new Promise (res => {  \n      new THREE.GLTFLoader().load( path, gltf => {\n        res( gltf )\n      })\n    })\n  }\n\n \n}\n\n\nexport default Loaders\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Loaders.js","\n\nimport { Orbit, Renderer, Scene, Camera, FPS, Helper, Clock} from './Three.Constant'\nimport { spriteAnimation, toRotateWheel, animationFbx } from './Animation.Action.js'\nimport State from '../state/state'\n\nconst THREE = require('three')\nconst TWEEN = require('@tweenjs/tween.js')\n\nconst animation = function () {\n\n  if (typeof State.animateId === 'number' ) return \n\n  let count = 0;\n  let wheelCount = 0\n  console.time('animation');\n  (function _animate() {\n    count++\n    \n    if ( State.isRotateWheel ) {\n      wheelCount++\n      toRotateWheel(wheelCount, State.rotateWheelSpeed)  // 车轮转动\n    } \n\n    spriteAnimation(count)\n    \n    if ( State.composer ) {\n      State.composer.render()\n    } else {\n      Renderer.render(Scene, Camera)\n    }\n\n    // console.log(Camera.position)\n\n    TWEEN.update()\n    Orbit.update()\n\n    if ( FPS ) FPS.update()\n\n    State.animateId = requestAnimationFrame(_animate)\n\n  }())\n}\n\n\n\nexport default animation\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/Animation.js","/**\n * \n * @param {*} 创建添加 黑色遮罩\n */\n\n\nexport const createEl = function (dom) {\n\n  const div = document.createElement('div')\n\n  div.id = 'fontregl_shade'\n  \n  div.style.position = 'absolute'\n  div.style.background = 'white'\n  div.style.top = '0px'\n  div.style.left = '0px'\n  div.style.height = '100%'\n  div.style.width = '100%'\n  div.style.transition = '2s'   \n  div.style.transitionProperty = 'opacity'\n  div.style.opacity = 1\n  \n  // dom.parentElement.insertBefore(div, dom)\n  document.body.appendChild(div)\n\n\n  // 绑定过渡结束事件\n  div.addEventListener(\"transitionend\", ()=> {\n\n    console.log('-=-=-=-=-=-=-' , div.style.opacity )\n    if ( div.style.opacity === '0') {\n\n      div.style.width = '0'\n    }\n  }, false);\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/shade/createShade.js","\n\nexport const hideShade = () => {\n  \n  let shadeEl = document.querySelector('#fontregl_shade')\n  if ( !shadeEl ) return console.warn('element [fontregl_shade] not exist ')\n\n\n  shadeEl.style.opacity = 0\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/shade/hideShade.js","\n\nexport const showShade = (bg = 'black') => {\n  \n  let shadeEl = document.querySelector('#fontregl_shade')\n\n  if ( !shadeEl ) return console.warn('element [fontregl_shade] not exist ')\n\n  shadeEl.style.width = '100%'\n  shadeEl.style.background = bg\n\n  shadeEl.style.opacity = 1\n}\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/shade/showShade.js","import { createEl } from './createShade'\nimport { hideShade } from './hideShade'\nimport { showShade } from './showShade'\n\n\nexport { createEl, hideShade, showShade}\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/shade/index.js","import { ValueType } from  './SetMaterial.Constant'\nimport { getTexture, getEnvMap } from '../Tools'\n\n\nconst setMaterial = async (object, parameter, children) => {\n\n  for ( let i = 0, l = children.length; i < l; i++ ) {\n\n    let { name, type } = children[i]\n\n    if (!object.hasOwnProperty(name) || !parameter.hasOwnProperty(name)) {\n      continue\n    }\n\n    switch (type) {\n\n      case ValueType.Number:\n        object[name] = parameter[name]\n        break\n\n      case ValueType.Bool: \n        object[name] = parameter[name]\n        break\n\n      case ValueType.Color:\n        object[name].setHex(parameter[name])\n        break\n\n\n      case ValueType.Texture:\n        object[name] = await getTexture(parameter[name])\n        break\n\n      case ValueType.EnvCub:\n        object[name] = await getEnvMap(parameter[name])\n        break\n\n      case ValueType.Select:\n        object[name] = parameter[name]\n        break\n\n      case ValueType.Vector2:\n        _iterationObj(object[name], parameter[name])\n        break\n        \n      case ValueType.Vector3:\n        _iterationObj(object[name], parameter[name])\n        break\n\n      case ValueType.ColorRGB:\n        _iterationObj(object[name], parameter[name])\n        break\n\n      default:\n        throw Error('setMaterial not found type')\n    }\n  }\n}\n\n// 从参数中拿值给materials对象\nfunction _iterationObj(materObj, paramObj) {\n  for (let name in paramObj) {\n    materObj[name] = paramObj[name]\n  }\n}\n\n\nexport default setMaterial\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/three/materials/SetMaterial.js","let state = {\n\n  version: '1.1.5',  //版本  \n\n  isCancel: false,  // 是否被取消\n\n  isLoading: false,  // 是否在 loading 状态\n\n  postprocessing: null,  // 后处理抗锯齿 (taa || null)   设置为null时 请开启renderer 抗锯齿\n\n  composer: null,  \n\n  sceneCache: [], // 场景列表\n\n  debug: false, //  debug模式\n  \n  carCode: null,  // 模型名字\n\n  animateId: null,  // 动画id\n\n  hotSpotState: {},   // 热点开门状态\n\n  spriteState: {},   //热点精灵状态\n\n  requestList: [],  // 请求列表\n\n  textureCache: {},  // 贴图缓存\n\n  ftrmCache: {},  //模型缓存\n\n  isRotateWheel: false, // 是否开启车轮旋转\n\n  rotateWheelSpeed: 1, // 车轮滚动速度\n\n  transRotateWheelSpeed: 0, // 记录车轮过渡速度\n\n  tempRotateWheelSpeed: 1, // 比较速度变化\n\n  isOpenLight: false, // 是否开灯\n\n  isShowSellPoints: false, // 是否展示卖点\n\n  // 当前相机静止位置\n  currCameraPos: null,\n\n  storeCameraDistance: null,\n\n  isGetAlpha: false,\n  firstAlpha: null,\n\n  \n}\n\n\nexport default state\n\n\n// WEBPACK FOOTER //\n// ./src/FontreGL/state/state.js"],"sourceRoot":""}